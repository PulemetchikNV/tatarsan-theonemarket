---

description: Структура LangChain-слоя
globs:
  - src/core/langchain/**
alwaysApply: false
---
- Модели и общие настройки LLM держите в `shared/` (например, `callModel.ts`), а не дублируйте по файлам.
- Агентов (`createAgent`, `.withStructuredOutput` и т.п.) размещайте в `agents/`, инструменты — в `tools/`, схемы вывода — в `schemas/`.
- Новые tools описывайте через `zod`-схемы и давайте им понятные описания на русском с явной областью применения.
- Агентам задавайте явный `systemPrompt`, фиксируя их роль (основной ассистент, валидатор, технический агент и т.п.).
- Код в `src/bot/**` не должен напрямую использовать `langchain` — только готовых агентов/сервисы из `src/core/langchain/**`.
