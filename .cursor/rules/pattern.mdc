---

description: Паттерн сервисов бота
globs:
  - src/bot/services/**
alwaysApply: true
---
- В `src/bot/services/**` сервисы оформляйте как классы с единичным экспортом-инстансом (`export class XService { ... }` + `export const xService = new XService()`).
- Не тяните внутрь сервисов Express/grammy-контекст; сервисы принимают примитивы и доменные типы, а не `ctx`.
- Логику работы с внешними API/агентами инкапсулируйте в сервисах, а не в handlers/commands.
- Логику валидации/AI/меню не смешивайте в одном сервисе — лучше несколько маленьких, чем один “god-service”.
- Внутри сервиса не логируйте `ctx`, логируйте только данные и id пользователя.
