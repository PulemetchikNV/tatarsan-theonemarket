<div class="grow w-full mx-auto xl:w-[calc(100%-28rem)]" id="content-area"><header id="header" class="relative"><div class="mt-0.5 space-y-2.5"><div class="breadcrumb-list flex flex-row items-center gap-1.5"><div class="breadcrumb-item inline-flex items-center gap-1.5 text-sm text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" data-breadcrumb-title="Tutorials"><a href="/oss/javascript/langchain/knowledge-base">Tutorials</a></div></div><div class="flex flex-col sm:flex-row items-start sm:items-center relative gap-2"><h1 id="page-title" class="inline-block text-2xl sm:text-3xl font-bold text-gray-900 tracking-tight dark:text-gray-200">Build a supervisor agent</h1><div id="page-context-menu" class="items-center shrink-0 min-w-[156px] justify-end ml-auto sm:flex hidden"><button id="page-context-menu-button" class="rounded-l-xl px-3 text-gray-700 dark:text-gray-300 py-1.5 border border-gray-200 dark:border-white/[0.07] bg-background-light dark:bg-background-dark hover:bg-gray-600/5 dark:hover:bg-gray-200/5 border-r-0" aria-label="Copy page"><div class="flex items-center gap-2 text-sm text-center font-medium"><svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-4 h-4"><path d="M14.25 5.25H7.25C6.14543 5.25 5.25 6.14543 5.25 7.25V14.25C5.25 15.3546 6.14543 16.25 7.25 16.25H14.25C15.3546 16.25 16.25 15.3546 16.25 14.25V7.25C16.25 6.14543 15.3546 5.25 14.25 5.25Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M2.80103 11.998L1.77203 5.07397C1.61003 3.98097 2.36403 2.96397 3.45603 2.80197L10.38 1.77297C11.313 1.63397 12.19 2.16297 12.528 3.00097" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg><span>Copy page</span></div></button><button class="group bg-background-light dark:bg-background-dark disabled:pointer-events-none [&amp;>span]:line-clamp-1 overflow-hidden group flex items-center py-0.5 gap-1 text-sm text-gray-950/50 dark:text-white/50 group-hover:text-gray-950/70 dark:group-hover:text-white/70 rounded-none rounded-r-xl border px-3 border-gray-200 aspect-square dark:border-white/[0.07] bg-background-light dark:bg-background-dark hover:bg-gray-600/5 dark:hover:bg-gray-200/5" aria-label="More actions" type="button" id="radix-_r_4q_" aria-haspopup="menu" aria-expanded="false" data-state="closed"><svg width="8" height="24" viewBox="0 -9 3 24" class="transition-transform text-gray-400 overflow-visible group-hover:text-gray-600 dark:text-gray-600 dark:group-hover:text-gray-400 rotate-90"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></button></div></div></div><div id="page-context-menu" class="flex items-center shrink-0 min-w-[156px] mt-3 sm:hidden"><button id="page-context-menu-button" class="rounded-l-xl px-3 text-gray-700 dark:text-gray-300 py-1.5 border border-gray-200 dark:border-white/[0.07] bg-background-light dark:bg-background-dark hover:bg-gray-600/5 dark:hover:bg-gray-200/5 border-r-0" aria-label="Copy page"><div class="flex items-center gap-2 text-sm text-center font-medium"><svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-4 h-4"><path d="M14.25 5.25H7.25C6.14543 5.25 5.25 6.14543 5.25 7.25V14.25C5.25 15.3546 6.14543 16.25 7.25 16.25H14.25C15.3546 16.25 16.25 15.3546 16.25 14.25V7.25C16.25 6.14543 15.3546 5.25 14.25 5.25Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M2.80103 11.998L1.77203 5.07397C1.61003 3.98097 2.36403 2.96397 3.45603 2.80197L10.38 1.77297C11.313 1.63397 12.19 2.16297 12.528 3.00097" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg><span>Copy page</span></div></button><button class="group bg-background-light dark:bg-background-dark disabled:pointer-events-none [&amp;>span]:line-clamp-1 overflow-hidden group flex items-center py-0.5 gap-1 text-sm text-gray-950/50 dark:text-white/50 group-hover:text-gray-950/70 dark:group-hover:text-white/70 rounded-none rounded-r-xl border px-3 border-gray-200 aspect-square dark:border-white/[0.07] bg-background-light dark:bg-background-dark hover:bg-gray-600/5 dark:hover:bg-gray-200/5" aria-label="More actions" type="button" id="radix-_r_4s_" aria-haspopup="menu" aria-expanded="false" data-state="closed"><svg width="8" height="24" viewBox="0 -9 3 24" class="transition-transform text-gray-400 overflow-visible group-hover:text-gray-600 dark:text-gray-600 dark:group-hover:text-gray-400 rotate-90"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></button></div></header><div class="mdx-content relative mt-8 mb-14 prose prose-gray dark:prose-invert" data-page-title="Build a supervisor agent" data-page-href="/oss/javascript/langchain/supervisor" id="content"><h2 class="flex whitespace-pre-wrap group font-semibold" id="overview"><div class="absolute" tabindex="-1"><a href="#overview" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100 focus:opacity-100 focus:outline-0 group/link" aria-label="Navigate to header">â€‹<div class="w-6 h-6 rounded-md flex items-center justify-center shadow-sm text-gray-400 dark:text-white/50 dark:bg-background-dark dark:brightness-[1.35] dark:ring-1 dark:hover:brightness-150 bg-white ring-1 ring-gray-400/30 dark:ring-gray-700/25 hover:ring-gray-400/60 dark:hover:ring-white/20 group-focus/link:border-2 group-focus/link:border-primary dark:group-focus/link:border-primary-light"><svg xmlns="http://www.w3.org/2000/svg" fill="gray" height="12px" viewBox="0 0 576 512"><path d="M0 256C0 167.6 71.6 96 160 96h72c13.3 0 24 10.7 24 24s-10.7 24-24 24H160C98.1 144 48 194.1 48 256s50.1 112 112 112h72c13.3 0 24 10.7 24 24s-10.7 24-24 24H160C71.6 416 0 344.4 0 256zm576 0c0 88.4-71.6 160-160 160H344c-13.3 0-24-10.7-24-24s10.7-24 24-24h72c61.9 0 112-50.1 112-112s-50.1-112-112-112H344c-13.3 0-24-10.7-24-24s10.7-24 24-24h72c88.4 0 160 71.6 160 160zM184 232H392c13.3 0 24 10.7 24 24s-10.7 24-24 24H184c-13.3 0-24-10.7-24-24s10.7-24 24-24z"></path></svg></div></a></div><span class="cursor-pointer">Overview</span></h2>
<span data-as="p">The <strong>supervisor pattern</strong> is a <a class="link" href="/oss/javascript/langchain/multi-agent">multi-agent</a> architecture where a central supervisor agent coordinates specialized worker agents. This approach excels when tasks require different types of expertise. Rather than building one agent that manages tool selection across domains, you create focused specialists coordinated by a supervisor who understands the overall workflow.</span>
<span data-as="p">In this tutorial, youâ€™ll build a personal assistant system that demonstrates these benefits through a realistic workflow. The system will coordinate two specialists with fundamentally different responsibilities:</span>
<ul>
<li>A <strong>calendar agent</strong> that handles scheduling, availability checking, and event management.</li>
<li>An <strong>email agent</strong> that manages communication, drafts messages, and sends notifications.</li>
</ul>
<span data-as="p">We will also incorporate <a class="link" href="/oss/javascript/langchain/human-in-the-loop">human-in-the-loop review</a> to allow users to approve, edit, and reject actions (such as outbound emails) as desired.</span>
<h3 class="flex whitespace-pre-wrap group font-semibold" id="why-use-a-supervisor"><div class="absolute" tabindex="-1"><a href="#why-use-a-supervisor" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100 focus:opacity-100 focus:outline-0 group/link" aria-label="Navigate to header">â€‹<div class="w-6 h-6 rounded-md flex items-center justify-center shadow-sm text-gray-400 dark:text-white/50 dark:bg-background-dark dark:brightness-[1.35] dark:ring-1 dark:hover:brightness-150 bg-white ring-1 ring-gray-400/30 dark:ring-gray-700/25 hover:ring-gray-400/60 dark:hover:ring-white/20 group-focus/link:border-2 group-focus/link:border-primary dark:group-focus/link:border-primary-light"><svg xmlns="http://www.w3.org/2000/svg" fill="gray" height="12px" viewBox="0 0 576 512"><path d="M0 256C0 167.6 71.6 96 160 96h72c13.3 0 24 10.7 24 24s-10.7 24-24 24H160C98.1 144 48 194.1 48 256s50.1 112 112 112h72c13.3 0 24 10.7 24 24s-10.7 24-24 24H160C71.6 416 0 344.4 0 256zm576 0c0 88.4-71.6 160-160 160H344c-13.3 0-24-10.7-24-24s10.7-24 24-24h72c61.9 0 112-50.1 112-112s-50.1-112-112-112H344c-13.3 0-24-10.7-24-24s10.7-24 24-24h72c88.4 0 160 71.6 160 160zM184 232H392c13.3 0 24 10.7 24 24s-10.7 24-24 24H184c-13.3 0-24-10.7-24-24s10.7-24 24-24z"></path></svg></div></a></div><span class="cursor-pointer">Why use a supervisor?</span></h3>
<span data-as="p">Multi-agent architectures allow you to partition <a class="link" href="/oss/javascript/langchain/tools">tools</a> across workers, each with their own individual prompts or instructions. Consider an agent with direct access to all calendar and email APIs: it must choose from many similar tools, understand exact formats for each API, and handle multiple domains simultaneously. If performance degrades, it may be helpful to separate related tools and associated prompts into logical groups (in part to manage iterative improvements).</span>
<h3 class="flex whitespace-pre-wrap group font-semibold" id="concepts"><div class="absolute" tabindex="-1"><a href="#concepts" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100 focus:opacity-100 focus:outline-0 group/link" aria-label="Navigate to header">â€‹<div class="w-6 h-6 rounded-md flex items-center justify-center shadow-sm text-gray-400 dark:text-white/50 dark:bg-background-dark dark:brightness-[1.35] dark:ring-1 dark:hover:brightness-150 bg-white ring-1 ring-gray-400/30 dark:ring-gray-700/25 hover:ring-gray-400/60 dark:hover:ring-white/20 group-focus/link:border-2 group-focus/link:border-primary dark:group-focus/link:border-primary-light"><svg xmlns="http://www.w3.org/2000/svg" fill="gray" height="12px" viewBox="0 0 576 512"><path d="M0 256C0 167.6 71.6 96 160 96h72c13.3 0 24 10.7 24 24s-10.7 24-24 24H160C98.1 144 48 194.1 48 256s50.1 112 112 112h72c13.3 0 24 10.7 24 24s-10.7 24-24 24H160C71.6 416 0 344.4 0 256zm576 0c0 88.4-71.6 160-160 160H344c-13.3 0-24-10.7-24-24s10.7-24 24-24h72c61.9 0 112-50.1 112-112s-50.1-112-112-112H344c-13.3 0-24-10.7-24-24s10.7-24 24-24h72c88.4 0 160 71.6 160 160zM184 232H392c13.3 0 24 10.7 24 24s-10.7 24-24 24H184c-13.3 0-24-10.7-24-24s10.7-24 24-24z"></path></svg></div></a></div><span class="cursor-pointer">Concepts</span></h3>
<span data-as="p">We will cover the following concepts:</span>
<ul>
<li><a class="link" href="/oss/javascript/langchain/multi-agent">Multi-agent systems</a></li>
<li><a class="link" href="/oss/javascript/langchain/human-in-the-loop">Human-in-the-loop review</a></li>
</ul>
<h2 class="flex whitespace-pre-wrap group font-semibold" id="setup"><div class="absolute" tabindex="-1"><a href="#setup" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100 focus:opacity-100 focus:outline-0 group/link" aria-label="Navigate to header">â€‹<div class="w-6 h-6 rounded-md flex items-center justify-center shadow-sm text-gray-400 dark:text-white/50 dark:bg-background-dark dark:brightness-[1.35] dark:ring-1 dark:hover:brightness-150 bg-white ring-1 ring-gray-400/30 dark:ring-gray-700/25 hover:ring-gray-400/60 dark:hover:ring-white/20 group-focus/link:border-2 group-focus/link:border-primary dark:group-focus/link:border-primary-light"><svg xmlns="http://www.w3.org/2000/svg" fill="gray" height="12px" viewBox="0 0 576 512"><path d="M0 256C0 167.6 71.6 96 160 96h72c13.3 0 24 10.7 24 24s-10.7 24-24 24H160C98.1 144 48 194.1 48 256s50.1 112 112 112h72c13.3 0 24 10.7 24 24s-10.7 24-24 24H160C71.6 416 0 344.4 0 256zm576 0c0 88.4-71.6 160-160 160H344c-13.3 0-24-10.7-24-24s10.7-24 24-24h72c61.9 0 112-50.1 112-112s-50.1-112-112-112H344c-13.3 0-24-10.7-24-24s10.7-24 24-24h72c88.4 0 160 71.6 160 160zM184 232H392c13.3 0 24 10.7 24 24s-10.7 24-24 24H184c-13.3 0-24-10.7-24-24s10.7-24 24-24z"></path></svg></div></a></div><span class="cursor-pointer">Setup</span></h2>
<h3 class="flex whitespace-pre-wrap group font-semibold" id="installation"><div class="absolute" tabindex="-1"><a href="#installation" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100 focus:opacity-100 focus:outline-0 group/link" aria-label="Navigate to header">â€‹<div class="w-6 h-6 rounded-md flex items-center justify-center shadow-sm text-gray-400 dark:text-white/50 dark:bg-background-dark dark:brightness-[1.35] dark:ring-1 dark:hover:brightness-150 bg-white ring-1 ring-gray-400/30 dark:ring-gray-700/25 hover:ring-gray-400/60 dark:hover:ring-white/20 group-focus/link:border-2 group-focus/link:border-primary dark:group-focus/link:border-primary-light"><svg xmlns="http://www.w3.org/2000/svg" fill="gray" height="12px" viewBox="0 0 576 512"><path d="M0 256C0 167.6 71.6 96 160 96h72c13.3 0 24 10.7 24 24s-10.7 24-24 24H160C98.1 144 48 194.1 48 256s50.1 112 112 112h72c13.3 0 24 10.7 24 24s-10.7 24-24 24H160C71.6 416 0 344.4 0 256zm576 0c0 88.4-71.6 160-160 160H344c-13.3 0-24-10.7-24-24s10.7-24 24-24h72c61.9 0 112-50.1 112-112s-50.1-112-112-112H344c-13.3 0-24-10.7-24-24s10.7-24 24-24h72c88.4 0 160 71.6 160 160zM184 232H392c13.3 0 24 10.7 24 24s-10.7 24-24 24H184c-13.3 0-24-10.7-24-24s10.7-24 24-24z"></path></svg></div></a></div><span class="cursor-pointer">Installation</span></h3>
<span data-as="p">This tutorial requires the <code>langchain</code> package:</span>
<div dir="ltr" data-orientation="horizontal" class="code-group p-0.5 mt-5 mb-8 flex flex-col not-prose relative overflow-hidden rounded-2xl border border-gray-950/10 dark:border-white/10 bg-gray-50 dark:bg-white/5 dark:codeblock-dark text-gray-950 dark:text-gray-50 codeblock-light"><div class="flex items-center justify-between gap-2 relative pr-2.5 *:first:*:ml-2.5" data-component-part="code-group-tab-bar"><div role="tablist" aria-orientation="horizontal" class="flex-1 min-w-0 text-xs leading-6 rounded-tl-xl gap-1 flex overflow-x-auto overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-black/15 hover:scrollbar-thumb-black/20 active:scrollbar-thumb-black/20 dark:scrollbar-thumb-white/20 dark:hover:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25" tabindex="0" data-orientation="horizontal" style="outline: currentcolor;"><button type="button" role="tab" aria-selected="true" aria-controls="radix-_r_5d_-content-0" data-state="active" id="radix-_r_5d_-trigger-0" class="group flex items-center relative gap-1.5 my-1 mb-1.5 outline-0 whitespace-nowrap font-medium !ml-0 first:!ml-2.5 focus:outline-2 text-primary dark:text-primary-light" tabindex="-1" data-orientation="horizontal" data-radix-collection-item=""><div class="flex items-center gap-1.5 px-1.5 rounded-lg z-10 group-hover:bg-gray-200/50 dark:group-hover:bg-gray-700/70 group-hover:text-primary dark:group-hover:text-primary-light">npm</div><div class="absolute -bottom-1.5 left-0 right-0 h-0.5 rounded-full bg-primary dark:bg-primary-light"></div></button><button type="button" role="tab" aria-selected="false" aria-controls="radix-_r_5d_-content-1" data-state="inactive" id="radix-_r_5d_-trigger-1" class="group flex items-center relative gap-1.5 my-1 mb-1.5 outline-0 whitespace-nowrap font-medium !ml-0 first:!ml-2.5 focus:outline-2 text-gray-500 dark:text-gray-400" tabindex="-1" data-orientation="horizontal" data-radix-collection-item=""><div class="flex items-center gap-1.5 px-1.5 rounded-lg z-10 group-hover:bg-gray-200/50 dark:group-hover:bg-gray-700/70 group-hover:text-primary dark:group-hover:text-primary-light">yarn</div></button><button type="button" role="tab" aria-selected="false" aria-controls="radix-_r_5d_-content-2" data-state="inactive" id="radix-_r_5d_-trigger-2" class="group flex items-center relative gap-1.5 my-1 mb-1.5 outline-0 whitespace-nowrap font-medium !ml-0 first:!ml-2.5 focus:outline-2 text-gray-500 dark:text-gray-400" tabindex="-1" data-orientation="horizontal" data-radix-collection-item=""><div class="flex items-center gap-1.5 px-1.5 rounded-lg z-10 group-hover:bg-gray-200/50 dark:group-hover:bg-gray-700/70 group-hover:text-primary dark:group-hover:text-primary-light">pnpm</div></button></div><div class="flex items-center justify-end shrink-0 gap-1.5"><div class="z-10 relative"><button class="h-[26px] w-[26px] flex items-center justify-center rounded-md backdrop-blur peer group/copy-button " data-testid="copy-code-button" aria-label="Copy the contents from the code block"><svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-gray-400 group-hover/copy-button:text-gray-500 dark:text-white/40 dark:group-hover/copy-button:text-white/60"><path d="M14.25 5.25H7.25C6.14543 5.25 5.25 6.14543 5.25 7.25V14.25C5.25 15.3546 6.14543 16.25 7.25 16.25H14.25C15.3546 16.25 16.25 15.3546 16.25 14.25V7.25C16.25 6.14543 15.3546 5.25 14.25 5.25Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M2.80103 11.998L1.77203 5.07397C1.61003 3.98097 2.36403 2.96397 3.45603 2.80197L10.38 1.77297C11.313 1.63397 12.19 2.16297 12.528 3.00097" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button><div aria-hidden="true" class="absolute top-11 left-1/2 transform whitespace-nowrap -translate-x-1/2 -translate-y-1/2 peer-hover:opacity-100 opacity-0 text-white rounded-lg px-1.5 py-0.5 text-xs bg-primary-dark">Copy</div></div></div></div><div class="flex flex-1 overflow-hidden"><div data-state="active" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-_r_5d_-trigger-0" id="radix-_r_5d_-content-0" tabindex="-1" class="w-full min-w-full max-w-full h-full max-h-full" style=""><div class="w-0 min-w-full max-w-full py-3.5 px-4 h-full dark:bg-codeblock relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out code-block-background [&amp;_*]:ring-0 [&amp;_*]:outline-0 [&amp;_*]:focus:ring-0 [&amp;_*]:focus:outline-0 [&amp;_pre>code]:pr-[3rem] [&amp;_pre>code>span.line-highlight]:min-w-[calc(100%+3rem)] [&amp;_pre>code>span.line-diff]:min-w-[calc(100%+3rem)] rounded-xt bg-white overflow-auto overflow-x-auto scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-black/15 hover:scrollbar-thumb-black/20 active:scrollbar-thumb-black/20 dark:scrollbar-thumb-white/20 dark:hover:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25" data-component-part="code-block-root" tabindex="0" style="font-variant-ligatures: none; height: 100%; background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E;"><div class="font-mono whitespace-pre flex-none text-sm h-full leading-6" data-component-part="code-group-tab-content"><pre class="shiki shiki-themes github-light-default dark-plus" style="background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E; color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;" language="shellscript"><code language="shellscript" numberoflines="1"><span class="line"><span style="color: rgb(149, 56, 0); --shiki-dark: #DCDCAA;">npm</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> install</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> langchain</span></span>
</code></pre></div></div></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-_r_5d_-trigger-1" hidden="" id="radix-_r_5d_-content-1" tabindex="-1" class="w-full min-w-full max-w-full h-full max-h-full"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-_r_5d_-trigger-2" hidden="" id="radix-_r_5d_-content-2" tabindex="-1" class="w-full min-w-full max-w-full h-full max-h-full"></div></div></div>
<span data-as="p">For more details, see our <a class="link" href="/oss/javascript/langchain/install">Installation guide</a>.</span>
<h3 class="flex whitespace-pre-wrap group font-semibold" id="langsmith"><div class="absolute" tabindex="-1"><a href="#langsmith" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100 focus:opacity-100 focus:outline-0 group/link" aria-label="Navigate to header">â€‹<div class="w-6 h-6 rounded-md flex items-center justify-center shadow-sm text-gray-400 dark:text-white/50 dark:bg-background-dark dark:brightness-[1.35] dark:ring-1 dark:hover:brightness-150 bg-white ring-1 ring-gray-400/30 dark:ring-gray-700/25 hover:ring-gray-400/60 dark:hover:ring-white/20 group-focus/link:border-2 group-focus/link:border-primary dark:group-focus/link:border-primary-light"><svg xmlns="http://www.w3.org/2000/svg" fill="gray" height="12px" viewBox="0 0 576 512"><path d="M0 256C0 167.6 71.6 96 160 96h72c13.3 0 24 10.7 24 24s-10.7 24-24 24H160C98.1 144 48 194.1 48 256s50.1 112 112 112h72c13.3 0 24 10.7 24 24s-10.7 24-24 24H160C71.6 416 0 344.4 0 256zm576 0c0 88.4-71.6 160-160 160H344c-13.3 0-24-10.7-24-24s10.7-24 24-24h72c61.9 0 112-50.1 112-112s-50.1-112-112-112H344c-13.3 0-24-10.7-24-24s10.7-24 24-24h72c88.4 0 160 71.6 160 160zM184 232H392c13.3 0 24 10.7 24 24s-10.7 24-24 24H184c-13.3 0-24-10.7-24-24s10.7-24 24-24z"></path></svg></div></a></div><span class="cursor-pointer">LangSmith</span></h3>
<span data-as="p">Set up <a href="https://smith.langchain.com" target="_blank" rel="noreferrer" class="link">LangSmith</a> to inspect what is happening inside your agent. Then set the following environment variables:</span>
<div dir="ltr" data-orientation="horizontal" class="code-group p-0.5 mt-5 mb-8 flex flex-col not-prose relative overflow-hidden rounded-2xl border border-gray-950/10 dark:border-white/10 bg-gray-50 dark:bg-white/5 dark:codeblock-dark text-gray-950 dark:text-gray-50 codeblock-light"><div class="flex items-center justify-between gap-2 relative pr-2.5 *:first:*:ml-2.5" data-component-part="code-group-tab-bar"><div role="tablist" aria-orientation="horizontal" class="flex-1 min-w-0 text-xs leading-6 rounded-tl-xl gap-1 flex overflow-x-auto overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-black/15 hover:scrollbar-thumb-black/20 active:scrollbar-thumb-black/20 dark:scrollbar-thumb-white/20 dark:hover:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25" tabindex="0" data-orientation="horizontal" style="outline: currentcolor;"><button type="button" role="tab" aria-selected="true" aria-controls="radix-_r_5h_-content-0" data-state="active" id="radix-_r_5h_-trigger-0" class="group flex items-center relative gap-1.5 my-1 mb-1.5 outline-0 whitespace-nowrap font-medium !ml-0 first:!ml-2.5 focus:outline-2 text-primary dark:text-primary-light" tabindex="-1" data-orientation="horizontal" data-radix-collection-item=""><div class="flex items-center gap-1.5 px-1.5 rounded-lg z-10 group-hover:bg-gray-200/50 dark:group-hover:bg-gray-700/70 group-hover:text-primary dark:group-hover:text-primary-light">bash</div><div class="absolute -bottom-1.5 left-0 right-0 h-0.5 rounded-full bg-primary dark:bg-primary-light"></div></button><button type="button" role="tab" aria-selected="false" aria-controls="radix-_r_5h_-content-1" data-state="inactive" id="radix-_r_5h_-trigger-1" class="group flex items-center relative gap-1.5 my-1 mb-1.5 outline-0 whitespace-nowrap font-medium !ml-0 first:!ml-2.5 focus:outline-2 text-gray-500 dark:text-gray-400" tabindex="-1" data-orientation="horizontal" data-radix-collection-item=""><div class="flex items-center gap-1.5 px-1.5 rounded-lg z-10 group-hover:bg-gray-200/50 dark:group-hover:bg-gray-700/70 group-hover:text-primary dark:group-hover:text-primary-light">typescript</div></button></div><div class="flex items-center justify-end shrink-0 gap-1.5"><div class="z-10 relative"><button class="h-[26px] w-[26px] flex items-center justify-center rounded-md backdrop-blur peer group/copy-button " data-testid="copy-code-button" aria-label="Copy the contents from the code block"><svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-gray-400 group-hover/copy-button:text-gray-500 dark:text-white/40 dark:group-hover/copy-button:text-white/60"><path d="M14.25 5.25H7.25C6.14543 5.25 5.25 6.14543 5.25 7.25V14.25C5.25 15.3546 6.14543 16.25 7.25 16.25H14.25C15.3546 16.25 16.25 15.3546 16.25 14.25V7.25C16.25 6.14543 15.3546 5.25 14.25 5.25Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M2.80103 11.998L1.77203 5.07397C1.61003 3.98097 2.36403 2.96397 3.45603 2.80197L10.38 1.77297C11.313 1.63397 12.19 2.16297 12.528 3.00097" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button><div aria-hidden="true" class="absolute top-11 left-1/2 transform whitespace-nowrap -translate-x-1/2 -translate-y-1/2 peer-hover:opacity-100 opacity-0 text-white rounded-lg px-1.5 py-0.5 text-xs bg-primary-dark">Copy</div></div></div></div><div class="flex flex-1 overflow-hidden"><div data-state="active" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-_r_5h_-trigger-0" id="radix-_r_5h_-content-0" tabindex="-1" class="w-full min-w-full max-w-full h-full max-h-full" style=""><div class="w-0 min-w-full max-w-full py-3.5 px-4 h-full dark:bg-codeblock relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out code-block-background [&amp;_*]:ring-0 [&amp;_*]:outline-0 [&amp;_*]:focus:ring-0 [&amp;_*]:focus:outline-0 [&amp;_pre>code]:pr-[3rem] [&amp;_pre>code>span.line-highlight]:min-w-[calc(100%+3rem)] [&amp;_pre>code>span.line-diff]:min-w-[calc(100%+3rem)] rounded-xt bg-white overflow-auto overflow-x-auto scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-black/15 hover:scrollbar-thumb-black/20 active:scrollbar-thumb-black/20 dark:scrollbar-thumb-white/20 dark:hover:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25" data-component-part="code-block-root" tabindex="0" style="font-variant-ligatures: none; height: 100%; background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E;"><div class="font-mono whitespace-pre flex-none text-sm h-full leading-6" data-component-part="code-group-tab-content"><pre class="shiki shiki-themes github-light-default dark-plus" style="background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E; color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;" language="shellscript"><code language="shellscript" numberoflines="2"><span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">export</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> LANGSMITH_TRACING</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;">=</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">"true"</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">export</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> LANGSMITH_API_KEY</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;">=</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">"..."</span></span>
</code></pre></div></div></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-_r_5h_-trigger-1" hidden="" id="radix-_r_5h_-content-1" tabindex="-1" class="w-full min-w-full max-w-full h-full max-h-full"></div></div></div>
<h3 class="flex whitespace-pre-wrap group font-semibold" id="components"><div class="absolute" tabindex="-1"><a href="#components" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100 focus:opacity-100 focus:outline-0 group/link" aria-label="Navigate to header">â€‹<div class="w-6 h-6 rounded-md flex items-center justify-center shadow-sm text-gray-400 dark:text-white/50 dark:bg-background-dark dark:brightness-[1.35] dark:ring-1 dark:hover:brightness-150 bg-white ring-1 ring-gray-400/30 dark:ring-gray-700/25 hover:ring-gray-400/60 dark:hover:ring-white/20 group-focus/link:border-2 group-focus/link:border-primary dark:group-focus/link:border-primary-light"><svg xmlns="http://www.w3.org/2000/svg" fill="gray" height="12px" viewBox="0 0 576 512"><path d="M0 256C0 167.6 71.6 96 160 96h72c13.3 0 24 10.7 24 24s-10.7 24-24 24H160C98.1 144 48 194.1 48 256s50.1 112 112 112h72c13.3 0 24 10.7 24 24s-10.7 24-24 24H160C71.6 416 0 344.4 0 256zm576 0c0 88.4-71.6 160-160 160H344c-13.3 0-24-10.7-24-24s10.7-24 24-24h72c61.9 0 112-50.1 112-112s-50.1-112-112-112H344c-13.3 0-24-10.7-24-24s10.7-24 24-24h72c88.4 0 160 71.6 160 160zM184 232H392c13.3 0 24 10.7 24 24s-10.7 24-24 24H184c-13.3 0-24-10.7-24-24s10.7-24 24-24z"></path></svg></div></a></div><span class="cursor-pointer">Components</span></h3>
<span data-as="p">We will need to select a chat model from LangChainâ€™s suite of integrations:</span>
<div class="tabs tabs tab-container" id="openai"><ul class="not-prose mb-6 pb-[1px] flex-none min-w-full overflow-auto border-b border-gray-200 gap-x-6 flex dark:border-gray-200/10" data-component-part="tabs-list"><li id="openai" tabindex="0" class="cursor-pointer"><div class="flex text-sm items-center gap-1.5 leading-6 font-semibold whitespace-nowrap pt-3 pb-2.5 -mb-px max-w-max border-b text-primary dark:text-primary-light border-current" data-component-part="tab-button" data-active="true" data-testid="tab-OpenAI"> OpenAI</div></li><li id="anthropic" tabindex="-1" class="cursor-pointer"><div class="flex text-sm items-center gap-1.5 leading-6 font-semibold whitespace-nowrap pt-3 pb-2.5 -mb-px max-w-max border-b text-gray-900 border-transparent hover:border-gray-300 dark:text-gray-200 dark:hover:border-gray-700" data-component-part="tab-button" data-active="false" data-testid="tab-Anthropic"> Anthropic</div></li><li id="azure" tabindex="-1" class="cursor-pointer"><div class="flex text-sm items-center gap-1.5 leading-6 font-semibold whitespace-nowrap pt-3 pb-2.5 -mb-px max-w-max border-b text-gray-900 border-transparent hover:border-gray-300 dark:text-gray-200 dark:hover:border-gray-700" data-component-part="tab-button" data-active="false" data-testid="tab-Azure"> Azure</div></li><li id="google-gemini" tabindex="-1" class="cursor-pointer"><div class="flex text-sm items-center gap-1.5 leading-6 font-semibold whitespace-nowrap pt-3 pb-2.5 -mb-px max-w-max border-b text-gray-900 border-transparent hover:border-gray-300 dark:text-gray-200 dark:hover:border-gray-700" data-component-part="tab-button" data-active="false" data-testid="tab-Google Gemini"> Google Gemini</div></li><li id="bedrock-converse" tabindex="-1" class="cursor-pointer"><div class="flex text-sm items-center gap-1.5 leading-6 font-semibold whitespace-nowrap pt-3 pb-2.5 -mb-px max-w-max border-b text-gray-900 border-transparent hover:border-gray-300 dark:text-gray-200 dark:hover:border-gray-700" data-component-part="tab-button" data-active="false" data-testid="tab-Bedrock Converse"> Bedrock Converse</div></li></ul><div class="prose dark:prose-dark overflow-x-auto [&amp;_[data-table-wrapper]]:![--page-padding:0px] [&amp;_[role='listitem']]:pl-4" data-component-part="tab-content"><span data-as="p">ðŸ‘‰ Read the <a class="link" href="/oss/javascript/integrations/chat/openai">OpenAI chat model integration docs</a></span><div dir="ltr" data-orientation="horizontal" class="code-group p-0.5 mt-5 mb-8 flex flex-col not-prose relative overflow-hidden rounded-2xl border border-gray-950/10 dark:border-white/10 bg-gray-50 dark:bg-white/5 dark:codeblock-dark text-gray-950 dark:text-gray-50 codeblock-light"><div class="flex items-center justify-between gap-2 relative pr-2.5 *:first:*:ml-2.5" data-component-part="code-group-tab-bar"><div role="tablist" aria-orientation="horizontal" class="flex-1 min-w-0 text-xs leading-6 rounded-tl-xl gap-1 flex overflow-x-auto overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-black/15 hover:scrollbar-thumb-black/20 active:scrollbar-thumb-black/20 dark:scrollbar-thumb-white/20 dark:hover:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25" tabindex="0" data-orientation="horizontal" style="outline: currentcolor;"><button type="button" role="tab" aria-selected="true" aria-controls="radix-_r_5k_-content-0" data-state="active" id="radix-_r_5k_-trigger-0" class="group flex items-center relative gap-1.5 my-1 mb-1.5 outline-0 whitespace-nowrap font-medium !ml-0 first:!ml-2.5 focus:outline-2 text-primary dark:text-primary-light" tabindex="-1" data-orientation="horizontal" data-radix-collection-item=""><div class="flex items-center gap-1.5 px-1.5 rounded-lg z-10 group-hover:bg-gray-200/50 dark:group-hover:bg-gray-700/70 group-hover:text-primary dark:group-hover:text-primary-light">npm</div><div class="absolute -bottom-1.5 left-0 right-0 h-0.5 rounded-full bg-primary dark:bg-primary-light"></div></button><button type="button" role="tab" aria-selected="false" aria-controls="radix-_r_5k_-content-1" data-state="inactive" id="radix-_r_5k_-trigger-1" class="group flex items-center relative gap-1.5 my-1 mb-1.5 outline-0 whitespace-nowrap font-medium !ml-0 first:!ml-2.5 focus:outline-2 text-gray-500 dark:text-gray-400" tabindex="-1" data-orientation="horizontal" data-radix-collection-item=""><div class="flex items-center gap-1.5 px-1.5 rounded-lg z-10 group-hover:bg-gray-200/50 dark:group-hover:bg-gray-700/70 group-hover:text-primary dark:group-hover:text-primary-light">pnpm</div></button><button type="button" role="tab" aria-selected="false" aria-controls="radix-_r_5k_-content-2" data-state="inactive" id="radix-_r_5k_-trigger-2" class="group flex items-center relative gap-1.5 my-1 mb-1.5 outline-0 whitespace-nowrap font-medium !ml-0 first:!ml-2.5 focus:outline-2 text-gray-500 dark:text-gray-400" tabindex="-1" data-orientation="horizontal" data-radix-collection-item=""><div class="flex items-center gap-1.5 px-1.5 rounded-lg z-10 group-hover:bg-gray-200/50 dark:group-hover:bg-gray-700/70 group-hover:text-primary dark:group-hover:text-primary-light">yarn</div></button><button type="button" role="tab" aria-selected="false" aria-controls="radix-_r_5k_-content-3" data-state="inactive" id="radix-_r_5k_-trigger-3" class="group flex items-center relative gap-1.5 my-1 mb-1.5 outline-0 whitespace-nowrap font-medium !ml-0 first:!ml-2.5 focus:outline-2 text-gray-500 dark:text-gray-400" tabindex="-1" data-orientation="horizontal" data-radix-collection-item=""><div class="flex items-center gap-1.5 px-1.5 rounded-lg z-10 group-hover:bg-gray-200/50 dark:group-hover:bg-gray-700/70 group-hover:text-primary dark:group-hover:text-primary-light">bun</div></button></div><div class="flex items-center justify-end shrink-0 gap-1.5"><div class="z-10 relative"><button class="h-[26px] w-[26px] flex items-center justify-center rounded-md backdrop-blur peer group/copy-button " data-testid="copy-code-button" aria-label="Copy the contents from the code block"><svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-gray-400 group-hover/copy-button:text-gray-500 dark:text-white/40 dark:group-hover/copy-button:text-white/60"><path d="M14.25 5.25H7.25C6.14543 5.25 5.25 6.14543 5.25 7.25V14.25C5.25 15.3546 6.14543 16.25 7.25 16.25H14.25C15.3546 16.25 16.25 15.3546 16.25 14.25V7.25C16.25 6.14543 15.3546 5.25 14.25 5.25Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M2.80103 11.998L1.77203 5.07397C1.61003 3.98097 2.36403 2.96397 3.45603 2.80197L10.38 1.77297C11.313 1.63397 12.19 2.16297 12.528 3.00097" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button><div aria-hidden="true" class="absolute top-11 left-1/2 transform whitespace-nowrap -translate-x-1/2 -translate-y-1/2 peer-hover:opacity-100 opacity-0 text-white rounded-lg px-1.5 py-0.5 text-xs bg-primary-dark">Copy</div></div></div></div><div class="flex flex-1 overflow-hidden"><div data-state="active" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-_r_5k_-trigger-0" id="radix-_r_5k_-content-0" tabindex="-1" class="w-full min-w-full max-w-full h-full max-h-full" style=""><div class="w-0 min-w-full max-w-full py-3.5 px-4 h-full dark:bg-codeblock relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out code-block-background [&amp;_*]:ring-0 [&amp;_*]:outline-0 [&amp;_*]:focus:ring-0 [&amp;_*]:focus:outline-0 [&amp;_pre>code]:pr-[3rem] [&amp;_pre>code>span.line-highlight]:min-w-[calc(100%+3rem)] [&amp;_pre>code>span.line-diff]:min-w-[calc(100%+3rem)] rounded-xt bg-white overflow-auto overflow-x-auto scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-black/15 hover:scrollbar-thumb-black/20 active:scrollbar-thumb-black/20 dark:scrollbar-thumb-white/20 dark:hover:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25" data-component-part="code-block-root" tabindex="0" style="font-variant-ligatures: none; height: 100%; background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E;"><div class="font-mono whitespace-pre flex-none text-sm h-full leading-6" data-component-part="code-group-tab-content"><pre class="shiki shiki-themes github-light-default dark-plus" style="background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E; color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;" language="shellscript"><code language="shellscript" numberoflines="1"><span class="line"><span style="color: rgb(149, 56, 0); --shiki-dark: #DCDCAA;">npm</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> install</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> @langchain/openai</span></span>
</code></pre></div></div></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-_r_5k_-trigger-1" hidden="" id="radix-_r_5k_-content-1" tabindex="-1" class="w-full min-w-full max-w-full h-full max-h-full"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-_r_5k_-trigger-2" hidden="" id="radix-_r_5k_-content-2" tabindex="-1" class="w-full min-w-full max-w-full h-full max-h-full"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-_r_5k_-trigger-3" hidden="" id="radix-_r_5k_-content-3" tabindex="-1" class="w-full min-w-full max-w-full h-full max-h-full"></div></div></div><div dir="ltr" data-orientation="horizontal" class="code-group p-0.5 mt-5 mb-8 flex flex-col not-prose relative overflow-hidden rounded-2xl border border-gray-950/10 dark:border-white/10 bg-gray-50 dark:bg-white/5 dark:codeblock-dark text-gray-950 dark:text-gray-50 codeblock-light"><div class="flex items-center justify-between gap-2 relative pr-2.5 *:first:*:ml-2.5" data-component-part="code-group-tab-bar"><div role="tablist" aria-orientation="horizontal" class="flex-1 min-w-0 text-xs leading-6 rounded-tl-xl gap-1 flex overflow-x-auto overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-black/15 hover:scrollbar-thumb-black/20 active:scrollbar-thumb-black/20 dark:scrollbar-thumb-white/20 dark:hover:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25" tabindex="0" data-orientation="horizontal" style="outline: currentcolor;"><button type="button" role="tab" aria-selected="true" aria-controls="radix-_r_5p_-content-0" data-state="active" id="radix-_r_5p_-trigger-0" class="group flex items-center relative gap-1.5 my-1 mb-1.5 outline-0 whitespace-nowrap font-medium !ml-0 first:!ml-2.5 focus:outline-2 text-primary dark:text-primary-light" tabindex="-1" data-orientation="horizontal" data-radix-collection-item=""><div class="flex items-center gap-1.5 px-1.5 rounded-lg z-10 group-hover:bg-gray-200/50 dark:group-hover:bg-gray-700/70 group-hover:text-primary dark:group-hover:text-primary-light">initChatModel</div><div class="absolute -bottom-1.5 left-0 right-0 h-0.5 rounded-full bg-primary dark:bg-primary-light"></div></button><button type="button" role="tab" aria-selected="false" aria-controls="radix-_r_5p_-content-1" data-state="inactive" id="radix-_r_5p_-trigger-1" class="group flex items-center relative gap-1.5 my-1 mb-1.5 outline-0 whitespace-nowrap font-medium !ml-0 first:!ml-2.5 focus:outline-2 text-gray-500 dark:text-gray-400" tabindex="-1" data-orientation="horizontal" data-radix-collection-item=""><div class="flex items-center gap-1.5 px-1.5 rounded-lg z-10 group-hover:bg-gray-200/50 dark:group-hover:bg-gray-700/70 group-hover:text-primary dark:group-hover:text-primary-light">Model Class</div></button></div><div class="flex items-center justify-end shrink-0 gap-1.5"><div class="z-10 relative"><button class="h-[26px] w-[26px] flex items-center justify-center rounded-md backdrop-blur peer group/copy-button " data-testid="copy-code-button" aria-label="Copy the contents from the code block"><svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-gray-400 group-hover/copy-button:text-gray-500 dark:text-white/40 dark:group-hover/copy-button:text-white/60"><path d="M14.25 5.25H7.25C6.14543 5.25 5.25 6.14543 5.25 7.25V14.25C5.25 15.3546 6.14543 16.25 7.25 16.25H14.25C15.3546 16.25 16.25 15.3546 16.25 14.25V7.25C16.25 6.14543 15.3546 5.25 14.25 5.25Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M2.80103 11.998L1.77203 5.07397C1.61003 3.98097 2.36403 2.96397 3.45603 2.80197L10.38 1.77297C11.313 1.63397 12.19 2.16297 12.528 3.00097" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button><div aria-hidden="true" class="absolute top-11 left-1/2 transform whitespace-nowrap -translate-x-1/2 -translate-y-1/2 peer-hover:opacity-100 opacity-0 text-white rounded-lg px-1.5 py-0.5 text-xs bg-primary-dark">Copy</div></div></div></div><div class="flex flex-1 overflow-hidden"><div data-state="active" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-_r_5p_-trigger-0" id="radix-_r_5p_-content-0" tabindex="-1" class="w-full min-w-full max-w-full h-full max-h-full" style=""><div class="w-0 min-w-full max-w-full py-3.5 px-4 h-full dark:bg-codeblock relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out code-block-background [&amp;_*]:ring-0 [&amp;_*]:outline-0 [&amp;_*]:focus:ring-0 [&amp;_*]:focus:outline-0 [&amp;_pre>code]:pr-[3rem] [&amp;_pre>code>span.line-highlight]:min-w-[calc(100%+3rem)] [&amp;_pre>code>span.line-diff]:min-w-[calc(100%+3rem)] rounded-xt bg-white overflow-auto overflow-x-auto scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-black/15 hover:scrollbar-thumb-black/20 active:scrollbar-thumb-black/20 dark:scrollbar-thumb-white/20 dark:hover:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25" data-component-part="code-block-root" tabindex="0" style="font-variant-ligatures: none; height: 100%; background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E;"><div class="font-mono whitespace-pre flex-none text-sm h-full leading-6" data-component-part="code-group-tab-content"><pre class="shiki shiki-themes github-light-default dark-plus" style="background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E; color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;" language="typescript"><code language="typescript" numberoflines="5"><span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">import</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> { </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">initChatModel</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> } </span><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">from</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "langchain"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">process</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">env</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;">OPENAI_API_KEY</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "your-api-key"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> model</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;"> await</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;"> initChatModel</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">"gpt-4.1"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">);</span></span>
</code></pre></div></div></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-_r_5p_-trigger-1" hidden="" id="radix-_r_5p_-content-1" tabindex="-1" class="w-full min-w-full max-w-full h-full max-h-full"></div></div></div></div></div>
<h2 class="flex whitespace-pre-wrap group font-semibold" id="1-define-tools"><div class="absolute" tabindex="-1"><a href="#1-define-tools" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100 focus:opacity-100 focus:outline-0 group/link" aria-label="Navigate to header">â€‹<div class="w-6 h-6 rounded-md flex items-center justify-center shadow-sm text-gray-400 dark:text-white/50 dark:bg-background-dark dark:brightness-[1.35] dark:ring-1 dark:hover:brightness-150 bg-white ring-1 ring-gray-400/30 dark:ring-gray-700/25 hover:ring-gray-400/60 dark:hover:ring-white/20 group-focus/link:border-2 group-focus/link:border-primary dark:group-focus/link:border-primary-light"><svg xmlns="http://www.w3.org/2000/svg" fill="gray" height="12px" viewBox="0 0 576 512"><path d="M0 256C0 167.6 71.6 96 160 96h72c13.3 0 24 10.7 24 24s-10.7 24-24 24H160C98.1 144 48 194.1 48 256s50.1 112 112 112h72c13.3 0 24 10.7 24 24s-10.7 24-24 24H160C71.6 416 0 344.4 0 256zm576 0c0 88.4-71.6 160-160 160H344c-13.3 0-24-10.7-24-24s10.7-24 24-24h72c61.9 0 112-50.1 112-112s-50.1-112-112-112H344c-13.3 0-24-10.7-24-24s10.7-24 24-24h72c88.4 0 160 71.6 160 160zM184 232H392c13.3 0 24 10.7 24 24s-10.7 24-24 24H184c-13.3 0-24-10.7-24-24s10.7-24 24-24z"></path></svg></div></a></div><span class="cursor-pointer">1. Define tools</span></h2>
<span data-as="p">Start by defining the tools that require structured inputs. In real applications, these would call actual APIs (Google Calendar, SendGrid, etc.). For this tutorial, youâ€™ll use stubs to demonstrate the pattern.</span>
<div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-950 dark:text-gray-50 codeblock-light border border-gray-950/10 dark:border-white/10 dark:twoslash-dark bg-transparent dark:bg-transparent" numberoflines="53" language="typescript"><div class="absolute top-3 right-4 flex items-center gap-1.5"><div class="z-10 relative"><button class="h-[26px] w-[26px] flex items-center justify-center rounded-md backdrop-blur peer group/copy-button " data-testid="copy-code-button" aria-label="Copy the contents from the code block"><svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-gray-400 group-hover/copy-button:text-gray-500 dark:text-white/40 dark:group-hover/copy-button:text-white/60"><path d="M14.25 5.25H7.25C6.14543 5.25 5.25 6.14543 5.25 7.25V14.25C5.25 15.3546 6.14543 16.25 7.25 16.25H14.25C15.3546 16.25 16.25 15.3546 16.25 14.25V7.25C16.25 6.14543 15.3546 5.25 14.25 5.25Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M2.80103 11.998L1.77203 5.07397C1.61003 3.98097 2.36403 2.96397 3.45603 2.80197L10.38 1.77297C11.313 1.63397 12.19 2.16297 12.528 3.00097" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button><div aria-hidden="true" class="absolute top-11 left-1/2 transform whitespace-nowrap -translate-x-1/2 -translate-y-1/2 peer-hover:opacity-100 opacity-0 text-white rounded-lg px-1.5 py-0.5 text-xs bg-primary-dark">Copy</div></div></div><div class="w-0 min-w-full max-w-full py-3.5 px-4 h-full dark:bg-codeblock relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out code-block-background [&amp;_*]:ring-0 [&amp;_*]:outline-0 [&amp;_*]:focus:ring-0 [&amp;_*]:focus:outline-0 [&amp;_pre>code]:pr-[3rem] [&amp;_pre>code>span.line-highlight]:min-w-[calc(100%+3rem)] [&amp;_pre>code>span.line-diff]:min-w-[calc(100%+3rem)] rounded-2xl bg-white overflow-x-auto scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-black/15 hover:scrollbar-thumb-black/20 active:scrollbar-thumb-black/20 dark:scrollbar-thumb-white/20 dark:hover:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25" data-component-part="code-block-root" tabindex="0" style="font-variant-ligatures: none; height: auto; background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E;"><div class="font-mono whitespace-pre leading-6"><pre class="shiki shiki-themes github-light-default dark-plus" style="background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E; color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;" language="typescript"><code language="typescript" numberoflines="53"><span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">import</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> { </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">tool</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> } </span><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">from</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "langchain"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">;</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">import</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> { </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> } </span><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">from</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "zod"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> createCalendarEvent</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;"> tool</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">  async</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> ({ </span><span style="color: rgb(149, 56, 0); --shiki-dark: #9CDCFE;">title</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">, </span><span style="color: rgb(149, 56, 0); --shiki-dark: #9CDCFE;">startTime</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">, </span><span style="color: rgb(149, 56, 0); --shiki-dark: #9CDCFE;">endTime</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">, </span><span style="color: rgb(149, 56, 0); --shiki-dark: #9CDCFE;">attendees</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">, </span><span style="color: rgb(149, 56, 0); --shiki-dark: #9CDCFE;">location</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> }) </span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">=&gt;</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> {</span></span>
<span class="line"><span style="color: rgb(110, 119, 129); --shiki-dark: #6A9955;">    // Stub: In practice, this would call Google Calendar API, Outlook API, etc.</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">    return</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> `Event created: </span><span style="color: rgb(10, 48, 105); --shiki-dark: #569CD6;">${</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">title</span><span style="color: rgb(10, 48, 105); --shiki-dark: #569CD6;">}</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> from </span><span style="color: rgb(10, 48, 105); --shiki-dark: #569CD6;">${</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">startTime</span><span style="color: rgb(10, 48, 105); --shiki-dark: #569CD6;">}</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> to </span><span style="color: rgb(10, 48, 105); --shiki-dark: #569CD6;">${</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">endTime</span><span style="color: rgb(10, 48, 105); --shiki-dark: #569CD6;">}</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> with </span><span style="color: rgb(10, 48, 105); --shiki-dark: #569CD6;">${</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">attendees</span><span style="color: rgb(10, 48, 105); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(5, 80, 174); --shiki-dark: #9CDCFE;">length</span><span style="color: rgb(10, 48, 105); --shiki-dark: #569CD6;">}</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> attendees`</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">;</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">  },</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">  {</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">    name:</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "create_calendar_event"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">,</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">    description:</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "Create a calendar event. Requires exact ISO datetime format."</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">,</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">    schema:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">object</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">({</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">      title:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">string</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(),</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">      startTime:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">string</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">().</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">describe</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">"ISO format: '2024-01-15T14:00:00'"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">),</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">      endTime:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">string</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">().</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">describe</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">"ISO format: '2024-01-15T15:00:00'"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">),</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">      attendees:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">array</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">string</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">()).</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">describe</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">"email addresses"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">),</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">      location:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">string</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">().</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">optional</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(),</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">    }),</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">  }</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> sendEmail</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;"> tool</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">  async</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> ({ </span><span style="color: rgb(149, 56, 0); --shiki-dark: #9CDCFE;">to</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">, </span><span style="color: rgb(149, 56, 0); --shiki-dark: #9CDCFE;">subject</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">, </span><span style="color: rgb(149, 56, 0); --shiki-dark: #9CDCFE;">body</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">, </span><span style="color: rgb(149, 56, 0); --shiki-dark: #9CDCFE;">cc</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> }) </span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">=&gt;</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> {</span></span>
<span class="line"><span style="color: rgb(110, 119, 129); --shiki-dark: #6A9955;">    // Stub: In practice, this would call SendGrid, Gmail API, etc.</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">    return</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> `Email sent to </span><span style="color: rgb(10, 48, 105); --shiki-dark: #569CD6;">${</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">to</span><span style="color: rgb(10, 48, 105); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">join</span><span style="color: rgb(10, 48, 105); --shiki-dark: #D4D4D4;">(</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">', '</span><span style="color: rgb(10, 48, 105); --shiki-dark: #D4D4D4;">)</span><span style="color: rgb(10, 48, 105); --shiki-dark: #569CD6;">}</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> - Subject: </span><span style="color: rgb(10, 48, 105); --shiki-dark: #569CD6;">${</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">subject</span><span style="color: rgb(10, 48, 105); --shiki-dark: #569CD6;">}</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">`</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">;</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">  },</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">  {</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">    name:</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "send_email"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">,</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">    description:</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "Send an email via email API. Requires properly formatted addresses."</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">,</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">    schema:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">object</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">({</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">      to:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">array</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">string</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">()).</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">describe</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">"email addresses"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">),</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">      subject:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">string</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(),</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">      body:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">string</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(),</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">      cc:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">array</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">string</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">()).</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">optional</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(),</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">    }),</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">  }</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> getAvailableTimeSlots</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;"> tool</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">  async</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> ({ </span><span style="color: rgb(149, 56, 0); --shiki-dark: #9CDCFE;">attendees</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">, </span><span style="color: rgb(149, 56, 0); --shiki-dark: #9CDCFE;">date</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">, </span><span style="color: rgb(149, 56, 0); --shiki-dark: #9CDCFE;">durationMinutes</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> }) </span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">=&gt;</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> {</span></span>
<span class="line"><span style="color: rgb(110, 119, 129); --shiki-dark: #6A9955;">    // Stub: In practice, this would query calendar APIs</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">    return</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> [</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">"09:00"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">, </span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">"14:00"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">, </span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">"16:00"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">];</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">  },</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">  {</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">    name:</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "get_available_time_slots"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">,</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">    description:</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "Check calendar availability for given attendees on a specific date."</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">,</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">    schema:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">object</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">({</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">      attendees:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">array</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">string</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">()),</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">      date:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">string</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">().</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">describe</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">"ISO format: '2024-01-15'"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">),</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">      durationMinutes:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">number</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(),</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">    }),</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">  }</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">);</span></span>
</code></pre></div></div></div>
<h2 class="flex whitespace-pre-wrap group font-semibold" id="2-create-specialized-sub-agents"><div class="absolute" tabindex="-1"><a href="#2-create-specialized-sub-agents" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100 focus:opacity-100 focus:outline-0 group/link" aria-label="Navigate to header">â€‹<div class="w-6 h-6 rounded-md flex items-center justify-center shadow-sm text-gray-400 dark:text-white/50 dark:bg-background-dark dark:brightness-[1.35] dark:ring-1 dark:hover:brightness-150 bg-white ring-1 ring-gray-400/30 dark:ring-gray-700/25 hover:ring-gray-400/60 dark:hover:ring-white/20 group-focus/link:border-2 group-focus/link:border-primary dark:group-focus/link:border-primary-light"><svg xmlns="http://www.w3.org/2000/svg" fill="gray" height="12px" viewBox="0 0 576 512"><path d="M0 256C0 167.6 71.6 96 160 96h72c13.3 0 24 10.7 24 24s-10.7 24-24 24H160C98.1 144 48 194.1 48 256s50.1 112 112 112h72c13.3 0 24 10.7 24 24s-10.7 24-24 24H160C71.6 416 0 344.4 0 256zm576 0c0 88.4-71.6 160-160 160H344c-13.3 0-24-10.7-24-24s10.7-24 24-24h72c61.9 0 112-50.1 112-112s-50.1-112-112-112H344c-13.3 0-24-10.7-24-24s10.7-24 24-24h72c88.4 0 160 71.6 160 160zM184 232H392c13.3 0 24 10.7 24 24s-10.7 24-24 24H184c-13.3 0-24-10.7-24-24s10.7-24 24-24z"></path></svg></div></a></div><span class="cursor-pointer">2. Create specialized sub-agents</span></h2>
<span data-as="p">Next, weâ€™ll create specialized sub-agents that handle each domain.</span>
<h3 class="flex whitespace-pre-wrap group font-semibold" id="create-a-calendar-agent"><div class="absolute" tabindex="-1"><a href="#create-a-calendar-agent" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100 focus:opacity-100 focus:outline-0 group/link" aria-label="Navigate to header">â€‹<div class="w-6 h-6 rounded-md flex items-center justify-center shadow-sm text-gray-400 dark:text-white/50 dark:bg-background-dark dark:brightness-[1.35] dark:ring-1 dark:hover:brightness-150 bg-white ring-1 ring-gray-400/30 dark:ring-gray-700/25 hover:ring-gray-400/60 dark:hover:ring-white/20 group-focus/link:border-2 group-focus/link:border-primary dark:group-focus/link:border-primary-light"><svg xmlns="http://www.w3.org/2000/svg" fill="gray" height="12px" viewBox="0 0 576 512"><path d="M0 256C0 167.6 71.6 96 160 96h72c13.3 0 24 10.7 24 24s-10.7 24-24 24H160C98.1 144 48 194.1 48 256s50.1 112 112 112h72c13.3 0 24 10.7 24 24s-10.7 24-24 24H160C71.6 416 0 344.4 0 256zm576 0c0 88.4-71.6 160-160 160H344c-13.3 0-24-10.7-24-24s10.7-24 24-24h72c61.9 0 112-50.1 112-112s-50.1-112-112-112H344c-13.3 0-24-10.7-24-24s10.7-24 24-24h72c88.4 0 160 71.6 160 160zM184 232H392c13.3 0 24 10.7 24 24s-10.7 24-24 24H184c-13.3 0-24-10.7-24-24s10.7-24 24-24z"></path></svg></div></a></div><span class="cursor-pointer">Create a calendar agent</span></h3>
<span data-as="p">The calendar agent understands natural language scheduling requests and translates them into precise API calls. It handles date parsing, availability checking, and event creation.</span>
<div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-950 dark:text-gray-50 codeblock-light border border-gray-950/10 dark:border-white/10 dark:twoslash-dark bg-transparent dark:bg-transparent" numberoflines="16" language="typescript"><div class="absolute top-3 right-4 flex items-center gap-1.5"><div class="z-10 relative"><button class="h-[26px] w-[26px] flex items-center justify-center rounded-md backdrop-blur peer group/copy-button " data-testid="copy-code-button" aria-label="Copy the contents from the code block"><svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-gray-400 group-hover/copy-button:text-gray-500 dark:text-white/40 dark:group-hover/copy-button:text-white/60"><path d="M14.25 5.25H7.25C6.14543 5.25 5.25 6.14543 5.25 7.25V14.25C5.25 15.3546 6.14543 16.25 7.25 16.25H14.25C15.3546 16.25 16.25 15.3546 16.25 14.25V7.25C16.25 6.14543 15.3546 5.25 14.25 5.25Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M2.80103 11.998L1.77203 5.07397C1.61003 3.98097 2.36403 2.96397 3.45603 2.80197L10.38 1.77297C11.313 1.63397 12.19 2.16297 12.528 3.00097" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button><div aria-hidden="true" class="absolute top-11 left-1/2 transform whitespace-nowrap -translate-x-1/2 -translate-y-1/2 peer-hover:opacity-100 opacity-0 text-white rounded-lg px-1.5 py-0.5 text-xs bg-primary-dark">Copy</div></div></div><div class="w-0 min-w-full max-w-full py-3.5 px-4 h-full dark:bg-codeblock relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out code-block-background [&amp;_*]:ring-0 [&amp;_*]:outline-0 [&amp;_*]:focus:ring-0 [&amp;_*]:focus:outline-0 [&amp;_pre>code]:pr-[3rem] [&amp;_pre>code>span.line-highlight]:min-w-[calc(100%+3rem)] [&amp;_pre>code>span.line-diff]:min-w-[calc(100%+3rem)] rounded-2xl bg-white overflow-x-auto scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-black/15 hover:scrollbar-thumb-black/20 active:scrollbar-thumb-black/20 dark:scrollbar-thumb-white/20 dark:hover:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25" data-component-part="code-block-root" tabindex="0" style="font-variant-ligatures: none; height: auto; background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E;"><div class="font-mono whitespace-pre leading-6"><pre class="shiki shiki-themes github-light-default dark-plus" style="background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E; color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;" language="typescript"><code language="typescript" numberoflines="16"><span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">import</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> { </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">createAgent</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> } </span><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">from</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "langchain"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> CALENDAR_AGENT_PROMPT</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> `</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">You are a calendar scheduling assistant.</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">Parse natural language scheduling requests (e.g., 'next Tuesday at 2pm')</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">into proper ISO datetime formats.</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">Use get_available_time_slots to check availability when needed.</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">Use create_calendar_event to schedule events.</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">Always confirm what was scheduled in your final response.</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">`</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">trim</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> calendarAgent</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;"> createAgent</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">({</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">  model:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> llm</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">,</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">  tools:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> [</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">createCalendarEvent</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">, </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">getAvailableTimeSlots</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">],</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">  systemPrompt:</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> CALENDAR_AGENT_PROMPT</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">,</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">});</span></span>
</code></pre></div></div></div>
<span data-as="p">Test the calendar agent to see how it handles natural language scheduling:</span>
<div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-950 dark:text-gray-50 codeblock-light border border-gray-950/10 dark:border-white/10 dark:twoslash-dark bg-transparent dark:bg-transparent" numberoflines="15" language="typescript"><div class="absolute top-3 right-4 flex items-center gap-1.5"><div class="z-10 relative"><button class="h-[26px] w-[26px] flex items-center justify-center rounded-md backdrop-blur peer group/copy-button " data-testid="copy-code-button" aria-label="Copy the contents from the code block"><svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-gray-400 group-hover/copy-button:text-gray-500 dark:text-white/40 dark:group-hover/copy-button:text-white/60"><path d="M14.25 5.25H7.25C6.14543 5.25 5.25 6.14543 5.25 7.25V14.25C5.25 15.3546 6.14543 16.25 7.25 16.25H14.25C15.3546 16.25 16.25 15.3546 16.25 14.25V7.25C16.25 6.14543 15.3546 5.25 14.25 5.25Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M2.80103 11.998L1.77203 5.07397C1.61003 3.98097 2.36403 2.96397 3.45603 2.80197L10.38 1.77297C11.313 1.63397 12.19 2.16297 12.528 3.00097" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button><div aria-hidden="true" class="absolute top-11 left-1/2 transform whitespace-nowrap -translate-x-1/2 -translate-y-1/2 peer-hover:opacity-100 opacity-0 text-white rounded-lg px-1.5 py-0.5 text-xs bg-primary-dark">Copy</div></div></div><div class="w-0 min-w-full max-w-full py-3.5 px-4 h-full dark:bg-codeblock relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out code-block-background [&amp;_*]:ring-0 [&amp;_*]:outline-0 [&amp;_*]:focus:ring-0 [&amp;_*]:focus:outline-0 [&amp;_pre>code]:pr-[3rem] [&amp;_pre>code>span.line-highlight]:min-w-[calc(100%+3rem)] [&amp;_pre>code>span.line-diff]:min-w-[calc(100%+3rem)] rounded-2xl bg-white overflow-x-auto scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-black/15 hover:scrollbar-thumb-black/20 active:scrollbar-thumb-black/20 dark:scrollbar-thumb-white/20 dark:hover:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25" data-component-part="code-block-root" tabindex="0" style="font-variant-ligatures: none; height: auto; background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E;"><div class="font-mono whitespace-pre leading-6"><pre class="shiki shiki-themes github-light-default dark-plus" style="background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E; color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;" language="typescript"><code language="typescript" numberoflines="15"><span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> query</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "Schedule a team meeting next Tuesday at 2pm for 1 hour"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> stream</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;"> await</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> calendarAgent</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">stream</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">({</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">  messages:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> [{ </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">role:</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "user"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">, </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">content:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> query</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> }]</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">for</span><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;"> await</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> (</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> step</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;"> of</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> stream</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">) {</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">  for</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> (</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> update</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;"> of</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> Object</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">values</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">step</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">)) {</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">    if</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> (</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">update</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> &amp;&amp;</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;"> typeof</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> update</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> ===</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "object"</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> &amp;&amp;</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "messages"</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;"> in</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> update</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">) {</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">      for</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> (</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> message</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;"> of</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> update</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">messages</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">) {</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">        console</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">log</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">message</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">toFormattedString</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">());</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">      }</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">    }</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">  }</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">}</span></span>
</code></pre></div></div></div>
<div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-950 dark:text-gray-50 codeblock-light border border-gray-950/10 dark:border-white/10 dark:twoslash-dark bg-transparent dark:bg-transparent" numberoflines="29" language="text"><div class="absolute top-3 right-4 flex items-center gap-1.5"><div class="z-10 relative"><button class="h-[26px] w-[26px] flex items-center justify-center rounded-md backdrop-blur peer group/copy-button " data-testid="copy-code-button" aria-label="Copy the contents from the code block"><svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-gray-400 group-hover/copy-button:text-gray-500 dark:text-white/40 dark:group-hover/copy-button:text-white/60"><path d="M14.25 5.25H7.25C6.14543 5.25 5.25 6.14543 5.25 7.25V14.25C5.25 15.3546 6.14543 16.25 7.25 16.25H14.25C15.3546 16.25 16.25 15.3546 16.25 14.25V7.25C16.25 6.14543 15.3546 5.25 14.25 5.25Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M2.80103 11.998L1.77203 5.07397C1.61003 3.98097 2.36403 2.96397 3.45603 2.80197L10.38 1.77297C11.313 1.63397 12.19 2.16297 12.528 3.00097" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button><div aria-hidden="true" class="absolute top-11 left-1/2 transform whitespace-nowrap -translate-x-1/2 -translate-y-1/2 peer-hover:opacity-100 opacity-0 text-white rounded-lg px-1.5 py-0.5 text-xs bg-primary-dark">Copy</div></div></div><div class="w-0 min-w-full max-w-full py-3.5 px-4 h-full dark:bg-codeblock relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out code-block-background [&amp;_*]:ring-0 [&amp;_*]:outline-0 [&amp;_*]:focus:ring-0 [&amp;_*]:focus:outline-0 [&amp;_pre>code]:pr-[3rem] [&amp;_pre>code>span.line-highlight]:min-w-[calc(100%+3rem)] [&amp;_pre>code>span.line-diff]:min-w-[calc(100%+3rem)] rounded-2xl bg-white overflow-x-auto scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-black/15 hover:scrollbar-thumb-black/20 active:scrollbar-thumb-black/20 dark:scrollbar-thumb-white/20 dark:hover:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25" data-component-part="code-block-root" tabindex="0" style="font-variant-ligatures: none; height: auto; background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E;"><div class="font-mono whitespace-pre leading-6"><pre class="shiki shiki-themes github-light-default dark-plus" style="background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E; color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;" language="text"><code language="text" numberoflines="29"><span class="line"><span>================================== Ai Message ==================================</span></span>
<span class="line"><span>Tool Calls:</span></span>
<span class="line"><span>  get_available_time_slots (call_EIeoeIi1hE2VmwZSfHStGmXp)</span></span>
<span class="line"><span> Call ID: call_EIeoeIi1hE2VmwZSfHStGmXp</span></span>
<span class="line"><span>  Args:</span></span>
<span class="line"><span>    attendees: []</span></span>
<span class="line"><span>    date: 2024-06-18</span></span>
<span class="line"><span>    duration_minutes: 60</span></span>
<span class="line"><span>================================= Tool Message =================================</span></span>
<span class="line"><span>Name: get_available_time_slots</span></span>
<span class="line"><span></span></span>
<span class="line"><span>["09:00", "14:00", "16:00"]</span></span>
<span class="line"><span>================================== Ai Message ==================================</span></span>
<span class="line"><span>Tool Calls:</span></span>
<span class="line"><span>  create_calendar_event (call_zgx3iJA66Ut0W8S3NpT93kEB)</span></span>
<span class="line"><span> Call ID: call_zgx3iJA66Ut0W8S3NpT93kEB</span></span>
<span class="line"><span>  Args:</span></span>
<span class="line"><span>    title: Team Meeting</span></span>
<span class="line"><span>    start_time: 2024-06-18T14:00:00</span></span>
<span class="line"><span>    end_time: 2024-06-18T15:00:00</span></span>
<span class="line"><span>    attendees: []</span></span>
<span class="line"><span>================================= Tool Message =================================</span></span>
<span class="line"><span>Name: create_calendar_event</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Event created: Team Meeting from 2024-06-18T14:00:00 to 2024-06-18T15:00:00 with 0 attendees</span></span>
<span class="line"><span>================================== Ai Message ==================================</span></span>
<span class="line"><span></span></span>
<span class="line"><span>The team meeting has been scheduled for next Tuesday, June 18th, at 2:00 PM and will last for 1 hour. If you need to add attendees or a location, please let me know!</span></span>
<span class="line"><span></span></span></code></pre></div></div></div>
<span data-as="p">The agent parses â€œnext Tuesday at 2pmâ€ into ISO format (â€œ2024-01-16T14:00:00â€), calculates the end time, calls <code>create_calendar_event</code>, and returns a natural language confirmation.</span>
<h3 class="flex whitespace-pre-wrap group font-semibold" id="create-an-email-agent"><div class="absolute" tabindex="-1"><a href="#create-an-email-agent" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100 focus:opacity-100 focus:outline-0 group/link" aria-label="Navigate to header">â€‹<div class="w-6 h-6 rounded-md flex items-center justify-center shadow-sm text-gray-400 dark:text-white/50 dark:bg-background-dark dark:brightness-[1.35] dark:ring-1 dark:hover:brightness-150 bg-white ring-1 ring-gray-400/30 dark:ring-gray-700/25 hover:ring-gray-400/60 dark:hover:ring-white/20 group-focus/link:border-2 group-focus/link:border-primary dark:group-focus/link:border-primary-light"><svg xmlns="http://www.w3.org/2000/svg" fill="gray" height="12px" viewBox="0 0 576 512"><path d="M0 256C0 167.6 71.6 96 160 96h72c13.3 0 24 10.7 24 24s-10.7 24-24 24H160C98.1 144 48 194.1 48 256s50.1 112 112 112h72c13.3 0 24 10.7 24 24s-10.7 24-24 24H160C71.6 416 0 344.4 0 256zm576 0c0 88.4-71.6 160-160 160H344c-13.3 0-24-10.7-24-24s10.7-24 24-24h72c61.9 0 112-50.1 112-112s-50.1-112-112-112H344c-13.3 0-24-10.7-24-24s10.7-24 24-24h72c88.4 0 160 71.6 160 160zM184 232H392c13.3 0 24 10.7 24 24s-10.7 24-24 24H184c-13.3 0-24-10.7-24-24s10.7-24 24-24z"></path></svg></div></a></div><span class="cursor-pointer">Create an email agent</span></h3>
<span data-as="p">The email agent handles message composition and sending. It focuses on extracting recipient information, crafting appropriate subject lines and body text, and managing email communication.</span>
<div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-950 dark:text-gray-50 codeblock-light border border-gray-950/10 dark:border-white/10 dark:twoslash-dark bg-transparent dark:bg-transparent" numberoflines="13" language="typescript"><div class="absolute top-3 right-4 flex items-center gap-1.5"><div class="z-10 relative"><button class="h-[26px] w-[26px] flex items-center justify-center rounded-md backdrop-blur peer group/copy-button " data-testid="copy-code-button" aria-label="Copy the contents from the code block"><svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-gray-400 group-hover/copy-button:text-gray-500 dark:text-white/40 dark:group-hover/copy-button:text-white/60"><path d="M14.25 5.25H7.25C6.14543 5.25 5.25 6.14543 5.25 7.25V14.25C5.25 15.3546 6.14543 16.25 7.25 16.25H14.25C15.3546 16.25 16.25 15.3546 16.25 14.25V7.25C16.25 6.14543 15.3546 5.25 14.25 5.25Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M2.80103 11.998L1.77203 5.07397C1.61003 3.98097 2.36403 2.96397 3.45603 2.80197L10.38 1.77297C11.313 1.63397 12.19 2.16297 12.528 3.00097" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button><div aria-hidden="true" class="absolute top-11 left-1/2 transform whitespace-nowrap -translate-x-1/2 -translate-y-1/2 peer-hover:opacity-100 opacity-0 text-white rounded-lg px-1.5 py-0.5 text-xs bg-primary-dark">Copy</div></div></div><div class="w-0 min-w-full max-w-full py-3.5 px-4 h-full dark:bg-codeblock relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out code-block-background [&amp;_*]:ring-0 [&amp;_*]:outline-0 [&amp;_*]:focus:ring-0 [&amp;_*]:focus:outline-0 [&amp;_pre>code]:pr-[3rem] [&amp;_pre>code>span.line-highlight]:min-w-[calc(100%+3rem)] [&amp;_pre>code>span.line-diff]:min-w-[calc(100%+3rem)] rounded-2xl bg-white overflow-x-auto scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-black/15 hover:scrollbar-thumb-black/20 active:scrollbar-thumb-black/20 dark:scrollbar-thumb-white/20 dark:hover:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25" data-component-part="code-block-root" tabindex="0" style="font-variant-ligatures: none; height: auto; background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E;"><div class="font-mono whitespace-pre leading-6"><pre class="shiki shiki-themes github-light-default dark-plus" style="background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E; color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;" language="typescript"><code language="typescript" numberoflines="13"><span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> EMAIL_AGENT_PROMPT</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> `</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">You are an email assistant.</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">Compose professional emails based on natural language requests.</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">Extract recipient information and craft appropriate subject lines and body text.</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">Use send_email to send the message.</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">Always confirm what was sent in your final response.</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">`</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">trim</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> emailAgent</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;"> createAgent</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">({</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">  model:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> llm</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">,</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">  tools:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> [</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">sendEmail</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">],</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">  systemPrompt:</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> EMAIL_AGENT_PROMPT</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">,</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">});</span></span>
</code></pre></div></div></div>
<span data-as="p">Test the email agent with a natural language request:</span>
<div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-950 dark:text-gray-50 codeblock-light border border-gray-950/10 dark:border-white/10 dark:twoslash-dark bg-transparent dark:bg-transparent" numberoflines="15" language="typescript"><div class="absolute top-3 right-4 flex items-center gap-1.5"><div class="z-10 relative"><button class="h-[26px] w-[26px] flex items-center justify-center rounded-md backdrop-blur peer group/copy-button " data-testid="copy-code-button" aria-label="Copy the contents from the code block"><svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-gray-400 group-hover/copy-button:text-gray-500 dark:text-white/40 dark:group-hover/copy-button:text-white/60"><path d="M14.25 5.25H7.25C6.14543 5.25 5.25 6.14543 5.25 7.25V14.25C5.25 15.3546 6.14543 16.25 7.25 16.25H14.25C15.3546 16.25 16.25 15.3546 16.25 14.25V7.25C16.25 6.14543 15.3546 5.25 14.25 5.25Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M2.80103 11.998L1.77203 5.07397C1.61003 3.98097 2.36403 2.96397 3.45603 2.80197L10.38 1.77297C11.313 1.63397 12.19 2.16297 12.528 3.00097" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button><div aria-hidden="true" class="absolute top-11 left-1/2 transform whitespace-nowrap -translate-x-1/2 -translate-y-1/2 peer-hover:opacity-100 opacity-0 text-white rounded-lg px-1.5 py-0.5 text-xs bg-primary-dark">Copy</div></div></div><div class="w-0 min-w-full max-w-full py-3.5 px-4 h-full dark:bg-codeblock relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out code-block-background [&amp;_*]:ring-0 [&amp;_*]:outline-0 [&amp;_*]:focus:ring-0 [&amp;_*]:focus:outline-0 [&amp;_pre>code]:pr-[3rem] [&amp;_pre>code>span.line-highlight]:min-w-[calc(100%+3rem)] [&amp;_pre>code>span.line-diff]:min-w-[calc(100%+3rem)] rounded-2xl bg-white overflow-x-auto scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-black/15 hover:scrollbar-thumb-black/20 active:scrollbar-thumb-black/20 dark:scrollbar-thumb-white/20 dark:hover:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25" data-component-part="code-block-root" tabindex="0" style="font-variant-ligatures: none; height: auto; background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E;"><div class="font-mono whitespace-pre leading-6"><pre class="shiki shiki-themes github-light-default dark-plus" style="background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E; color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;" language="typescript"><code language="typescript" numberoflines="15"><span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> query</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "Send the design team a reminder about reviewing the new mockups"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> stream</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;"> await</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> emailAgent</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">stream</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">({</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">  messages:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> [{ </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">role:</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "user"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">, </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">content:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> query</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> }]</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">for</span><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;"> await</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> (</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> step</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;"> of</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> stream</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">) {</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">  for</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> (</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> update</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;"> of</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> Object</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">values</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">step</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">)) {</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">    if</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> (</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">update</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> &amp;&amp;</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;"> typeof</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> update</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> ===</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "object"</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> &amp;&amp;</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "messages"</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;"> in</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> update</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">) {</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">      for</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> (</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> message</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;"> of</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> update</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">messages</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">) {</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">        console</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">log</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">message</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">toFormattedString</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">());</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">      }</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">    }</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">  }</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">}</span></span>
</code></pre></div></div></div>
<div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-950 dark:text-gray-50 codeblock-light border border-gray-950/10 dark:border-white/10 dark:twoslash-dark bg-transparent dark:bg-transparent" numberoflines="24" language="text"><div class="absolute top-3 right-4 flex items-center gap-1.5"><div class="z-10 relative"><button class="h-[26px] w-[26px] flex items-center justify-center rounded-md backdrop-blur peer group/copy-button " data-testid="copy-code-button" aria-label="Copy the contents from the code block"><svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-gray-400 group-hover/copy-button:text-gray-500 dark:text-white/40 dark:group-hover/copy-button:text-white/60"><path d="M14.25 5.25H7.25C6.14543 5.25 5.25 6.14543 5.25 7.25V14.25C5.25 15.3546 6.14543 16.25 7.25 16.25H14.25C15.3546 16.25 16.25 15.3546 16.25 14.25V7.25C16.25 6.14543 15.3546 5.25 14.25 5.25Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M2.80103 11.998L1.77203 5.07397C1.61003 3.98097 2.36403 2.96397 3.45603 2.80197L10.38 1.77297C11.313 1.63397 12.19 2.16297 12.528 3.00097" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button><div aria-hidden="true" class="absolute top-11 left-1/2 transform whitespace-nowrap -translate-x-1/2 -translate-y-1/2 peer-hover:opacity-100 opacity-0 text-white rounded-lg px-1.5 py-0.5 text-xs bg-primary-dark">Copy</div></div></div><div class="w-0 min-w-full max-w-full py-3.5 px-4 h-full dark:bg-codeblock relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out code-block-background [&amp;_*]:ring-0 [&amp;_*]:outline-0 [&amp;_*]:focus:ring-0 [&amp;_*]:focus:outline-0 [&amp;_pre>code]:pr-[3rem] [&amp;_pre>code>span.line-highlight]:min-w-[calc(100%+3rem)] [&amp;_pre>code>span.line-diff]:min-w-[calc(100%+3rem)] rounded-2xl bg-white overflow-x-auto scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-black/15 hover:scrollbar-thumb-black/20 active:scrollbar-thumb-black/20 dark:scrollbar-thumb-white/20 dark:hover:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25" data-component-part="code-block-root" tabindex="0" style="font-variant-ligatures: none; height: auto; background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E;"><div class="font-mono whitespace-pre leading-6"><pre class="shiki shiki-themes github-light-default dark-plus" style="background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E; color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;" language="text"><code language="text" numberoflines="24"><span class="line"><span>================================== Ai Message ==================================</span></span>
<span class="line"><span>Tool Calls:</span></span>
<span class="line"><span>  send_email (call_OMl51FziTVY6CRZvzYfjYOZr)</span></span>
<span class="line"><span> Call ID: call_OMl51FziTVY6CRZvzYfjYOZr</span></span>
<span class="line"><span>  Args:</span></span>
<span class="line"><span>    to: ['design-team@example.com']</span></span>
<span class="line"><span>    subject: Reminder: Please Review the New Mockups</span></span>
<span class="line"><span>    body: Hi Design Team,</span></span>
<span class="line"><span></span></span>
<span class="line"><span>This is a friendly reminder to review the new mockups at your earliest convenience. Your feedback is important to ensure that we stay on track with our project timeline.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Please let me know if you have any questions or need additional information.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Thank you!</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Best regards,</span></span>
<span class="line"><span>================================= Tool Message =================================</span></span>
<span class="line"><span>Name: send_email</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Email sent to design-team@example.com - Subject: Reminder: Please Review the New Mockups</span></span>
<span class="line"><span>================================== Ai Message ==================================</span></span>
<span class="line"><span></span></span>
<span class="line"><span>I've sent a reminder to the design team asking them to review the new mockups. If you need any further communication on this topic, just let me know!</span></span>
<span class="line"><span></span></span></code></pre></div></div></div>
<span data-as="p">The agent infers the recipient from the informal request, crafts a professional subject line and body, calls <code>send_email</code>, and returns a confirmation. Each sub-agent has a narrow focus with domain-specific tools and prompts, allowing it to excel at its specific task.</span>
<h2 class="flex whitespace-pre-wrap group font-semibold" id="3-wrap-sub-agents-as-tools"><div class="absolute" tabindex="-1"><a href="#3-wrap-sub-agents-as-tools" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100 focus:opacity-100 focus:outline-0 group/link" aria-label="Navigate to header">â€‹<div class="w-6 h-6 rounded-md flex items-center justify-center shadow-sm text-gray-400 dark:text-white/50 dark:bg-background-dark dark:brightness-[1.35] dark:ring-1 dark:hover:brightness-150 bg-white ring-1 ring-gray-400/30 dark:ring-gray-700/25 hover:ring-gray-400/60 dark:hover:ring-white/20 group-focus/link:border-2 group-focus/link:border-primary dark:group-focus/link:border-primary-light"><svg xmlns="http://www.w3.org/2000/svg" fill="gray" height="12px" viewBox="0 0 576 512"><path d="M0 256C0 167.6 71.6 96 160 96h72c13.3 0 24 10.7 24 24s-10.7 24-24 24H160C98.1 144 48 194.1 48 256s50.1 112 112 112h72c13.3 0 24 10.7 24 24s-10.7 24-24 24H160C71.6 416 0 344.4 0 256zm576 0c0 88.4-71.6 160-160 160H344c-13.3 0-24-10.7-24-24s10.7-24 24-24h72c61.9 0 112-50.1 112-112s-50.1-112-112-112H344c-13.3 0-24-10.7-24-24s10.7-24 24-24h72c88.4 0 160 71.6 160 160zM184 232H392c13.3 0 24 10.7 24 24s-10.7 24-24 24H184c-13.3 0-24-10.7-24-24s10.7-24 24-24z"></path></svg></div></a></div><span class="cursor-pointer">3. Wrap sub-agents as tools</span></h2>
<span data-as="p">Now wrap each sub-agent as a tool that the supervisor can invoke. This is the key architectural step that creates the layered system. The supervisor will see high-level tools like â€œschedule_eventâ€, not low-level tools like â€œcreate_calendar_eventâ€.</span>
<div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-950 dark:text-gray-50 codeblock-light border border-gray-950/10 dark:border-white/10 dark:twoslash-dark bg-transparent dark:bg-transparent" numberoflines="47" language="typescript"><div class="absolute top-3 right-4 flex items-center gap-1.5"><div class="z-10 relative"><button class="h-[26px] w-[26px] flex items-center justify-center rounded-md backdrop-blur peer group/copy-button " data-testid="copy-code-button" aria-label="Copy the contents from the code block"><svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-gray-400 group-hover/copy-button:text-gray-500 dark:text-white/40 dark:group-hover/copy-button:text-white/60"><path d="M14.25 5.25H7.25C6.14543 5.25 5.25 6.14543 5.25 7.25V14.25C5.25 15.3546 6.14543 16.25 7.25 16.25H14.25C15.3546 16.25 16.25 15.3546 16.25 14.25V7.25C16.25 6.14543 15.3546 5.25 14.25 5.25Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M2.80103 11.998L1.77203 5.07397C1.61003 3.98097 2.36403 2.96397 3.45603 2.80197L10.38 1.77297C11.313 1.63397 12.19 2.16297 12.528 3.00097" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button><div aria-hidden="true" class="absolute top-11 left-1/2 transform whitespace-nowrap -translate-x-1/2 -translate-y-1/2 peer-hover:opacity-100 opacity-0 text-white rounded-lg px-1.5 py-0.5 text-xs bg-primary-dark">Copy</div></div></div><div class="w-0 min-w-full max-w-full py-3.5 px-4 h-full dark:bg-codeblock relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out code-block-background [&amp;_*]:ring-0 [&amp;_*]:outline-0 [&amp;_*]:focus:ring-0 [&amp;_*]:focus:outline-0 [&amp;_pre>code]:pr-[3rem] [&amp;_pre>code>span.line-highlight]:min-w-[calc(100%+3rem)] [&amp;_pre>code>span.line-diff]:min-w-[calc(100%+3rem)] rounded-2xl bg-white overflow-x-auto scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-black/15 hover:scrollbar-thumb-black/20 active:scrollbar-thumb-black/20 dark:scrollbar-thumb-white/20 dark:hover:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25" data-component-part="code-block-root" tabindex="0" style="font-variant-ligatures: none; height: auto; background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E;"><div class="font-mono whitespace-pre leading-6"><pre class="shiki shiki-themes github-light-default dark-plus" style="background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E; color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;" language="typescript"><code language="typescript" numberoflines="47"><span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> scheduleEvent</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;"> tool</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">  async</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> ({ </span><span style="color: rgb(149, 56, 0); --shiki-dark: #9CDCFE;">request</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> }) </span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">=&gt;</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> {</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">    const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> result</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;"> await</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> calendarAgent</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">invoke</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">({</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">      messages:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> [{ </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">role:</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "user"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">, </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">content:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> request</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> }]</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">    });</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">    const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> lastMessage</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> result</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">messages</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">[</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">result</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">messages</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(5, 80, 174); --shiki-dark: #9CDCFE;">length</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> -</span><span style="color: rgb(5, 80, 174); --shiki-dark: #B5CEA8;"> 1</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">];</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">    return</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> lastMessage</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">text</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">;</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">  },</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">  {</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">    name:</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "schedule_event"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">,</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">    description:</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> `</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">Schedule calendar events using natural language.</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">Use this when the user wants to create, modify, or check calendar appointments.</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">Handles date/time parsing, availability checking, and event creation.</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">Input: Natural language scheduling request (e.g., 'meeting with design team next Tuesday at 2pm')</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">    `</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">trim</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(),</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">    schema:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">object</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">({</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">      request:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">string</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">().</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">describe</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">"Natural language scheduling request"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">),</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">    }),</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">  }</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> manageEmail</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;"> tool</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">  async</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> ({ </span><span style="color: rgb(149, 56, 0); --shiki-dark: #9CDCFE;">request</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> }) </span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">=&gt;</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> {</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">    const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> result</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;"> await</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> emailAgent</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">invoke</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">({</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">      messages:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> [{ </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">role:</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "user"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">, </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">content:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> request</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> }]</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">    });</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">    const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> lastMessage</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> result</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">messages</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">[</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">result</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">messages</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(5, 80, 174); --shiki-dark: #9CDCFE;">length</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> -</span><span style="color: rgb(5, 80, 174); --shiki-dark: #B5CEA8;"> 1</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">];</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">    return</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> lastMessage</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">text</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">;</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">  },</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">  {</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">    name:</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "manage_email"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">,</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">    description:</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> `</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">Send emails using natural language.</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">Use this when the user wants to send notifications, reminders, or any email communication.</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">Handles recipient extraction, subject generation, and email composition.</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">Input: Natural language email request (e.g., 'send them a reminder about the meeting')</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">    `</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">trim</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(),</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">    schema:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">object</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">({</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">      request:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">string</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">().</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">describe</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">"Natural language email request"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">),</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">    }),</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">  }</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">);</span></span>
</code></pre></div></div></div>
<span data-as="p">The tool descriptions help the supervisor decide when to use each tool, so make them clear and specific. We return only the sub-agentâ€™s final response, as the supervisor doesnâ€™t need to see intermediate reasoning or tool calls.</span>
<h2 class="flex whitespace-pre-wrap group font-semibold" id="4-create-the-supervisor-agent"><div class="absolute" tabindex="-1"><a href="#4-create-the-supervisor-agent" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100 focus:opacity-100 focus:outline-0 group/link" aria-label="Navigate to header">â€‹<div class="w-6 h-6 rounded-md flex items-center justify-center shadow-sm text-gray-400 dark:text-white/50 dark:bg-background-dark dark:brightness-[1.35] dark:ring-1 dark:hover:brightness-150 bg-white ring-1 ring-gray-400/30 dark:ring-gray-700/25 hover:ring-gray-400/60 dark:hover:ring-white/20 group-focus/link:border-2 group-focus/link:border-primary dark:group-focus/link:border-primary-light"><svg xmlns="http://www.w3.org/2000/svg" fill="gray" height="12px" viewBox="0 0 576 512"><path d="M0 256C0 167.6 71.6 96 160 96h72c13.3 0 24 10.7 24 24s-10.7 24-24 24H160C98.1 144 48 194.1 48 256s50.1 112 112 112h72c13.3 0 24 10.7 24 24s-10.7 24-24 24H160C71.6 416 0 344.4 0 256zm576 0c0 88.4-71.6 160-160 160H344c-13.3 0-24-10.7-24-24s10.7-24 24-24h72c61.9 0 112-50.1 112-112s-50.1-112-112-112H344c-13.3 0-24-10.7-24-24s10.7-24 24-24h72c88.4 0 160 71.6 160 160zM184 232H392c13.3 0 24 10.7 24 24s-10.7 24-24 24H184c-13.3 0-24-10.7-24-24s10.7-24 24-24z"></path></svg></div></a></div><span class="cursor-pointer">4. Create the supervisor agent</span></h2>
<span data-as="p">Now create the supervisor that orchestrates the sub-agents. The supervisor only sees high-level tools and makes routing decisions at the domain level, not the individual API level.</span>
<div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-950 dark:text-gray-50 codeblock-light border border-gray-950/10 dark:border-white/10 dark:twoslash-dark bg-transparent dark:bg-transparent" numberoflines="12" language="typescript"><div class="absolute top-3 right-4 flex items-center gap-1.5"><div class="z-10 relative"><button class="h-[26px] w-[26px] flex items-center justify-center rounded-md backdrop-blur peer group/copy-button " data-testid="copy-code-button" aria-label="Copy the contents from the code block"><svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-gray-400 group-hover/copy-button:text-gray-500 dark:text-white/40 dark:group-hover/copy-button:text-white/60"><path d="M14.25 5.25H7.25C6.14543 5.25 5.25 6.14543 5.25 7.25V14.25C5.25 15.3546 6.14543 16.25 7.25 16.25H14.25C15.3546 16.25 16.25 15.3546 16.25 14.25V7.25C16.25 6.14543 15.3546 5.25 14.25 5.25Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M2.80103 11.998L1.77203 5.07397C1.61003 3.98097 2.36403 2.96397 3.45603 2.80197L10.38 1.77297C11.313 1.63397 12.19 2.16297 12.528 3.00097" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button><div aria-hidden="true" class="absolute top-11 left-1/2 transform whitespace-nowrap -translate-x-1/2 -translate-y-1/2 peer-hover:opacity-100 opacity-0 text-white rounded-lg px-1.5 py-0.5 text-xs bg-primary-dark">Copy</div></div></div><div class="w-0 min-w-full max-w-full py-3.5 px-4 h-full dark:bg-codeblock relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out code-block-background [&amp;_*]:ring-0 [&amp;_*]:outline-0 [&amp;_*]:focus:ring-0 [&amp;_*]:focus:outline-0 [&amp;_pre>code]:pr-[3rem] [&amp;_pre>code>span.line-highlight]:min-w-[calc(100%+3rem)] [&amp;_pre>code>span.line-diff]:min-w-[calc(100%+3rem)] rounded-2xl bg-white overflow-x-auto scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-black/15 hover:scrollbar-thumb-black/20 active:scrollbar-thumb-black/20 dark:scrollbar-thumb-white/20 dark:hover:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25" data-component-part="code-block-root" tabindex="0" style="font-variant-ligatures: none; height: auto; background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E;"><div class="font-mono whitespace-pre leading-6"><pre class="shiki shiki-themes github-light-default dark-plus" style="background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E; color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;" language="typescript"><code language="typescript" numberoflines="12"><span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> SUPERVISOR_PROMPT</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> `</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">You are a helpful personal assistant.</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">You can schedule calendar events and send emails.</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">Break down user requests into appropriate tool calls and coordinate the results.</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">When a request involves multiple actions, use multiple tools in sequence.</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">`</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">trim</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> supervisorAgent</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;"> createAgent</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">({</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">  model:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> llm</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">,</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">  tools:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> [</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">scheduleEvent</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">, </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">manageEmail</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">],</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">  systemPrompt:</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> SUPERVISOR_PROMPT</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">,</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">});</span></span>
</code></pre></div></div></div>
<h2 class="flex whitespace-pre-wrap group font-semibold" id="5-use-the-supervisor"><div class="absolute" tabindex="-1"><a href="#5-use-the-supervisor" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100 focus:opacity-100 focus:outline-0 group/link" aria-label="Navigate to header">â€‹<div class="w-6 h-6 rounded-md flex items-center justify-center shadow-sm text-gray-400 dark:text-white/50 dark:bg-background-dark dark:brightness-[1.35] dark:ring-1 dark:hover:brightness-150 bg-white ring-1 ring-gray-400/30 dark:ring-gray-700/25 hover:ring-gray-400/60 dark:hover:ring-white/20 group-focus/link:border-2 group-focus/link:border-primary dark:group-focus/link:border-primary-light"><svg xmlns="http://www.w3.org/2000/svg" fill="gray" height="12px" viewBox="0 0 576 512"><path d="M0 256C0 167.6 71.6 96 160 96h72c13.3 0 24 10.7 24 24s-10.7 24-24 24H160C98.1 144 48 194.1 48 256s50.1 112 112 112h72c13.3 0 24 10.7 24 24s-10.7 24-24 24H160C71.6 416 0 344.4 0 256zm576 0c0 88.4-71.6 160-160 160H344c-13.3 0-24-10.7-24-24s10.7-24 24-24h72c61.9 0 112-50.1 112-112s-50.1-112-112-112H344c-13.3 0-24-10.7-24-24s10.7-24 24-24h72c88.4 0 160 71.6 160 160zM184 232H392c13.3 0 24 10.7 24 24s-10.7 24-24 24H184c-13.3 0-24-10.7-24-24s10.7-24 24-24z"></path></svg></div></a></div><span class="cursor-pointer">5. Use the supervisor</span></h2>
<span data-as="p">Now test your complete system with complex requests that require coordination across multiple domains:</span>
<h3 class="flex whitespace-pre-wrap group font-semibold" id="example-1:-simple-single-domain-request"><div class="absolute" tabindex="-1"><a href="#example-1:-simple-single-domain-request" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100 focus:opacity-100 focus:outline-0 group/link" aria-label="Navigate to header">â€‹<div class="w-6 h-6 rounded-md flex items-center justify-center shadow-sm text-gray-400 dark:text-white/50 dark:bg-background-dark dark:brightness-[1.35] dark:ring-1 dark:hover:brightness-150 bg-white ring-1 ring-gray-400/30 dark:ring-gray-700/25 hover:ring-gray-400/60 dark:hover:ring-white/20 group-focus/link:border-2 group-focus/link:border-primary dark:group-focus/link:border-primary-light"><svg xmlns="http://www.w3.org/2000/svg" fill="gray" height="12px" viewBox="0 0 576 512"><path d="M0 256C0 167.6 71.6 96 160 96h72c13.3 0 24 10.7 24 24s-10.7 24-24 24H160C98.1 144 48 194.1 48 256s50.1 112 112 112h72c13.3 0 24 10.7 24 24s-10.7 24-24 24H160C71.6 416 0 344.4 0 256zm576 0c0 88.4-71.6 160-160 160H344c-13.3 0-24-10.7-24-24s10.7-24 24-24h72c61.9 0 112-50.1 112-112s-50.1-112-112-112H344c-13.3 0-24-10.7-24-24s10.7-24 24-24h72c88.4 0 160 71.6 160 160zM184 232H392c13.3 0 24 10.7 24 24s-10.7 24-24 24H184c-13.3 0-24-10.7-24-24s10.7-24 24-24z"></path></svg></div></a></div><span class="cursor-pointer">Example 1: Simple single-domain request</span></h3>
<div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-950 dark:text-gray-50 codeblock-light border border-gray-950/10 dark:border-white/10 dark:twoslash-dark bg-transparent dark:bg-transparent" numberoflines="15" language="typescript"><div class="absolute top-3 right-4 flex items-center gap-1.5"><div class="z-10 relative"><button class="h-[26px] w-[26px] flex items-center justify-center rounded-md backdrop-blur peer group/copy-button " data-testid="copy-code-button" aria-label="Copy the contents from the code block"><svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-gray-400 group-hover/copy-button:text-gray-500 dark:text-white/40 dark:group-hover/copy-button:text-white/60"><path d="M14.25 5.25H7.25C6.14543 5.25 5.25 6.14543 5.25 7.25V14.25C5.25 15.3546 6.14543 16.25 7.25 16.25H14.25C15.3546 16.25 16.25 15.3546 16.25 14.25V7.25C16.25 6.14543 15.3546 5.25 14.25 5.25Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M2.80103 11.998L1.77203 5.07397C1.61003 3.98097 2.36403 2.96397 3.45603 2.80197L10.38 1.77297C11.313 1.63397 12.19 2.16297 12.528 3.00097" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button><div aria-hidden="true" class="absolute top-11 left-1/2 transform whitespace-nowrap -translate-x-1/2 -translate-y-1/2 peer-hover:opacity-100 opacity-0 text-white rounded-lg px-1.5 py-0.5 text-xs bg-primary-dark">Copy</div></div></div><div class="w-0 min-w-full max-w-full py-3.5 px-4 h-full dark:bg-codeblock relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out code-block-background [&amp;_*]:ring-0 [&amp;_*]:outline-0 [&amp;_*]:focus:ring-0 [&amp;_*]:focus:outline-0 [&amp;_pre>code]:pr-[3rem] [&amp;_pre>code>span.line-highlight]:min-w-[calc(100%+3rem)] [&amp;_pre>code>span.line-diff]:min-w-[calc(100%+3rem)] rounded-2xl bg-white overflow-x-auto scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-black/15 hover:scrollbar-thumb-black/20 active:scrollbar-thumb-black/20 dark:scrollbar-thumb-white/20 dark:hover:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25" data-component-part="code-block-root" tabindex="0" style="font-variant-ligatures: none; height: auto; background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E;"><div class="font-mono whitespace-pre leading-6"><pre class="shiki shiki-themes github-light-default dark-plus" style="background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E; color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;" language="typescript"><code language="typescript" numberoflines="15"><span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> query</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "Schedule a team standup for tomorrow at 9am"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> stream</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;"> await</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> supervisorAgent</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">stream</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">({</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">  messages:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> [{ </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">role:</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "user"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">, </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">content:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> query</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> }]</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">for</span><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;"> await</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> (</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> step</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;"> of</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> stream</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">) {</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">  for</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> (</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> update</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;"> of</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> Object</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">values</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">step</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">)) {</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">    if</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> (</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">update</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> &amp;&amp;</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;"> typeof</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> update</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> ===</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "object"</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> &amp;&amp;</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "messages"</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;"> in</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> update</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">) {</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">      for</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> (</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> message</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;"> of</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> update</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">messages</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">) {</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">        console</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">log</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">message</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">toFormattedString</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">());</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">      }</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">    }</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">  }</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">}</span></span>
</code></pre></div></div></div>
<div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-950 dark:text-gray-50 codeblock-light border border-gray-950/10 dark:border-white/10 dark:twoslash-dark bg-transparent dark:bg-transparent" numberoflines="14" language="text"><div class="absolute top-3 right-4 flex items-center gap-1.5"><div class="z-10 relative"><button class="h-[26px] w-[26px] flex items-center justify-center rounded-md backdrop-blur peer group/copy-button " data-testid="copy-code-button" aria-label="Copy the contents from the code block"><svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-gray-400 group-hover/copy-button:text-gray-500 dark:text-white/40 dark:group-hover/copy-button:text-white/60"><path d="M14.25 5.25H7.25C6.14543 5.25 5.25 6.14543 5.25 7.25V14.25C5.25 15.3546 6.14543 16.25 7.25 16.25H14.25C15.3546 16.25 16.25 15.3546 16.25 14.25V7.25C16.25 6.14543 15.3546 5.25 14.25 5.25Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M2.80103 11.998L1.77203 5.07397C1.61003 3.98097 2.36403 2.96397 3.45603 2.80197L10.38 1.77297C11.313 1.63397 12.19 2.16297 12.528 3.00097" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button><div aria-hidden="true" class="absolute top-11 left-1/2 transform whitespace-nowrap -translate-x-1/2 -translate-y-1/2 peer-hover:opacity-100 opacity-0 text-white rounded-lg px-1.5 py-0.5 text-xs bg-primary-dark">Copy</div></div></div><div class="w-0 min-w-full max-w-full py-3.5 px-4 h-full dark:bg-codeblock relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out code-block-background [&amp;_*]:ring-0 [&amp;_*]:outline-0 [&amp;_*]:focus:ring-0 [&amp;_*]:focus:outline-0 [&amp;_pre>code]:pr-[3rem] [&amp;_pre>code>span.line-highlight]:min-w-[calc(100%+3rem)] [&amp;_pre>code>span.line-diff]:min-w-[calc(100%+3rem)] rounded-2xl bg-white overflow-x-auto scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-black/15 hover:scrollbar-thumb-black/20 active:scrollbar-thumb-black/20 dark:scrollbar-thumb-white/20 dark:hover:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25" data-component-part="code-block-root" tabindex="0" style="font-variant-ligatures: none; height: auto; background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E;"><div class="font-mono whitespace-pre leading-6"><pre class="shiki shiki-themes github-light-default dark-plus" style="background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E; color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;" language="text"><code language="text" numberoflines="14"><span class="line"><span>================================== Ai Message ==================================</span></span>
<span class="line"><span>Tool Calls:</span></span>
<span class="line"><span>  schedule_event (call_mXFJJDU8bKZadNUZPaag8Lct)</span></span>
<span class="line"><span> Call ID: call_mXFJJDU8bKZadNUZPaag8Lct</span></span>
<span class="line"><span>  Args:</span></span>
<span class="line"><span>    request: Schedule a team standup for tomorrow at 9am with Alice and Bob.</span></span>
<span class="line"><span>================================= Tool Message =================================</span></span>
<span class="line"><span>Name: schedule_event</span></span>
<span class="line"><span></span></span>
<span class="line"><span>The team standup has been scheduled for tomorrow at 9:00 AM with Alice and Bob. If you need to make any changes or add more details, just let me know!</span></span>
<span class="line"><span>================================== Ai Message ==================================</span></span>
<span class="line"><span></span></span>
<span class="line"><span>The team standup with Alice and Bob is scheduled for tomorrow at 9:00 AM. If you need any further arrangements or adjustments, please let me know!</span></span>
<span class="line"><span></span></span></code></pre></div></div></div>
<span data-as="p">The supervisor identifies this as a calendar task, calls <code>schedule_event</code>, and the calendar agent handles date parsing and event creation.</span>
<div class="callout my-4 px-5 py-4 overflow-hidden rounded-2xl flex gap-3 border border-emerald-500/20 bg-emerald-50/50 dark:border-emerald-500/30 dark:bg-emerald-500/10 [&amp;_[data-component-part='callout-icon']]:mt-px" data-callout-type="tip"><div class="mt-0.5 w-4" data-component-part="callout-icon"><svg width="11" height="14" viewBox="0 0 11 14" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="text-emerald-600 dark:text-emerald-400/80 w-3.5 h-auto" aria-label="Tip"><path d="M3.12794 12.4232C3.12794 12.5954 3.1776 12.7634 3.27244 12.907L3.74114 13.6095C3.88471 13.8248 4.21067 14 4.46964 14H6.15606C6.41415 14 6.74017 13.825 6.88373 13.6095L7.3508 12.9073C7.43114 12.7859 7.49705 12.569 7.49705 12.4232L7.50055 11.3513H3.12521L3.12794 12.4232ZM5.31288 0C2.52414 0.00875889 0.5 2.26889 0.5 4.78826C0.5 6.00188 0.949566 7.10829 1.69119 7.95492C2.14321 8.47011 2.84901 9.54727 3.11919 10.4557C3.12005 10.4625 3.12175 10.4698 3.12261 10.4771H7.50342C7.50427 10.4698 7.50598 10.463 7.50684 10.4557C7.77688 9.54727 8.48281 8.47011 8.93484 7.95492C9.67728 7.13181 10.1258 6.02703 10.1258 4.78826C10.1258 2.15486 7.9709 0.000106649 5.31288 0ZM7.94902 7.11267C7.52078 7.60079 6.99082 8.37878 6.6077 9.18794H4.02051C3.63739 8.37878 3.10743 7.60079 2.67947 7.11294C2.11997 6.47551 1.8126 5.63599 1.8126 4.78826C1.8126 3.09829 3.12794 1.31944 5.28827 1.3126C7.2435 1.3126 8.81315 2.88226 8.81315 4.78826C8.81315 5.63599 8.50688 6.47551 7.94902 7.11267ZM4.87534 2.18767C3.66939 2.18767 2.68767 3.16939 2.68767 4.37534C2.68767 4.61719 2.88336 4.81288 3.12521 4.81288C3.36705 4.81288 3.56274 4.61599 3.56274 4.37534C3.56274 3.6515 4.1515 3.06274 4.87534 3.06274C5.11719 3.06274 5.31288 2.86727 5.31288 2.62548C5.31288 2.38369 5.11599 2.18767 4.87534 2.18767Z"></path></svg></div><div class="text-sm prose dark:prose-invert min-w-0 w-full [&amp;_kbd]:bg-background-light dark:[&amp;_kbd]:bg-background-dark [&amp;_code]:!text-current [&amp;_kbd]:!text-current [&amp;_a]:!text-current [&amp;_a]:border-current text-emerald-900 dark:text-emerald-200" data-component-part="callout-content"><span data-as="p">For full transparency into the information flow, including prompts and responses for each chat model call, check out the <a href="https://smith.langchain.com/public/91a9a95f-fba9-4e84-aff0-371861ad2f4a/r" target="_blank" rel="noreferrer" class="link">LangSmith trace</a> for the above run.</span></div></div>
<h3 class="flex whitespace-pre-wrap group font-semibold" id="example-2:-complex-multi-domain-request"><div class="absolute" tabindex="-1"><a href="#example-2:-complex-multi-domain-request" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100 focus:opacity-100 focus:outline-0 group/link" aria-label="Navigate to header">â€‹<div class="w-6 h-6 rounded-md flex items-center justify-center shadow-sm text-gray-400 dark:text-white/50 dark:bg-background-dark dark:brightness-[1.35] dark:ring-1 dark:hover:brightness-150 bg-white ring-1 ring-gray-400/30 dark:ring-gray-700/25 hover:ring-gray-400/60 dark:hover:ring-white/20 group-focus/link:border-2 group-focus/link:border-primary dark:group-focus/link:border-primary-light"><svg xmlns="http://www.w3.org/2000/svg" fill="gray" height="12px" viewBox="0 0 576 512"><path d="M0 256C0 167.6 71.6 96 160 96h72c13.3 0 24 10.7 24 24s-10.7 24-24 24H160C98.1 144 48 194.1 48 256s50.1 112 112 112h72c13.3 0 24 10.7 24 24s-10.7 24-24 24H160C71.6 416 0 344.4 0 256zm576 0c0 88.4-71.6 160-160 160H344c-13.3 0-24-10.7-24-24s10.7-24 24-24h72c61.9 0 112-50.1 112-112s-50.1-112-112-112H344c-13.3 0-24-10.7-24-24s10.7-24 24-24h72c88.4 0 160 71.6 160 160zM184 232H392c13.3 0 24 10.7 24 24s-10.7 24-24 24H184c-13.3 0-24-10.7-24-24s10.7-24 24-24z"></path></svg></div></a></div><span class="cursor-pointer">Example 2: Complex multi-domain request</span></h3>
<div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-950 dark:text-gray-50 codeblock-light border border-gray-950/10 dark:border-white/10 dark:twoslash-dark bg-transparent dark:bg-transparent" numberoflines="17" language="typescript"><div class="absolute top-3 right-4 flex items-center gap-1.5"><div class="z-10 relative"><button class="h-[26px] w-[26px] flex items-center justify-center rounded-md backdrop-blur peer group/copy-button " data-testid="copy-code-button" aria-label="Copy the contents from the code block"><svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-gray-400 group-hover/copy-button:text-gray-500 dark:text-white/40 dark:group-hover/copy-button:text-white/60"><path d="M14.25 5.25H7.25C6.14543 5.25 5.25 6.14543 5.25 7.25V14.25C5.25 15.3546 6.14543 16.25 7.25 16.25H14.25C15.3546 16.25 16.25 15.3546 16.25 14.25V7.25C16.25 6.14543 15.3546 5.25 14.25 5.25Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M2.80103 11.998L1.77203 5.07397C1.61003 3.98097 2.36403 2.96397 3.45603 2.80197L10.38 1.77297C11.313 1.63397 12.19 2.16297 12.528 3.00097" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button><div aria-hidden="true" class="absolute top-11 left-1/2 transform whitespace-nowrap -translate-x-1/2 -translate-y-1/2 peer-hover:opacity-100 opacity-0 text-white rounded-lg px-1.5 py-0.5 text-xs bg-primary-dark">Copy</div></div></div><div class="w-0 min-w-full max-w-full py-3.5 px-4 h-full dark:bg-codeblock relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out code-block-background [&amp;_*]:ring-0 [&amp;_*]:outline-0 [&amp;_*]:focus:ring-0 [&amp;_*]:focus:outline-0 [&amp;_pre>code]:pr-[3rem] [&amp;_pre>code>span.line-highlight]:min-w-[calc(100%+3rem)] [&amp;_pre>code>span.line-diff]:min-w-[calc(100%+3rem)] rounded-2xl bg-white overflow-x-auto scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-black/15 hover:scrollbar-thumb-black/20 active:scrollbar-thumb-black/20 dark:scrollbar-thumb-white/20 dark:hover:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25" data-component-part="code-block-root" tabindex="0" style="font-variant-ligatures: none; height: auto; background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E;"><div class="font-mono whitespace-pre leading-6"><pre class="shiki shiki-themes github-light-default dark-plus" style="background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E; color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;" language="typescript"><code language="typescript" numberoflines="17"><span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> query</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">  "Schedule a meeting with the design team next Tuesday at 2pm for 1 hour, "</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> +</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">  "and send them an email reminder about reviewing the new mockups."</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> stream</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;"> await</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> supervisorAgent</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">stream</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">({</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">  messages:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> [{ </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">role:</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "user"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">, </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">content:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> query</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> }]</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">for</span><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;"> await</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> (</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> step</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;"> of</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> stream</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">) {</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">  for</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> (</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> update</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;"> of</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> Object</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">values</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">step</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">)) {</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">    if</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> (</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">update</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> &amp;&amp;</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;"> typeof</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> update</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> ===</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "object"</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> &amp;&amp;</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "messages"</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;"> in</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> update</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">) {</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">      for</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> (</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> message</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;"> of</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> update</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">messages</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">) {</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">        console</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">log</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">message</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">toFormattedString</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">());</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">      }</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">    }</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">  }</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">}</span></span>
</code></pre></div></div></div>
<div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-950 dark:text-gray-50 codeblock-light border border-gray-950/10 dark:border-white/10 dark:twoslash-dark bg-transparent dark:bg-transparent" numberoflines="26" language="text"><div class="absolute top-3 right-4 flex items-center gap-1.5"><div class="z-10 relative"><button class="h-[26px] w-[26px] flex items-center justify-center rounded-md backdrop-blur peer group/copy-button " data-testid="copy-code-button" aria-label="Copy the contents from the code block"><svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-gray-400 group-hover/copy-button:text-gray-500 dark:text-white/40 dark:group-hover/copy-button:text-white/60"><path d="M14.25 5.25H7.25C6.14543 5.25 5.25 6.14543 5.25 7.25V14.25C5.25 15.3546 6.14543 16.25 7.25 16.25H14.25C15.3546 16.25 16.25 15.3546 16.25 14.25V7.25C16.25 6.14543 15.3546 5.25 14.25 5.25Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M2.80103 11.998L1.77203 5.07397C1.61003 3.98097 2.36403 2.96397 3.45603 2.80197L10.38 1.77297C11.313 1.63397 12.19 2.16297 12.528 3.00097" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button><div aria-hidden="true" class="absolute top-11 left-1/2 transform whitespace-nowrap -translate-x-1/2 -translate-y-1/2 peer-hover:opacity-100 opacity-0 text-white rounded-lg px-1.5 py-0.5 text-xs bg-primary-dark">Copy</div></div></div><div class="w-0 min-w-full max-w-full py-3.5 px-4 h-full dark:bg-codeblock relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out code-block-background [&amp;_*]:ring-0 [&amp;_*]:outline-0 [&amp;_*]:focus:ring-0 [&amp;_*]:focus:outline-0 [&amp;_pre>code]:pr-[3rem] [&amp;_pre>code>span.line-highlight]:min-w-[calc(100%+3rem)] [&amp;_pre>code>span.line-diff]:min-w-[calc(100%+3rem)] rounded-2xl bg-white overflow-x-auto scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-black/15 hover:scrollbar-thumb-black/20 active:scrollbar-thumb-black/20 dark:scrollbar-thumb-white/20 dark:hover:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25" data-component-part="code-block-root" tabindex="0" style="font-variant-ligatures: none; height: auto; background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E;"><div class="font-mono whitespace-pre leading-6"><pre class="shiki shiki-themes github-light-default dark-plus" style="background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E; color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;" language="text"><code language="text" numberoflines="26"><span class="line"><span>================================== Ai Message ==================================</span></span>
<span class="line"><span>Tool Calls:</span></span>
<span class="line"><span>  schedule_event (call_YA68mqF0koZItCFPx0kGQfZi)</span></span>
<span class="line"><span> Call ID: call_YA68mqF0koZItCFPx0kGQfZi</span></span>
<span class="line"><span>  Args:</span></span>
<span class="line"><span>    request: meeting with the design team next Tuesday at 2pm for 1 hour</span></span>
<span class="line"><span>  manage_email (call_XxqcJBvVIuKuRK794ZIzlLxx)</span></span>
<span class="line"><span> Call ID: call_XxqcJBvVIuKuRK794ZIzlLxx</span></span>
<span class="line"><span>  Args:</span></span>
<span class="line"><span>    request: send the design team an email reminder about reviewing the new mockups</span></span>
<span class="line"><span>================================= Tool Message =================================</span></span>
<span class="line"><span>Name: schedule_event</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Your meeting with the design team is scheduled for next Tuesday, June 18th, from 2:00pm to 3:00pm. Let me know if you need to add more details or make any changes!</span></span>
<span class="line"><span>================================= Tool Message =================================</span></span>
<span class="line"><span>Name: manage_email</span></span>
<span class="line"><span></span></span>
<span class="line"><span>I've sent an email reminder to the design team requesting them to review the new mockups. If you need to include more information or recipients, just let me know!</span></span>
<span class="line"><span>================================== Ai Message ==================================</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Your meeting with the design team is scheduled for next Tuesday, June 18th, from 2:00pm to 3:00pm.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>I've also sent an email reminder to the design team, asking them to review the new mockups.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Let me know if you'd like to add more details to the meeting or include additional information in the email!</span></span>
<span class="line"><span></span></span></code></pre></div></div></div>
<span data-as="p">The supervisor recognizes this requires both calendar and email actions, calls <code>schedule_event</code> for the meeting, then calls <code>manage_email</code> for the reminder. Each sub-agent completes its task, and the supervisor synthesizes both results into a coherent response.</span>
<div class="callout my-4 px-5 py-4 overflow-hidden rounded-2xl flex gap-3 border border-emerald-500/20 bg-emerald-50/50 dark:border-emerald-500/30 dark:bg-emerald-500/10 [&amp;_[data-component-part='callout-icon']]:mt-px" data-callout-type="tip"><div class="mt-0.5 w-4" data-component-part="callout-icon"><svg width="11" height="14" viewBox="0 0 11 14" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="text-emerald-600 dark:text-emerald-400/80 w-3.5 h-auto" aria-label="Tip"><path d="M3.12794 12.4232C3.12794 12.5954 3.1776 12.7634 3.27244 12.907L3.74114 13.6095C3.88471 13.8248 4.21067 14 4.46964 14H6.15606C6.41415 14 6.74017 13.825 6.88373 13.6095L7.3508 12.9073C7.43114 12.7859 7.49705 12.569 7.49705 12.4232L7.50055 11.3513H3.12521L3.12794 12.4232ZM5.31288 0C2.52414 0.00875889 0.5 2.26889 0.5 4.78826C0.5 6.00188 0.949566 7.10829 1.69119 7.95492C2.14321 8.47011 2.84901 9.54727 3.11919 10.4557C3.12005 10.4625 3.12175 10.4698 3.12261 10.4771H7.50342C7.50427 10.4698 7.50598 10.463 7.50684 10.4557C7.77688 9.54727 8.48281 8.47011 8.93484 7.95492C9.67728 7.13181 10.1258 6.02703 10.1258 4.78826C10.1258 2.15486 7.9709 0.000106649 5.31288 0ZM7.94902 7.11267C7.52078 7.60079 6.99082 8.37878 6.6077 9.18794H4.02051C3.63739 8.37878 3.10743 7.60079 2.67947 7.11294C2.11997 6.47551 1.8126 5.63599 1.8126 4.78826C1.8126 3.09829 3.12794 1.31944 5.28827 1.3126C7.2435 1.3126 8.81315 2.88226 8.81315 4.78826C8.81315 5.63599 8.50688 6.47551 7.94902 7.11267ZM4.87534 2.18767C3.66939 2.18767 2.68767 3.16939 2.68767 4.37534C2.68767 4.61719 2.88336 4.81288 3.12521 4.81288C3.36705 4.81288 3.56274 4.61599 3.56274 4.37534C3.56274 3.6515 4.1515 3.06274 4.87534 3.06274C5.11719 3.06274 5.31288 2.86727 5.31288 2.62548C5.31288 2.38369 5.11599 2.18767 4.87534 2.18767Z"></path></svg></div><div class="text-sm prose dark:prose-invert min-w-0 w-full [&amp;_kbd]:bg-background-light dark:[&amp;_kbd]:bg-background-dark [&amp;_code]:!text-current [&amp;_kbd]:!text-current [&amp;_a]:!text-current [&amp;_a]:border-current text-emerald-900 dark:text-emerald-200" data-component-part="callout-content"><span data-as="p">Refer to the <a href="https://smith.langchain.com/public/95cd00a3-d1f9-4dba-9731-7bf733fb6a3c/r" target="_blank" rel="noreferrer" class="link">LangSmith trace</a> to see the detailed information flow for the above run, including individual chat model prompts and responses.</span></div></div>
<h3 class="flex whitespace-pre-wrap group font-semibold" id="complete-working-example"><div class="absolute" tabindex="-1"><a href="#complete-working-example" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100 focus:opacity-100 focus:outline-0 group/link" aria-label="Navigate to header">â€‹<div class="w-6 h-6 rounded-md flex items-center justify-center shadow-sm text-gray-400 dark:text-white/50 dark:bg-background-dark dark:brightness-[1.35] dark:ring-1 dark:hover:brightness-150 bg-white ring-1 ring-gray-400/30 dark:ring-gray-700/25 hover:ring-gray-400/60 dark:hover:ring-white/20 group-focus/link:border-2 group-focus/link:border-primary dark:group-focus/link:border-primary-light"><svg xmlns="http://www.w3.org/2000/svg" fill="gray" height="12px" viewBox="0 0 576 512"><path d="M0 256C0 167.6 71.6 96 160 96h72c13.3 0 24 10.7 24 24s-10.7 24-24 24H160C98.1 144 48 194.1 48 256s50.1 112 112 112h72c13.3 0 24 10.7 24 24s-10.7 24-24 24H160C71.6 416 0 344.4 0 256zm576 0c0 88.4-71.6 160-160 160H344c-13.3 0-24-10.7-24-24s10.7-24 24-24h72c61.9 0 112-50.1 112-112s-50.1-112-112-112H344c-13.3 0-24-10.7-24-24s10.7-24 24-24h72c88.4 0 160 71.6 160 160zM184 232H392c13.3 0 24 10.7 24 24s-10.7 24-24 24H184c-13.3 0-24-10.7-24-24s10.7-24 24-24z"></path></svg></div></a></div><span class="cursor-pointer">Complete working example</span></h3>
<span data-as="p">Hereâ€™s everything together in a runnable script:</span>
<details class="expandable mt-4 border-standard rounded-xl" data-testid="undefined-children"><summary class="not-prose text-sm flex flex-row items-center content-center w-full cursor-pointer text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-gray-200 py-3 px-3.5 hover:bg-gray-50/50 dark:hover:bg-white/5 rounded-t-xl list-none [&amp;::-webkit-details-marker]:hidden rounded-b-xl" aria-controls="Children attributes" aria-expanded="false" data-component-part="expandable-button"><svg class="h-2.5 w-2.5 bg-zinc-400 transition-transform" style="mask-image: url(&quot;https://d3gk2c5xim1je2.cloudfront.net/v7.1.0/regular/angle-right.svg&quot;); mask-repeat: no-repeat; -webkit-mask-position-x: center; -webkit-mask-position-y: center;"></svg><div class="ml-3 leading-tight text-left"><p class="m-0" contenteditable="false">Show View complete code</p></div></summary><div id="View complete codeChildren" class="expandable-content mx-3 px-2 border-t border-gray-100 dark:border-white/10" data-component-part="expandable-content"><div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-950 dark:text-gray-50 codeblock-light border border-gray-950/10 dark:border-white/10 dark:twoslash-dark bg-transparent dark:bg-transparent" numberoflines="194" language="typescript"><div class="absolute top-3 right-4 flex items-center gap-1.5"><div class="z-10 relative"><button class="h-[26px] w-[26px] flex items-center justify-center rounded-md backdrop-blur peer group/copy-button " data-testid="copy-code-button" aria-label="Copy the contents from the code block"><svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-gray-400 group-hover/copy-button:text-gray-500 dark:text-white/40 dark:group-hover/copy-button:text-white/60"><path d="M14.25 5.25H7.25C6.14543 5.25 5.25 6.14543 5.25 7.25V14.25C5.25 15.3546 6.14543 16.25 7.25 16.25H14.25C15.3546 16.25 16.25 15.3546 16.25 14.25V7.25C16.25 6.14543 15.3546 5.25 14.25 5.25Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M2.80103 11.998L1.77203 5.07397C1.61003 3.98097 2.36403 2.96397 3.45603 2.80197L10.38 1.77297C11.313 1.63397 12.19 2.16297 12.528 3.00097" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button><div aria-hidden="true" class="absolute top-11 left-1/2 transform whitespace-nowrap -translate-x-1/2 -translate-y-1/2 peer-hover:opacity-100 opacity-0 text-white rounded-lg px-1.5 py-0.5 text-xs bg-primary-dark">Copy</div></div></div><div class="w-0 min-w-full max-w-full py-3.5 px-4 h-full dark:bg-codeblock relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out code-block-background [&amp;_*]:ring-0 [&amp;_*]:outline-0 [&amp;_*]:focus:ring-0 [&amp;_*]:focus:outline-0 [&amp;_pre>code]:pr-[3rem] [&amp;_pre>code>span.line-highlight]:min-w-[calc(100%+3rem)] [&amp;_pre>code>span.line-diff]:min-w-[calc(100%+3rem)] rounded-2xl bg-white overflow-x-auto scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-black/15 hover:scrollbar-thumb-black/20 active:scrollbar-thumb-black/20 dark:scrollbar-thumb-white/20 dark:hover:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25" data-component-part="code-block-root" tabindex="0" style="font-variant-ligatures: none; height: auto; background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E;"><div class="font-mono whitespace-pre leading-6"><pre class="shiki shiki-themes github-light-default dark-plus" style="background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E; color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;" language="typescript"><code language="typescript" numberoflines="194"><span class="line"><span style="color: rgb(110, 119, 129); --shiki-dark: #6A9955;">/**</span></span>
<span class="line"><span style="color: rgb(110, 119, 129); --shiki-dark: #6A9955;"> * Personal Assistant Supervisor Example</span></span>
<span class="line"><span style="color: rgb(110, 119, 129); --shiki-dark: #6A9955;"> *</span></span>
<span class="line"><span style="color: rgb(110, 119, 129); --shiki-dark: #6A9955;"> * This example demonstrates the tool calling pattern for multi-agent systems.</span></span>
<span class="line"><span style="color: rgb(110, 119, 129); --shiki-dark: #6A9955;"> * A supervisor agent coordinates specialized sub-agents (calendar and email)</span></span>
<span class="line"><span style="color: rgb(110, 119, 129); --shiki-dark: #6A9955;"> * that are wrapped as tools.</span></span>
<span class="line"><span style="color: rgb(110, 119, 129); --shiki-dark: #6A9955;"> */</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">import</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> { </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">tool</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">, </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">createAgent</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> } </span><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">from</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "langchain"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">;</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">import</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> { </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">ChatAnthropic</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> } </span><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">from</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "@langchain/anthropic"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">;</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">import</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> { </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> } </span><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">from</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "zod"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(110, 119, 129); --shiki-dark: #6A9955;">// ============================================================================</span></span>
<span class="line"><span style="color: rgb(110, 119, 129); --shiki-dark: #6A9955;">// Step 1: Define low-level API tools (stubbed)</span></span>
<span class="line"><span style="color: rgb(110, 119, 129); --shiki-dark: #6A9955;">// ============================================================================</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> createCalendarEvent</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;"> tool</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">  async</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> ({ </span><span style="color: rgb(149, 56, 0); --shiki-dark: #9CDCFE;">title</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">, </span><span style="color: rgb(149, 56, 0); --shiki-dark: #9CDCFE;">startTime</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">, </span><span style="color: rgb(149, 56, 0); --shiki-dark: #9CDCFE;">endTime</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">, </span><span style="color: rgb(149, 56, 0); --shiki-dark: #9CDCFE;">attendees</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">, </span><span style="color: rgb(149, 56, 0); --shiki-dark: #9CDCFE;">location</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> }) </span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">=&gt;</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> {</span></span>
<span class="line"><span style="color: rgb(110, 119, 129); --shiki-dark: #6A9955;">    // Stub: In practice, this would call Google Calendar API, Outlook API, etc.</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">    return</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> `Event created: </span><span style="color: rgb(10, 48, 105); --shiki-dark: #569CD6;">${</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">title</span><span style="color: rgb(10, 48, 105); --shiki-dark: #569CD6;">}</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> from </span><span style="color: rgb(10, 48, 105); --shiki-dark: #569CD6;">${</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">startTime</span><span style="color: rgb(10, 48, 105); --shiki-dark: #569CD6;">}</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> to </span><span style="color: rgb(10, 48, 105); --shiki-dark: #569CD6;">${</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">endTime</span><span style="color: rgb(10, 48, 105); --shiki-dark: #569CD6;">}</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> with </span><span style="color: rgb(10, 48, 105); --shiki-dark: #569CD6;">${</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">attendees</span><span style="color: rgb(10, 48, 105); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(5, 80, 174); --shiki-dark: #9CDCFE;">length</span><span style="color: rgb(10, 48, 105); --shiki-dark: #569CD6;">}</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> attendees`</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">;</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">  },</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">  {</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">    name:</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "create_calendar_event"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">,</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">    description:</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "Create a calendar event. Requires exact ISO datetime format."</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">,</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">    schema:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">object</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">({</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">      title:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">string</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(),</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">      startTime:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">string</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">().</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">describe</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">"ISO format: '2024-01-15T14:00:00'"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">),</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">      endTime:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">string</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">().</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">describe</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">"ISO format: '2024-01-15T15:00:00'"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">),</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">      attendees:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">array</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">string</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">()).</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">describe</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">"email addresses"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">),</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">      location:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">string</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">().</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">optional</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">().</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">default</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">""</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">),</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">    }),</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">  }</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> sendEmail</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;"> tool</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">  async</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> ({ </span><span style="color: rgb(149, 56, 0); --shiki-dark: #9CDCFE;">to</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">, </span><span style="color: rgb(149, 56, 0); --shiki-dark: #9CDCFE;">subject</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">, </span><span style="color: rgb(149, 56, 0); --shiki-dark: #9CDCFE;">body</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">, </span><span style="color: rgb(149, 56, 0); --shiki-dark: #9CDCFE;">cc</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> }) </span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">=&gt;</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> {</span></span>
<span class="line"><span style="color: rgb(110, 119, 129); --shiki-dark: #6A9955;">    // Stub: In practice, this would call SendGrid, Gmail API, etc.</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">    return</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> `Email sent to </span><span style="color: rgb(10, 48, 105); --shiki-dark: #569CD6;">${</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">to</span><span style="color: rgb(10, 48, 105); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">join</span><span style="color: rgb(10, 48, 105); --shiki-dark: #D4D4D4;">(</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">", "</span><span style="color: rgb(10, 48, 105); --shiki-dark: #D4D4D4;">)</span><span style="color: rgb(10, 48, 105); --shiki-dark: #569CD6;">}</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> - Subject: </span><span style="color: rgb(10, 48, 105); --shiki-dark: #569CD6;">${</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">subject</span><span style="color: rgb(10, 48, 105); --shiki-dark: #569CD6;">}</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">`</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">;</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">  },</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">  {</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">    name:</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "send_email"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">,</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">    description:</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">      "Send an email via email API. Requires properly formatted addresses."</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">,</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">    schema:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">object</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">({</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">      to:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">array</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">string</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">()).</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">describe</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">"email addresses"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">),</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">      subject:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">string</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(),</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">      body:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">string</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(),</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">      cc:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">array</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">string</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">()).</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">optional</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">().</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">default</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">([]),</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">    }),</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">  }</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> getAvailableTimeSlots</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;"> tool</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">  async</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> ({ </span><span style="color: rgb(149, 56, 0); --shiki-dark: #9CDCFE;">attendees</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">, </span><span style="color: rgb(149, 56, 0); --shiki-dark: #9CDCFE;">date</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">, </span><span style="color: rgb(149, 56, 0); --shiki-dark: #9CDCFE;">durationMinutes</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> }) </span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">=&gt;</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> {</span></span>
<span class="line"><span style="color: rgb(110, 119, 129); --shiki-dark: #6A9955;">    // Stub: In practice, this would query calendar APIs</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">    return</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> [</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">"09:00"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">, </span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">"14:00"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">, </span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">"16:00"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">];</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">  },</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">  {</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">    name:</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "get_available_time_slots"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">,</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">    description:</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">      "Check calendar availability for given attendees on a specific date."</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">,</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">    schema:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">object</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">({</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">      attendees:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">array</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">string</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">()),</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">      date:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">string</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">().</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">describe</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">"ISO format: '2024-01-15'"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">),</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">      durationMinutes:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">number</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(),</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">    }),</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">  }</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(110, 119, 129); --shiki-dark: #6A9955;">// ============================================================================</span></span>
<span class="line"><span style="color: rgb(110, 119, 129); --shiki-dark: #6A9955;">// Step 2: Create specialized sub-agents</span></span>
<span class="line"><span style="color: rgb(110, 119, 129); --shiki-dark: #6A9955;">// ============================================================================</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> llm</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;"> new</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;"> ChatAnthropic</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">({</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">  model:</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "claude-haiku-4-5-20251001"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">,</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> calendarAgent</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;"> createAgent</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">({</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">  model:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> llm</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">,</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">  tools:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> [</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">createCalendarEvent</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">, </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">getAvailableTimeSlots</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">],</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">  systemPrompt:</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> `</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">You are a calendar scheduling assistant.</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">Parse natural language scheduling requests (e.g., 'next Tuesday at 2pm')</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">into proper ISO datetime formats.</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">Use get_available_time_slots to check availability when needed.</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">Use create_calendar_event to schedule events.</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">Always confirm what was scheduled in your final response.</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">  `</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">trim</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(),</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> emailAgent</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;"> createAgent</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">({</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">  model:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> llm</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">,</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">  tools:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> [</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">sendEmail</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">],</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">  systemPrompt:</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> `</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">You are an email assistant.</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">Compose professional emails based on natural language requests.</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">Extract recipient information and craft appropriate subject lines and body text.</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">Use send_email to send the message.</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">Always confirm what was sent in your final response.</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">  `</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">trim</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(),</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(110, 119, 129); --shiki-dark: #6A9955;">// ============================================================================</span></span>
<span class="line"><span style="color: rgb(110, 119, 129); --shiki-dark: #6A9955;">// Step 3: Wrap sub-agents as tools for the supervisor</span></span>
<span class="line"><span style="color: rgb(110, 119, 129); --shiki-dark: #6A9955;">// ============================================================================</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> scheduleEvent</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;"> tool</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">  async</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> ({ </span><span style="color: rgb(149, 56, 0); --shiki-dark: #9CDCFE;">request</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> }) </span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">=&gt;</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> {</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">    const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> result</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;"> await</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> calendarAgent</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">invoke</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">({</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">      messages:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> [{ </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">role:</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "user"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">, </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">content:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> request</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> }],</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">    });</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">    const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> lastMessage</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> result</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">messages</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">[</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">result</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">messages</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(5, 80, 174); --shiki-dark: #9CDCFE;">length</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> -</span><span style="color: rgb(5, 80, 174); --shiki-dark: #B5CEA8;"> 1</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">];</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">    return</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> lastMessage</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">text</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">;</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">  },</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">  {</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">    name:</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "schedule_event"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">,</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">    description:</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> `</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">Schedule calendar events using natural language.</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">Use this when the user wants to create, modify, or check calendar appointments.</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">Handles date/time parsing, availability checking, and event creation.</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">Input: Natural language scheduling request (e.g., 'meeting with design team next Tuesday at 2pm')</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">    `</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">trim</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(),</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">    schema:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">object</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">({</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">      request:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">string</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">().</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">describe</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">"Natural language scheduling request"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">),</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">    }),</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">  }</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> manageEmail</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;"> tool</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">  async</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> ({ </span><span style="color: rgb(149, 56, 0); --shiki-dark: #9CDCFE;">request</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> }) </span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">=&gt;</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> {</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">    const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> result</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;"> await</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> emailAgent</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">invoke</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">({</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">      messages:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> [{ </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">role:</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "user"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">, </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">content:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> request</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> }],</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">    });</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">    const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> lastMessage</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> result</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">messages</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">[</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">result</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">messages</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(5, 80, 174); --shiki-dark: #9CDCFE;">length</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> -</span><span style="color: rgb(5, 80, 174); --shiki-dark: #B5CEA8;"> 1</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">];</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">    return</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> lastMessage</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">text</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">;</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">  },</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">  {</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">    name:</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "manage_email"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">,</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">    description:</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> `</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">Send emails using natural language.</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">Use this when the user wants to send notifications, reminders, or any email communication.</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">Handles recipient extraction, subject generation, and email composition.</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">Input: Natural language email request (e.g., 'send them a reminder about the meeting')</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">    `</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">trim</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(),</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">    schema:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">object</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">({</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">      request:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">string</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">().</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">describe</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">"Natural language email request"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">),</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">    }),</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">  }</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(110, 119, 129); --shiki-dark: #6A9955;">// ============================================================================</span></span>
<span class="line"><span style="color: rgb(110, 119, 129); --shiki-dark: #6A9955;">// Step 4: Create the supervisor agent</span></span>
<span class="line"><span style="color: rgb(110, 119, 129); --shiki-dark: #6A9955;">// ============================================================================</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> supervisorAgent</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;"> createAgent</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">({</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">  model:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> llm</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">,</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">  tools:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> [</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">scheduleEvent</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">, </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">manageEmail</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">],</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">  systemPrompt:</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> `</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">You are a helpful personal assistant.</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">You can schedule calendar events and send emails.</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">Break down user requests into appropriate tool calls and coordinate the results.</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">When a request involves multiple actions, use multiple tools in sequence.</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">  `</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">trim</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(),</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(110, 119, 129); --shiki-dark: #6A9955;">// ============================================================================</span></span>
<span class="line"><span style="color: rgb(110, 119, 129); --shiki-dark: #6A9955;">// Step 5: Use the supervisor</span></span>
<span class="line"><span style="color: rgb(110, 119, 129); --shiki-dark: #6A9955;">// ============================================================================</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(110, 119, 129); --shiki-dark: #6A9955;">// Example: User request requiring both calendar and email coordination</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> userRequest</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">  "Schedule a meeting with the design team next Tuesday at 2pm for 1 hour, "</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> +</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">  "and send them an email reminder about reviewing the new mockups."</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">console</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">log</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">"User Request:"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">, </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">userRequest</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">);</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">console</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">log</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">`</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D7BA7D;">\n</span><span style="color: rgb(10, 48, 105); --shiki-dark: #569CD6;">${</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">"="</span><span style="color: rgb(10, 48, 105); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">repeat</span><span style="color: rgb(10, 48, 105); --shiki-dark: #D4D4D4;">(</span><span style="color: rgb(5, 80, 174); --shiki-dark: #B5CEA8;">80</span><span style="color: rgb(10, 48, 105); --shiki-dark: #D4D4D4;">)</span><span style="color: rgb(10, 48, 105); --shiki-dark: #569CD6;">}</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D7BA7D;">\n</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">`</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> stream</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;"> await</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> supervisorAgent</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">stream</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">({</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">  messages:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> [{ </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">role:</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "user"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">, </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">content:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> userRequest</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> }],</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">for</span><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;"> await</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> (</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> step</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;"> of</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> stream</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">) {</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">  for</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> (</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> update</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;"> of</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> Object</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">values</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">step</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">)) {</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">    if</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> (</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">update</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> &amp;&amp;</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;"> typeof</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> update</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> ===</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "object"</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> &amp;&amp;</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "messages"</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;"> in</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> update</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">) {</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">      for</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> (</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> message</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;"> of</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> update</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">messages</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">) {</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">        console</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">log</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">message</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">toFormattedString</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">());</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">      }</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">    }</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">  }</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">}</span></span>
</code></pre></div></div></div></div></details>
<h3 class="flex whitespace-pre-wrap group font-semibold" id="understanding-the-architecture"><div class="absolute" tabindex="-1"><a href="#understanding-the-architecture" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100 focus:opacity-100 focus:outline-0 group/link" aria-label="Navigate to header">â€‹<div class="w-6 h-6 rounded-md flex items-center justify-center shadow-sm text-gray-400 dark:text-white/50 dark:bg-background-dark dark:brightness-[1.35] dark:ring-1 dark:hover:brightness-150 bg-white ring-1 ring-gray-400/30 dark:ring-gray-700/25 hover:ring-gray-400/60 dark:hover:ring-white/20 group-focus/link:border-2 group-focus/link:border-primary dark:group-focus/link:border-primary-light"><svg xmlns="http://www.w3.org/2000/svg" fill="gray" height="12px" viewBox="0 0 576 512"><path d="M0 256C0 167.6 71.6 96 160 96h72c13.3 0 24 10.7 24 24s-10.7 24-24 24H160C98.1 144 48 194.1 48 256s50.1 112 112 112h72c13.3 0 24 10.7 24 24s-10.7 24-24 24H160C71.6 416 0 344.4 0 256zm576 0c0 88.4-71.6 160-160 160H344c-13.3 0-24-10.7-24-24s10.7-24 24-24h72c61.9 0 112-50.1 112-112s-50.1-112-112-112H344c-13.3 0-24-10.7-24-24s10.7-24 24-24h72c88.4 0 160 71.6 160 160zM184 232H392c13.3 0 24 10.7 24 24s-10.7 24-24 24H184c-13.3 0-24-10.7-24-24s10.7-24 24-24z"></path></svg></div></a></div><span class="cursor-pointer">Understanding the architecture</span></h3>
<span data-as="p">Your system has three layers. The bottom layer contains rigid API tools that require exact formats. The middle layer contains sub-agents that accept natural language, translate it to structured API calls, and return natural language confirmations. The top layer contains the supervisor that routes to high-level capabilities and synthesizes results.</span>
<span data-as="p">This separation of concerns provides several benefits: each layer has a focused responsibility, you can add new domains without affecting existing ones, and you can test and iterate on each layer independently.</span>
<h2 class="flex whitespace-pre-wrap group font-semibold" id="6-add-human-in-the-loop-review"><div class="absolute" tabindex="-1"><a href="#6-add-human-in-the-loop-review" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100 focus:opacity-100 focus:outline-0 group/link" aria-label="Navigate to header">â€‹<div class="w-6 h-6 rounded-md flex items-center justify-center shadow-sm text-gray-400 dark:text-white/50 dark:bg-background-dark dark:brightness-[1.35] dark:ring-1 dark:hover:brightness-150 bg-white ring-1 ring-gray-400/30 dark:ring-gray-700/25 hover:ring-gray-400/60 dark:hover:ring-white/20 group-focus/link:border-2 group-focus/link:border-primary dark:group-focus/link:border-primary-light"><svg xmlns="http://www.w3.org/2000/svg" fill="gray" height="12px" viewBox="0 0 576 512"><path d="M0 256C0 167.6 71.6 96 160 96h72c13.3 0 24 10.7 24 24s-10.7 24-24 24H160C98.1 144 48 194.1 48 256s50.1 112 112 112h72c13.3 0 24 10.7 24 24s-10.7 24-24 24H160C71.6 416 0 344.4 0 256zm576 0c0 88.4-71.6 160-160 160H344c-13.3 0-24-10.7-24-24s10.7-24 24-24h72c61.9 0 112-50.1 112-112s-50.1-112-112-112H344c-13.3 0-24-10.7-24-24s10.7-24 24-24h72c88.4 0 160 71.6 160 160zM184 232H392c13.3 0 24 10.7 24 24s-10.7 24-24 24H184c-13.3 0-24-10.7-24-24s10.7-24 24-24z"></path></svg></div></a></div><span class="cursor-pointer">6. Add human-in-the-loop review</span></h2>
<span data-as="p">It can be prudent to incorporate <a class="link" href="/oss/javascript/langchain/human-in-the-loop">human-in-the-loop review</a> of sensitive actions. LangChain includes <a class="link" href="/oss/javascript/langchain/human-in-the-loop#configuring-interrupts">built-in middleware</a> to review tool calls, in this case the tools invoked by sub-agents.</span>
<span data-as="p">Letâ€™s add human-in-the-loop review to both sub-agents:</span>
<ul>
<li>We configure the <code>create_calendar_event</code> and <code>send_email</code> tools to interrupt, permitting all <a class="link" href="/oss/javascript/langchain/human-in-the-loop">response types</a> (<code>approve</code>, <code>edit</code>, <code>reject</code>)</li>
<li>We add a <a class="link" href="/oss/javascript/langchain/short-term-memory">checkpointer</a> <strong>only to the top-level agent</strong>. This is required to pause and resume execution.</li>
</ul>
<div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-950 dark:text-gray-50 codeblock-light border border-gray-950/10 dark:border-white/10 dark:twoslash-dark bg-transparent dark:bg-transparent" numberoflines="33" language="typescript"><div class="absolute top-3 right-4 flex items-center gap-1.5"><div class="z-10 relative"><button class="h-[26px] w-[26px] flex items-center justify-center rounded-md backdrop-blur peer group/copy-button " data-testid="copy-code-button" aria-label="Copy the contents from the code block"><svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-gray-400 group-hover/copy-button:text-gray-500 dark:text-white/40 dark:group-hover/copy-button:text-white/60"><path d="M14.25 5.25H7.25C6.14543 5.25 5.25 6.14543 5.25 7.25V14.25C5.25 15.3546 6.14543 16.25 7.25 16.25H14.25C15.3546 16.25 16.25 15.3546 16.25 14.25V7.25C16.25 6.14543 15.3546 5.25 14.25 5.25Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M2.80103 11.998L1.77203 5.07397C1.61003 3.98097 2.36403 2.96397 3.45603 2.80197L10.38 1.77297C11.313 1.63397 12.19 2.16297 12.528 3.00097" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button><div aria-hidden="true" class="absolute top-11 left-1/2 transform whitespace-nowrap -translate-x-1/2 -translate-y-1/2 peer-hover:opacity-100 opacity-0 text-white rounded-lg px-1.5 py-0.5 text-xs bg-primary-dark">Copy</div></div></div><div class="w-0 min-w-full max-w-full py-3.5 px-4 h-full dark:bg-codeblock relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out code-block-background [&amp;_*]:ring-0 [&amp;_*]:outline-0 [&amp;_*]:focus:ring-0 [&amp;_*]:focus:outline-0 [&amp;_pre>code]:pr-[3rem] [&amp;_pre>code>span.line-highlight]:min-w-[calc(100%+3rem)] [&amp;_pre>code>span.line-diff]:min-w-[calc(100%+3rem)] rounded-2xl bg-white overflow-x-auto scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-black/15 hover:scrollbar-thumb-black/20 active:scrollbar-thumb-black/20 dark:scrollbar-thumb-white/20 dark:hover:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25" data-component-part="code-block-root" tabindex="0" style="font-variant-ligatures: none; height: auto; background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E;"><div class="font-mono whitespace-pre leading-6"><pre class="shiki shiki-themes github-light-default dark-plus has-highlighted" style="background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E; color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;" language="typescript"><code language="typescript" numberoflines="33"><span class="line line-highlight"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">import</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> { </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">createAgent</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">, </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">humanInTheLoopMiddleware</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> } </span><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">from</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "langchain"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">; </span></span>
<span class="line line-highlight"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">import</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> { </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">MemorySaver</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> } </span><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">from</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "@langchain/langgraph"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">; </span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> calendarAgent</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;"> createAgent</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">({</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">  model:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> llm</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">,</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">  tools:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> [</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">createCalendarEvent</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">, </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">getAvailableTimeSlots</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">],</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">  systemPrompt:</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> CALENDAR_AGENT_PROMPT</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">,</span></span>
<span class="line line-highlight"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">  middleware:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> [ </span></span>
<span class="line line-highlight"><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">    humanInTheLoopMiddleware</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">({ </span></span>
<span class="line line-highlight"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">      interruptOn:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> { </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">create_calendar_event:</span><span style="color: rgb(5, 80, 174); --shiki-dark: #569CD6;"> true</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> }, </span></span>
<span class="line line-highlight"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">      descriptionPrefix:</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "Calendar event pending approval"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">, </span></span>
<span class="line line-highlight"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">    }), </span></span>
<span class="line line-highlight"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">  ], </span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> emailAgent</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;"> createAgent</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">({</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">  model:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> llm</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">,</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">  tools:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> [</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">sendEmail</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">],</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">  systemPrompt:</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> EMAIL_AGENT_PROMPT</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">,</span></span>
<span class="line line-highlight"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">  middleware:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> [ </span></span>
<span class="line line-highlight"><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">    humanInTheLoopMiddleware</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">({ </span></span>
<span class="line line-highlight"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">      interruptOn:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> { </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">send_email:</span><span style="color: rgb(5, 80, 174); --shiki-dark: #569CD6;"> true</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> }, </span></span>
<span class="line line-highlight"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">      descriptionPrefix:</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "Outbound email pending approval"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">, </span></span>
<span class="line line-highlight"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">    }), </span></span>
<span class="line line-highlight"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">  ], </span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> supervisorAgent</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;"> createAgent</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">({</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">  model:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> llm</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">,</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">  tools:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> [</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">scheduleEvent</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">, </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">manageEmail</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">],</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">  systemPrompt:</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> SUPERVISOR_PROMPT</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">,</span></span>
<span class="line line-highlight"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">  checkpointer:</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;"> new</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;"> MemorySaver</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(), </span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">});</span></span>
</code></pre></div></div></div>
<span data-as="p">Letâ€™s repeat the query. Note that we gather interrupt events into a list to access downstream:</span>
<div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-950 dark:text-gray-50 codeblock-light border border-gray-950/10 dark:border-white/10 dark:twoslash-dark bg-transparent dark:bg-transparent" numberoflines="25" language="typescript"><div class="absolute top-3 right-4 flex items-center gap-1.5"><div class="z-10 relative"><button class="h-[26px] w-[26px] flex items-center justify-center rounded-md backdrop-blur peer group/copy-button " data-testid="copy-code-button" aria-label="Copy the contents from the code block"><svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-gray-400 group-hover/copy-button:text-gray-500 dark:text-white/40 dark:group-hover/copy-button:text-white/60"><path d="M14.25 5.25H7.25C6.14543 5.25 5.25 6.14543 5.25 7.25V14.25C5.25 15.3546 6.14543 16.25 7.25 16.25H14.25C15.3546 16.25 16.25 15.3546 16.25 14.25V7.25C16.25 6.14543 15.3546 5.25 14.25 5.25Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M2.80103 11.998L1.77203 5.07397C1.61003 3.98097 2.36403 2.96397 3.45603 2.80197L10.38 1.77297C11.313 1.63397 12.19 2.16297 12.528 3.00097" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button><div aria-hidden="true" class="absolute top-11 left-1/2 transform whitespace-nowrap -translate-x-1/2 -translate-y-1/2 peer-hover:opacity-100 opacity-0 text-white rounded-lg px-1.5 py-0.5 text-xs bg-primary-dark">Copy</div></div></div><div class="w-0 min-w-full max-w-full py-3.5 px-4 h-full dark:bg-codeblock relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out code-block-background [&amp;_*]:ring-0 [&amp;_*]:outline-0 [&amp;_*]:focus:ring-0 [&amp;_*]:focus:outline-0 [&amp;_pre>code]:pr-[3rem] [&amp;_pre>code>span.line-highlight]:min-w-[calc(100%+3rem)] [&amp;_pre>code>span.line-diff]:min-w-[calc(100%+3rem)] rounded-2xl bg-white overflow-x-auto scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-black/15 hover:scrollbar-thumb-black/20 active:scrollbar-thumb-black/20 dark:scrollbar-thumb-white/20 dark:hover:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25" data-component-part="code-block-root" tabindex="0" style="font-variant-ligatures: none; height: auto; background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E;"><div class="font-mono whitespace-pre leading-6"><pre class="shiki shiki-themes github-light-default dark-plus" style="background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E; color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;" language="typescript"><code language="typescript" numberoflines="25"><span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> query</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">  "Schedule a meeting with the design team next Tuesday at 2pm for 1 hour, "</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> +</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">  "and send them an email reminder about reviewing the new mockups."</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> config</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> { </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">configurable:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> { </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">thread_id:</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "6"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> } };</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> interrupts</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;">:</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4EC9B0;"> any</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">[] </span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;">=</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> [];</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> stream</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;"> await</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> supervisorAgent</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">stream</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">  { </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">messages:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> [{ </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">role:</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "user"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">, </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">content:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> query</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> }] },</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">  config</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">for</span><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;"> await</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> (</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> step</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;"> of</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> stream</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">) {</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">  for</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> (</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> update</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;"> of</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> Object</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">values</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">step</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">)) {</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">    if</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> (</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">update</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> &amp;&amp;</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;"> typeof</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> update</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> ===</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "object"</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> &amp;&amp;</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "messages"</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;"> in</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> update</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">) {</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">      for</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> (</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> message</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;"> of</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> update</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">messages</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">) {</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">        console</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">log</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">message</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">toFormattedString</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">());</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">      }</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">    } </span><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">else</span><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;"> if</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> (</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">Array</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">isArray</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">update</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">)) {</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">      const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> interrupt</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> update</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">[</span><span style="color: rgb(5, 80, 174); --shiki-dark: #B5CEA8;">0</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">];</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">      interrupts</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">push</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">interrupt</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">);</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">      console</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">log</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">`</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D7BA7D;">\n</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">INTERRUPTED: </span><span style="color: rgb(10, 48, 105); --shiki-dark: #569CD6;">${</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">interrupt</span><span style="color: rgb(10, 48, 105); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">id</span><span style="color: rgb(10, 48, 105); --shiki-dark: #569CD6;">}</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">`</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">);</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">    }</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">  }</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">}</span></span>
</code></pre></div></div></div>
<div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-950 dark:text-gray-50 codeblock-light border border-gray-950/10 dark:border-white/10 dark:twoslash-dark bg-transparent dark:bg-transparent" numberoflines="15" language="text"><div class="absolute top-3 right-4 flex items-center gap-1.5"><div class="z-10 relative"><button class="h-[26px] w-[26px] flex items-center justify-center rounded-md backdrop-blur peer group/copy-button " data-testid="copy-code-button" aria-label="Copy the contents from the code block"><svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-gray-400 group-hover/copy-button:text-gray-500 dark:text-white/40 dark:group-hover/copy-button:text-white/60"><path d="M14.25 5.25H7.25C6.14543 5.25 5.25 6.14543 5.25 7.25V14.25C5.25 15.3546 6.14543 16.25 7.25 16.25H14.25C15.3546 16.25 16.25 15.3546 16.25 14.25V7.25C16.25 6.14543 15.3546 5.25 14.25 5.25Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M2.80103 11.998L1.77203 5.07397C1.61003 3.98097 2.36403 2.96397 3.45603 2.80197L10.38 1.77297C11.313 1.63397 12.19 2.16297 12.528 3.00097" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button><div aria-hidden="true" class="absolute top-11 left-1/2 transform whitespace-nowrap -translate-x-1/2 -translate-y-1/2 peer-hover:opacity-100 opacity-0 text-white rounded-lg px-1.5 py-0.5 text-xs bg-primary-dark">Copy</div></div></div><div class="w-0 min-w-full max-w-full py-3.5 px-4 h-full dark:bg-codeblock relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out code-block-background [&amp;_*]:ring-0 [&amp;_*]:outline-0 [&amp;_*]:focus:ring-0 [&amp;_*]:focus:outline-0 [&amp;_pre>code]:pr-[3rem] [&amp;_pre>code>span.line-highlight]:min-w-[calc(100%+3rem)] [&amp;_pre>code>span.line-diff]:min-w-[calc(100%+3rem)] rounded-2xl bg-white overflow-x-auto scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-black/15 hover:scrollbar-thumb-black/20 active:scrollbar-thumb-black/20 dark:scrollbar-thumb-white/20 dark:hover:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25" data-component-part="code-block-root" tabindex="0" style="font-variant-ligatures: none; height: auto; background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E;"><div class="font-mono whitespace-pre leading-6"><pre class="shiki shiki-themes github-light-default dark-plus" style="background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E; color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;" language="text"><code language="text" numberoflines="15"><span class="line"><span>================================== Ai Message ==================================</span></span>
<span class="line"><span>Tool Calls:</span></span>
<span class="line"><span>  schedule_event (call_t4Wyn32ohaShpEZKuzZbl83z)</span></span>
<span class="line"><span> Call ID: call_t4Wyn32ohaShpEZKuzZbl83z</span></span>
<span class="line"><span>  Args:</span></span>
<span class="line"><span>    request: Schedule a meeting with the design team next Tuesday at 2pm for 1 hour.</span></span>
<span class="line"><span>  manage_email (call_JWj4vDJ5VMnvkySymhCBm4IR)</span></span>
<span class="line"><span> Call ID: call_JWj4vDJ5VMnvkySymhCBm4IR</span></span>
<span class="line"><span>  Args:</span></span>
<span class="line"><span>    request: Send an email reminder to the design team about reviewing the new mockups before our meeting next Tuesday at 2pm.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>INTERRUPTED: 4f994c9721682a292af303ec1a46abb7</span></span>
<span class="line"><span></span></span>
<span class="line"><span>INTERRUPTED: 2b56f299be313ad8bc689eff02973f16</span></span>
<span class="line"><span></span></span></code></pre></div></div></div>
<span data-as="p">This time weâ€™ve interrupted execution. Letâ€™s inspect the interrupt events:</span>
<div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-950 dark:text-gray-50 codeblock-light border border-gray-950/10 dark:border-white/10 dark:twoslash-dark bg-transparent dark:bg-transparent" numberoflines="6" language="typescript"><div class="absolute top-3 right-4 flex items-center gap-1.5"><div class="z-10 relative"><button class="h-[26px] w-[26px] flex items-center justify-center rounded-md backdrop-blur peer group/copy-button " data-testid="copy-code-button" aria-label="Copy the contents from the code block"><svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-gray-400 group-hover/copy-button:text-gray-500 dark:text-white/40 dark:group-hover/copy-button:text-white/60"><path d="M14.25 5.25H7.25C6.14543 5.25 5.25 6.14543 5.25 7.25V14.25C5.25 15.3546 6.14543 16.25 7.25 16.25H14.25C15.3546 16.25 16.25 15.3546 16.25 14.25V7.25C16.25 6.14543 15.3546 5.25 14.25 5.25Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M2.80103 11.998L1.77203 5.07397C1.61003 3.98097 2.36403 2.96397 3.45603 2.80197L10.38 1.77297C11.313 1.63397 12.19 2.16297 12.528 3.00097" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button><div aria-hidden="true" class="absolute top-11 left-1/2 transform whitespace-nowrap -translate-x-1/2 -translate-y-1/2 peer-hover:opacity-100 opacity-0 text-white rounded-lg px-1.5 py-0.5 text-xs bg-primary-dark">Copy</div></div></div><div class="w-0 min-w-full max-w-full py-3.5 px-4 h-full dark:bg-codeblock relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out code-block-background [&amp;_*]:ring-0 [&amp;_*]:outline-0 [&amp;_*]:focus:ring-0 [&amp;_*]:focus:outline-0 [&amp;_pre>code]:pr-[3rem] [&amp;_pre>code>span.line-highlight]:min-w-[calc(100%+3rem)] [&amp;_pre>code>span.line-diff]:min-w-[calc(100%+3rem)] rounded-2xl bg-white overflow-x-auto scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-black/15 hover:scrollbar-thumb-black/20 active:scrollbar-thumb-black/20 dark:scrollbar-thumb-white/20 dark:hover:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25" data-component-part="code-block-root" tabindex="0" style="font-variant-ligatures: none; height: auto; background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E;"><div class="font-mono whitespace-pre leading-6"><pre class="shiki shiki-themes github-light-default dark-plus" style="background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E; color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;" language="typescript"><code language="typescript" numberoflines="6"><span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">for</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> (</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> interrupt</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;"> of</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> interrupts</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">) {</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">  for</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> (</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> request</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;"> of</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> interrupt</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">value</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">actionRequests</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">) {</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">    console</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">log</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">`INTERRUPTED: </span><span style="color: rgb(10, 48, 105); --shiki-dark: #569CD6;">${</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">interrupt</span><span style="color: rgb(10, 48, 105); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">id</span><span style="color: rgb(10, 48, 105); --shiki-dark: #569CD6;">}</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">`</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">);</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">    console</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">log</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">`</span><span style="color: rgb(10, 48, 105); --shiki-dark: #569CD6;">${</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">request</span><span style="color: rgb(10, 48, 105); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">description</span><span style="color: rgb(10, 48, 105); --shiki-dark: #569CD6;">}</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D7BA7D;">\n</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">`</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">);</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">  }</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">}</span></span>
</code></pre></div></div></div>
<div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-950 dark:text-gray-50 codeblock-light border border-gray-950/10 dark:border-white/10 dark:twoslash-dark bg-transparent dark:bg-transparent" numberoflines="12" language="text"><div class="absolute top-3 right-4 flex items-center gap-1.5"><div class="z-10 relative"><button class="h-[26px] w-[26px] flex items-center justify-center rounded-md backdrop-blur peer group/copy-button " data-testid="copy-code-button" aria-label="Copy the contents from the code block"><svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-gray-400 group-hover/copy-button:text-gray-500 dark:text-white/40 dark:group-hover/copy-button:text-white/60"><path d="M14.25 5.25H7.25C6.14543 5.25 5.25 6.14543 5.25 7.25V14.25C5.25 15.3546 6.14543 16.25 7.25 16.25H14.25C15.3546 16.25 16.25 15.3546 16.25 14.25V7.25C16.25 6.14543 15.3546 5.25 14.25 5.25Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M2.80103 11.998L1.77203 5.07397C1.61003 3.98097 2.36403 2.96397 3.45603 2.80197L10.38 1.77297C11.313 1.63397 12.19 2.16297 12.528 3.00097" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button><div aria-hidden="true" class="absolute top-11 left-1/2 transform whitespace-nowrap -translate-x-1/2 -translate-y-1/2 peer-hover:opacity-100 opacity-0 text-white rounded-lg px-1.5 py-0.5 text-xs bg-primary-dark">Copy</div></div></div><div class="w-0 min-w-full max-w-full py-3.5 px-4 h-full dark:bg-codeblock relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out code-block-background [&amp;_*]:ring-0 [&amp;_*]:outline-0 [&amp;_*]:focus:ring-0 [&amp;_*]:focus:outline-0 [&amp;_pre>code]:pr-[3rem] [&amp;_pre>code>span.line-highlight]:min-w-[calc(100%+3rem)] [&amp;_pre>code>span.line-diff]:min-w-[calc(100%+3rem)] rounded-2xl bg-white overflow-x-auto scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-black/15 hover:scrollbar-thumb-black/20 active:scrollbar-thumb-black/20 dark:scrollbar-thumb-white/20 dark:hover:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25" data-component-part="code-block-root" tabindex="0" style="font-variant-ligatures: none; height: auto; background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E;"><div class="font-mono whitespace-pre leading-6"><pre class="shiki shiki-themes github-light-default dark-plus" style="background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E; color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;" language="text"><code language="text" numberoflines="12"><span class="line"><span>INTERRUPTED: 4f994c9721682a292af303ec1a46abb7</span></span>
<span class="line"><span>Calendar event pending approval</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Tool: create_calendar_event</span></span>
<span class="line"><span>Args: {'title': 'Meeting with the Design Team', 'start_time': '2024-06-18T14:00:00', 'end_time': '2024-06-18T15:00:00', 'attendees': ['design team']}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>INTERRUPTED: 2b56f299be313ad8bc689eff02973f16</span></span>
<span class="line"><span>Outbound email pending approval</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Tool: send_email</span></span>
<span class="line"><span>Args: {'to': ['designteam@example.com'], 'subject': 'Reminder: Review New Mockups Before Meeting Next Tuesday at 2pm', 'body': "Hello Team,\n\nThis is a reminder to review the new mockups ahead of our meeting scheduled for next Tuesday at 2pm. Your feedback and insights will be valuable for our discussion and next steps.\n\nPlease ensure you've gone through the designs and are ready to share your thoughts during the meeting.\n\nThank you!\n\nBest regards,\n[Your Name]"}</span></span>
<span class="line"><span></span></span></code></pre></div></div></div>
<span data-as="p">We can specify decisions for each interrupt by referring to its ID using a <a href="https://reference.langchain.com/javascript/classes/_langchain_langgraph.index.Command.html" target="_blank" rel="noreferrer" class="link"><code>Command</code></a>. Refer to the <a class="link" href="/oss/javascript/langchain/human-in-the-loop">human-in-the-loop guide</a> for additional details. For demonstration purposes, here we will accept the calendar event, but edit the subject of the outbound email:</span>
<div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-950 dark:text-gray-50 codeblock-light border border-gray-950/10 dark:border-white/10 dark:twoslash-dark bg-transparent dark:bg-transparent" numberoflines="31" language="typescript"><div class="absolute top-3 right-4 flex items-center gap-1.5"><div class="z-10 relative"><button class="h-[26px] w-[26px] flex items-center justify-center rounded-md backdrop-blur peer group/copy-button " data-testid="copy-code-button" aria-label="Copy the contents from the code block"><svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-gray-400 group-hover/copy-button:text-gray-500 dark:text-white/40 dark:group-hover/copy-button:text-white/60"><path d="M14.25 5.25H7.25C6.14543 5.25 5.25 6.14543 5.25 7.25V14.25C5.25 15.3546 6.14543 16.25 7.25 16.25H14.25C15.3546 16.25 16.25 15.3546 16.25 14.25V7.25C16.25 6.14543 15.3546 5.25 14.25 5.25Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M2.80103 11.998L1.77203 5.07397C1.61003 3.98097 2.36403 2.96397 3.45603 2.80197L10.38 1.77297C11.313 1.63397 12.19 2.16297 12.528 3.00097" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button><div aria-hidden="true" class="absolute top-11 left-1/2 transform whitespace-nowrap -translate-x-1/2 -translate-y-1/2 peer-hover:opacity-100 opacity-0 text-white rounded-lg px-1.5 py-0.5 text-xs bg-primary-dark">Copy</div></div></div><div class="w-0 min-w-full max-w-full py-3.5 px-4 h-full dark:bg-codeblock relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out code-block-background [&amp;_*]:ring-0 [&amp;_*]:outline-0 [&amp;_*]:focus:ring-0 [&amp;_*]:focus:outline-0 [&amp;_pre>code]:pr-[3rem] [&amp;_pre>code>span.line-highlight]:min-w-[calc(100%+3rem)] [&amp;_pre>code>span.line-diff]:min-w-[calc(100%+3rem)] rounded-2xl bg-white overflow-x-auto scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-black/15 hover:scrollbar-thumb-black/20 active:scrollbar-thumb-black/20 dark:scrollbar-thumb-white/20 dark:hover:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25" data-component-part="code-block-root" tabindex="0" style="font-variant-ligatures: none; height: auto; background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E;"><div class="font-mono whitespace-pre leading-6"><pre class="shiki shiki-themes github-light-default dark-plus has-highlighted" style="background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E; color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;" language="typescript"><code language="typescript" numberoflines="31"><span class="line line-highlight"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">import</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> { </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">Command</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> } </span><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">from</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "@langchain/langgraph"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">; </span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> resume</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;">:</span><span style="color: rgb(149, 56, 0); --shiki-dark: #4EC9B0;"> Record</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">&lt;</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4EC9B0;">string</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">, </span><span style="color: rgb(5, 80, 174); --shiki-dark: #4EC9B0;">any</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">&gt; </span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;">=</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> {};</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">for</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> (</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> interrupt</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;"> of</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> interrupts</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">) {</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">  const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> actionRequest</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> interrupt</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">value</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">actionRequests</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">[</span><span style="color: rgb(5, 80, 174); --shiki-dark: #B5CEA8;">0</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">];</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">  if</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> (</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">actionRequest</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">name</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> ===</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "send_email"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">) {</span></span>
<span class="line"><span style="color: rgb(110, 119, 129); --shiki-dark: #6A9955;">    // Edit email</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">    const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> editedAction</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> { </span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;">...</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">actionRequest</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> };</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">    editedAction</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">arguments</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">subject</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "Mockups reminder"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">;</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">    resume</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">[</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">interrupt</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">id</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">] </span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;">=</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> {</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">      decisions:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> [{ </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">type:</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "edit"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">, </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">editedAction</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> }]</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">    };</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">  } </span><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">else</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> {</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">    resume</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">[</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">interrupt</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">id</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">] </span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;">=</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> { </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">decisions:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> [{ </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">type:</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "approve"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> }] };</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">  }</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> resumeStream</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;"> await</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> supervisorAgent</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">stream</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span></span>
<span class="line line-highlight"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">  new</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;"> Command</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">({ </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">resume</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> }), </span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">  config</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">for</span><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;"> await</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> (</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> step</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;"> of</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> resumeStream</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">) {</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">  for</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> (</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> update</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;"> of</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> Object</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">values</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">step</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">)) {</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">    if</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> (</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">update</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> &amp;&amp;</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;"> typeof</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> update</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> ===</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "object"</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> &amp;&amp;</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "messages"</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;"> in</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> update</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">) {</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">      for</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> (</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> message</span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;"> of</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> update</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">messages</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">) {</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">        console</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">log</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">message</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">toFormattedString</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">());</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">      }</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">    }</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">  }</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">}</span></span>
</code></pre></div></div></div>
<div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-950 dark:text-gray-50 codeblock-light border border-gray-950/10 dark:border-white/10 dark:twoslash-dark bg-transparent dark:bg-transparent" numberoflines="21" language="text"><div class="absolute top-3 right-4 flex items-center gap-1.5"><div class="z-10 relative"><button class="h-[26px] w-[26px] flex items-center justify-center rounded-md backdrop-blur peer group/copy-button " data-testid="copy-code-button" aria-label="Copy the contents from the code block"><svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-gray-400 group-hover/copy-button:text-gray-500 dark:text-white/40 dark:group-hover/copy-button:text-white/60"><path d="M14.25 5.25H7.25C6.14543 5.25 5.25 6.14543 5.25 7.25V14.25C5.25 15.3546 6.14543 16.25 7.25 16.25H14.25C15.3546 16.25 16.25 15.3546 16.25 14.25V7.25C16.25 6.14543 15.3546 5.25 14.25 5.25Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M2.80103 11.998L1.77203 5.07397C1.61003 3.98097 2.36403 2.96397 3.45603 2.80197L10.38 1.77297C11.313 1.63397 12.19 2.16297 12.528 3.00097" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button><div aria-hidden="true" class="absolute top-11 left-1/2 transform whitespace-nowrap -translate-x-1/2 -translate-y-1/2 peer-hover:opacity-100 opacity-0 text-white rounded-lg px-1.5 py-0.5 text-xs bg-primary-dark">Copy</div></div></div><div class="w-0 min-w-full max-w-full py-3.5 px-4 h-full dark:bg-codeblock relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out code-block-background [&amp;_*]:ring-0 [&amp;_*]:outline-0 [&amp;_*]:focus:ring-0 [&amp;_*]:focus:outline-0 [&amp;_pre>code]:pr-[3rem] [&amp;_pre>code>span.line-highlight]:min-w-[calc(100%+3rem)] [&amp;_pre>code>span.line-diff]:min-w-[calc(100%+3rem)] rounded-2xl bg-white overflow-x-auto scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-black/15 hover:scrollbar-thumb-black/20 active:scrollbar-thumb-black/20 dark:scrollbar-thumb-white/20 dark:hover:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25" data-component-part="code-block-root" tabindex="0" style="font-variant-ligatures: none; height: auto; background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E;"><div class="font-mono whitespace-pre leading-6"><pre class="shiki shiki-themes github-light-default dark-plus" style="background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E; color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;" language="text"><code language="text" numberoflines="21"><span class="line"><span>================================= Tool Message =================================</span></span>
<span class="line"><span>Name: schedule_event</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Your meeting with the design team has been scheduled for next Tuesday, June 18th, from 2:00 pm to 3:00 pm.</span></span>
<span class="line"><span>================================= Tool Message =================================</span></span>
<span class="line"><span>Name: manage_email</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Your email reminder to the design team has been sent. Hereâ€™s what was sent:</span></span>
<span class="line"><span></span></span>
<span class="line"><span>- Recipient: designteam@example.com</span></span>
<span class="line"><span>- Subject: Mockups reminder</span></span>
<span class="line"><span>- Body: A reminder to review the new mockups before the meeting next Tuesday at 2pm, with a request for feedback and readiness for discussion.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Let me know if you need any further assistance!</span></span>
<span class="line"><span>================================== Ai Message ==================================</span></span>
<span class="line"><span></span></span>
<span class="line"><span>- Your meeting with the design team has been scheduled for next Tuesday, June 18th, from 2:00 pm to 3:00 pm.</span></span>
<span class="line"><span>- An email reminder has been sent to the design team about reviewing the new mockups before the meeting.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Let me know if you need any further assistance!</span></span>
<span class="line"><span></span></span></code></pre></div></div></div>
<span data-as="p">The run proceeds with our input.</span>
<h2 class="flex whitespace-pre-wrap group font-semibold" id="7-advanced:-control-information-flow"><div class="absolute" tabindex="-1"><a href="#7-advanced:-control-information-flow" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100 focus:opacity-100 focus:outline-0 group/link" aria-label="Navigate to header">â€‹<div class="w-6 h-6 rounded-md flex items-center justify-center shadow-sm text-gray-400 dark:text-white/50 dark:bg-background-dark dark:brightness-[1.35] dark:ring-1 dark:hover:brightness-150 bg-white ring-1 ring-gray-400/30 dark:ring-gray-700/25 hover:ring-gray-400/60 dark:hover:ring-white/20 group-focus/link:border-2 group-focus/link:border-primary dark:group-focus/link:border-primary-light"><svg xmlns="http://www.w3.org/2000/svg" fill="gray" height="12px" viewBox="0 0 576 512"><path d="M0 256C0 167.6 71.6 96 160 96h72c13.3 0 24 10.7 24 24s-10.7 24-24 24H160C98.1 144 48 194.1 48 256s50.1 112 112 112h72c13.3 0 24 10.7 24 24s-10.7 24-24 24H160C71.6 416 0 344.4 0 256zm576 0c0 88.4-71.6 160-160 160H344c-13.3 0-24-10.7-24-24s10.7-24 24-24h72c61.9 0 112-50.1 112-112s-50.1-112-112-112H344c-13.3 0-24-10.7-24-24s10.7-24 24-24h72c88.4 0 160 71.6 160 160zM184 232H392c13.3 0 24 10.7 24 24s-10.7 24-24 24H184c-13.3 0-24-10.7-24-24s10.7-24 24-24z"></path></svg></div></a></div><span class="cursor-pointer">7. Advanced: Control information flow</span></h2>
<span data-as="p">By default, sub-agents receive only the request string from the supervisor. You might want to pass additional context, such as conversation history or user preferences.</span>
<h3 class="flex whitespace-pre-wrap group font-semibold" id="pass-additional-conversational-context-to-sub-agents"><div class="absolute" tabindex="-1"><a href="#pass-additional-conversational-context-to-sub-agents" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100 focus:opacity-100 focus:outline-0 group/link" aria-label="Navigate to header">â€‹<div class="w-6 h-6 rounded-md flex items-center justify-center shadow-sm text-gray-400 dark:text-white/50 dark:bg-background-dark dark:brightness-[1.35] dark:ring-1 dark:hover:brightness-150 bg-white ring-1 ring-gray-400/30 dark:ring-gray-700/25 hover:ring-gray-400/60 dark:hover:ring-white/20 group-focus/link:border-2 group-focus/link:border-primary dark:group-focus/link:border-primary-light"><svg xmlns="http://www.w3.org/2000/svg" fill="gray" height="12px" viewBox="0 0 576 512"><path d="M0 256C0 167.6 71.6 96 160 96h72c13.3 0 24 10.7 24 24s-10.7 24-24 24H160C98.1 144 48 194.1 48 256s50.1 112 112 112h72c13.3 0 24 10.7 24 24s-10.7 24-24 24H160C71.6 416 0 344.4 0 256zm576 0c0 88.4-71.6 160-160 160H344c-13.3 0-24-10.7-24-24s10.7-24 24-24h72c61.9 0 112-50.1 112-112s-50.1-112-112-112H344c-13.3 0-24-10.7-24-24s10.7-24 24-24h72c88.4 0 160 71.6 160 160zM184 232H392c13.3 0 24 10.7 24 24s-10.7 24-24 24H184c-13.3 0-24-10.7-24-24s10.7-24 24-24z"></path></svg></div></a></div><span class="cursor-pointer">Pass additional conversational context to sub-agents</span></h3>
<div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-950 dark:text-gray-50 codeblock-light border border-gray-950/10 dark:border-white/10 dark:twoslash-dark bg-transparent dark:bg-transparent" numberoflines="36" language="typescript"><div class="absolute top-3 right-4 flex items-center gap-1.5"><div class="z-10 relative"><button class="h-[26px] w-[26px] flex items-center justify-center rounded-md backdrop-blur peer group/copy-button " data-testid="copy-code-button" aria-label="Copy the contents from the code block"><svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-gray-400 group-hover/copy-button:text-gray-500 dark:text-white/40 dark:group-hover/copy-button:text-white/60"><path d="M14.25 5.25H7.25C6.14543 5.25 5.25 6.14543 5.25 7.25V14.25C5.25 15.3546 6.14543 16.25 7.25 16.25H14.25C15.3546 16.25 16.25 15.3546 16.25 14.25V7.25C16.25 6.14543 15.3546 5.25 14.25 5.25Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M2.80103 11.998L1.77203 5.07397C1.61003 3.98097 2.36403 2.96397 3.45603 2.80197L10.38 1.77297C11.313 1.63397 12.19 2.16297 12.528 3.00097" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button><div aria-hidden="true" class="absolute top-11 left-1/2 transform whitespace-nowrap -translate-x-1/2 -translate-y-1/2 peer-hover:opacity-100 opacity-0 text-white rounded-lg px-1.5 py-0.5 text-xs bg-primary-dark">Copy</div></div></div><div class="w-0 min-w-full max-w-full py-3.5 px-4 h-full dark:bg-codeblock relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out code-block-background [&amp;_*]:ring-0 [&amp;_*]:outline-0 [&amp;_*]:focus:ring-0 [&amp;_*]:focus:outline-0 [&amp;_pre>code]:pr-[3rem] [&amp;_pre>code>span.line-highlight]:min-w-[calc(100%+3rem)] [&amp;_pre>code>span.line-diff]:min-w-[calc(100%+3rem)] rounded-2xl bg-white overflow-x-auto scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-black/15 hover:scrollbar-thumb-black/20 active:scrollbar-thumb-black/20 dark:scrollbar-thumb-white/20 dark:hover:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25" data-component-part="code-block-root" tabindex="0" style="font-variant-ligatures: none; height: auto; background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E;"><div class="font-mono whitespace-pre leading-6"><pre class="shiki shiki-themes github-light-default dark-plus" style="background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E; color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;" language="typescript"><code language="typescript" numberoflines="36"><span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">import</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> { </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">getCurrentTaskInput</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> } </span><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">from</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "@langchain/langgraph"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">;</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">import</span><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;"> type</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> { </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">InternalAgentState</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> } </span><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">from</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "langchain"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">;</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">import</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> { </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">HumanMessage</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> } </span><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">from</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "@langchain/core/messages"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> scheduleEvent</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;"> tool</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">  async</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> ({ </span><span style="color: rgb(149, 56, 0); --shiki-dark: #9CDCFE;">request</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> }, </span><span style="color: rgb(149, 56, 0); --shiki-dark: #9CDCFE;">config</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">) </span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">=&gt;</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> {</span></span>
<span class="line"><span style="color: rgb(110, 119, 129); --shiki-dark: #6A9955;">    // Customize context received by sub-agent</span></span>
<span class="line"><span style="color: rgb(110, 119, 129); --shiki-dark: #6A9955;">    // Access full thread messages from the config</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">    const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> currentMessages</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;"> getCurrentTaskInput</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">&lt;</span><span style="color: rgb(149, 56, 0); --shiki-dark: #4EC9B0;">InternalAgentState</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">&gt;(</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">config</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">).</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">messages</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">    const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> originalUserMessage</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> currentMessages</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">find</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">HumanMessage</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">isInstance</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">    const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> prompt</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> `</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">You are assisting with the following user inquiry:</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #569CD6;">${</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">originalUserMessage</span><span style="color: rgb(10, 48, 105); --shiki-dark: #D4D4D4;">?.</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">content</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> ||</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "No context available"</span><span style="color: rgb(10, 48, 105); --shiki-dark: #569CD6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">You are tasked with the following sub-request:</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #569CD6;">${</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">request</span><span style="color: rgb(10, 48, 105); --shiki-dark: #569CD6;">}</span></span>
<span class="line"><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">    `</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">trim</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">    const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> result</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;"> await</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> calendarAgent</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">invoke</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">({</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">      messages:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> [{ </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">role:</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "user"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">, </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">content:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> prompt</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> }],</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">    });</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">    const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> lastMessage</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> result</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">messages</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">[</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">result</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">messages</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(5, 80, 174); --shiki-dark: #9CDCFE;">length</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> -</span><span style="color: rgb(5, 80, 174); --shiki-dark: #B5CEA8;"> 1</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">];</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">    return</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> lastMessage</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">text</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">;</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">  },</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">  {</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">    name:</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "schedule_event"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">,</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">    description:</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "Schedule calendar events using natural language."</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">,</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">    schema:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">object</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">({</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">      request:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">string</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">().</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">describe</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">"Natural language scheduling request"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">),</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">    }),</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">  }</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">);</span></span>
</code></pre></div></div></div>
<span data-as="p">This allows sub-agents to see the full conversation context, which can be useful for resolving ambiguities like â€œschedule it for the same time tomorrowâ€ (referencing a previous conversation).</span>
<div class="callout my-4 px-5 py-4 overflow-hidden rounded-2xl flex gap-3 border border-emerald-500/20 bg-emerald-50/50 dark:border-emerald-500/30 dark:bg-emerald-500/10 [&amp;_[data-component-part='callout-icon']]:mt-px" data-callout-type="tip"><div class="mt-0.5 w-4" data-component-part="callout-icon"><svg width="11" height="14" viewBox="0 0 11 14" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="text-emerald-600 dark:text-emerald-400/80 w-3.5 h-auto" aria-label="Tip"><path d="M3.12794 12.4232C3.12794 12.5954 3.1776 12.7634 3.27244 12.907L3.74114 13.6095C3.88471 13.8248 4.21067 14 4.46964 14H6.15606C6.41415 14 6.74017 13.825 6.88373 13.6095L7.3508 12.9073C7.43114 12.7859 7.49705 12.569 7.49705 12.4232L7.50055 11.3513H3.12521L3.12794 12.4232ZM5.31288 0C2.52414 0.00875889 0.5 2.26889 0.5 4.78826C0.5 6.00188 0.949566 7.10829 1.69119 7.95492C2.14321 8.47011 2.84901 9.54727 3.11919 10.4557C3.12005 10.4625 3.12175 10.4698 3.12261 10.4771H7.50342C7.50427 10.4698 7.50598 10.463 7.50684 10.4557C7.77688 9.54727 8.48281 8.47011 8.93484 7.95492C9.67728 7.13181 10.1258 6.02703 10.1258 4.78826C10.1258 2.15486 7.9709 0.000106649 5.31288 0ZM7.94902 7.11267C7.52078 7.60079 6.99082 8.37878 6.6077 9.18794H4.02051C3.63739 8.37878 3.10743 7.60079 2.67947 7.11294C2.11997 6.47551 1.8126 5.63599 1.8126 4.78826C1.8126 3.09829 3.12794 1.31944 5.28827 1.3126C7.2435 1.3126 8.81315 2.88226 8.81315 4.78826C8.81315 5.63599 8.50688 6.47551 7.94902 7.11267ZM4.87534 2.18767C3.66939 2.18767 2.68767 3.16939 2.68767 4.37534C2.68767 4.61719 2.88336 4.81288 3.12521 4.81288C3.36705 4.81288 3.56274 4.61599 3.56274 4.37534C3.56274 3.6515 4.1515 3.06274 4.87534 3.06274C5.11719 3.06274 5.31288 2.86727 5.31288 2.62548C5.31288 2.38369 5.11599 2.18767 4.87534 2.18767Z"></path></svg></div><div class="text-sm prose dark:prose-invert min-w-0 w-full [&amp;_kbd]:bg-background-light dark:[&amp;_kbd]:bg-background-dark [&amp;_code]:!text-current [&amp;_kbd]:!text-current [&amp;_a]:!text-current [&amp;_a]:border-current text-emerald-900 dark:text-emerald-200" data-component-part="callout-content"><span data-as="p">You can see the full context received by the sub agent in the <a href="https://smith.langchain.com/public/c7d54882-afb8-4039-9c5a-4112d0f458b0/r/6803571e-af78-4c68-904a-ecf55771084d" target="_blank" rel="noreferrer" class="link">chat model call</a> of the LangSmith trace.</span></div></div>
<h3 class="flex whitespace-pre-wrap group font-semibold" id="control-what-supervisor-receives"><div class="absolute" tabindex="-1"><a href="#control-what-supervisor-receives" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100 focus:opacity-100 focus:outline-0 group/link" aria-label="Navigate to header">â€‹<div class="w-6 h-6 rounded-md flex items-center justify-center shadow-sm text-gray-400 dark:text-white/50 dark:bg-background-dark dark:brightness-[1.35] dark:ring-1 dark:hover:brightness-150 bg-white ring-1 ring-gray-400/30 dark:ring-gray-700/25 hover:ring-gray-400/60 dark:hover:ring-white/20 group-focus/link:border-2 group-focus/link:border-primary dark:group-focus/link:border-primary-light"><svg xmlns="http://www.w3.org/2000/svg" fill="gray" height="12px" viewBox="0 0 576 512"><path d="M0 256C0 167.6 71.6 96 160 96h72c13.3 0 24 10.7 24 24s-10.7 24-24 24H160C98.1 144 48 194.1 48 256s50.1 112 112 112h72c13.3 0 24 10.7 24 24s-10.7 24-24 24H160C71.6 416 0 344.4 0 256zm576 0c0 88.4-71.6 160-160 160H344c-13.3 0-24-10.7-24-24s10.7-24 24-24h72c61.9 0 112-50.1 112-112s-50.1-112-112-112H344c-13.3 0-24-10.7-24-24s10.7-24 24-24h72c88.4 0 160 71.6 160 160zM184 232H392c13.3 0 24 10.7 24 24s-10.7 24-24 24H184c-13.3 0-24-10.7-24-24s10.7-24 24-24z"></path></svg></div></a></div><span class="cursor-pointer">Control what supervisor receives</span></h3>
<span data-as="p">You can also customize what information flows back to the supervisor:</span>
<div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-950 dark:text-gray-50 codeblock-light border border-gray-950/10 dark:border-white/10 dark:twoslash-dark bg-transparent dark:bg-transparent" numberoflines="26" language="typescript"><div class="absolute top-3 right-4 flex items-center gap-1.5"><div class="z-10 relative"><button class="h-[26px] w-[26px] flex items-center justify-center rounded-md backdrop-blur peer group/copy-button " data-testid="copy-code-button" aria-label="Copy the contents from the code block"><svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-gray-400 group-hover/copy-button:text-gray-500 dark:text-white/40 dark:group-hover/copy-button:text-white/60"><path d="M14.25 5.25H7.25C6.14543 5.25 5.25 6.14543 5.25 7.25V14.25C5.25 15.3546 6.14543 16.25 7.25 16.25H14.25C15.3546 16.25 16.25 15.3546 16.25 14.25V7.25C16.25 6.14543 15.3546 5.25 14.25 5.25Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M2.80103 11.998L1.77203 5.07397C1.61003 3.98097 2.36403 2.96397 3.45603 2.80197L10.38 1.77297C11.313 1.63397 12.19 2.16297 12.528 3.00097" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button><div aria-hidden="true" class="absolute top-11 left-1/2 transform whitespace-nowrap -translate-x-1/2 -translate-y-1/2 peer-hover:opacity-100 opacity-0 text-white rounded-lg px-1.5 py-0.5 text-xs bg-primary-dark">Copy</div></div></div><div class="w-0 min-w-full max-w-full py-3.5 px-4 h-full dark:bg-codeblock relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out code-block-background [&amp;_*]:ring-0 [&amp;_*]:outline-0 [&amp;_*]:focus:ring-0 [&amp;_*]:focus:outline-0 [&amp;_pre>code]:pr-[3rem] [&amp;_pre>code>span.line-highlight]:min-w-[calc(100%+3rem)] [&amp;_pre>code>span.line-diff]:min-w-[calc(100%+3rem)] rounded-2xl bg-white overflow-x-auto scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-black/15 hover:scrollbar-thumb-black/20 active:scrollbar-thumb-black/20 dark:scrollbar-thumb-white/20 dark:hover:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25" data-component-part="code-block-root" tabindex="0" style="font-variant-ligatures: none; height: auto; background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E;"><div class="font-mono whitespace-pre leading-6"><pre class="shiki shiki-themes github-light-default dark-plus" style="background-color: rgb(255, 255, 255); --shiki-dark-bg: #0B0C0E; color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;" language="typescript"><code language="typescript" numberoflines="26"><span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> scheduleEvent</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;"> tool</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">  async</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> ({ </span><span style="color: rgb(149, 56, 0); --shiki-dark: #9CDCFE;">request</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> }) </span><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">=&gt;</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> {</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">    const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> result</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;"> await</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> calendarAgent</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">invoke</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">({</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">      messages:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> [{ </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">role:</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "user"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">, </span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">content:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> request</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;"> }]</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">    });</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #569CD6;">    const</span><span style="color: rgb(5, 80, 174); --shiki-dark: #4FC1FF;"> lastMessage</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> =</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> result</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">messages</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">[</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">result</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">messages</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(5, 80, 174); --shiki-dark: #9CDCFE;">length</span><span style="color: rgb(207, 34, 46); --shiki-dark: #D4D4D4;"> -</span><span style="color: rgb(5, 80, 174); --shiki-dark: #B5CEA8;"> 1</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">];</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(110, 119, 129); --shiki-dark: #6A9955;">    // Option 1: Return just the confirmation message</span></span>
<span class="line"><span style="color: rgb(207, 34, 46); --shiki-dark: #C586C0;">    return</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> lastMessage</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">text</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(110, 119, 129); --shiki-dark: #6A9955;">    // Option 2: Return structured data</span></span>
<span class="line"><span style="color: rgb(110, 119, 129); --shiki-dark: #6A9955;">    // return JSON.stringify({</span></span>
<span class="line"><span style="color: rgb(110, 119, 129); --shiki-dark: #6A9955;">    //   status: "success",</span></span>
<span class="line"><span style="color: rgb(110, 119, 129); --shiki-dark: #6A9955;">    //   event_id: "evt_123",</span></span>
<span class="line"><span style="color: rgb(110, 119, 129); --shiki-dark: #6A9955;">    //   summary: lastMessage.text</span></span>
<span class="line"><span style="color: rgb(110, 119, 129); --shiki-dark: #6A9955;">    // });</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">  },</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">  {</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">    name:</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "schedule_event"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">,</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">    description:</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;"> "Schedule calendar events using natural language."</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">,</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">    schema:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">object</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">({</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;">      request:</span><span style="color: rgb(31, 35, 40); --shiki-dark: #9CDCFE;"> z</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">.</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">string</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">().</span><span style="color: rgb(130, 80, 223); --shiki-dark: #DCDCAA;">describe</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">(</span><span style="color: rgb(10, 48, 105); --shiki-dark: #CE9178;">"Natural language scheduling request"</span><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">),</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">    }),</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">  }</span></span>
<span class="line"><span style="color: rgb(31, 35, 40); --shiki-dark: #D4D4D4;">);</span></span>
</code></pre></div></div></div>
<span data-as="p"><strong>Important:</strong> Make sure sub-agent prompts emphasize that their final message should contain all relevant information. A common failure mode is sub-agents that perform tool calls but donâ€™t include the results in their final response.</span>
<div class="callout my-4 px-5 py-4 overflow-hidden rounded-2xl flex gap-3 border border-emerald-500/20 bg-emerald-50/50 dark:border-emerald-500/30 dark:bg-emerald-500/10 [&amp;_[data-component-part='callout-icon']]:mt-px" data-callout-type="tip"><div class="mt-0.5 w-4" data-component-part="callout-icon"><svg width="11" height="14" viewBox="0 0 11 14" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="text-emerald-600 dark:text-emerald-400/80 w-3.5 h-auto" aria-label="Tip"><path d="M3.12794 12.4232C3.12794 12.5954 3.1776 12.7634 3.27244 12.907L3.74114 13.6095C3.88471 13.8248 4.21067 14 4.46964 14H6.15606C6.41415 14 6.74017 13.825 6.88373 13.6095L7.3508 12.9073C7.43114 12.7859 7.49705 12.569 7.49705 12.4232L7.50055 11.3513H3.12521L3.12794 12.4232ZM5.31288 0C2.52414 0.00875889 0.5 2.26889 0.5 4.78826C0.5 6.00188 0.949566 7.10829 1.69119 7.95492C2.14321 8.47011 2.84901 9.54727 3.11919 10.4557C3.12005 10.4625 3.12175 10.4698 3.12261 10.4771H7.50342C7.50427 10.4698 7.50598 10.463 7.50684 10.4557C7.77688 9.54727 8.48281 8.47011 8.93484 7.95492C9.67728 7.13181 10.1258 6.02703 10.1258 4.78826C10.1258 2.15486 7.9709 0.000106649 5.31288 0ZM7.94902 7.11267C7.52078 7.60079 6.99082 8.37878 6.6077 9.18794H4.02051C3.63739 8.37878 3.10743 7.60079 2.67947 7.11294C2.11997 6.47551 1.8126 5.63599 1.8126 4.78826C1.8126 3.09829 3.12794 1.31944 5.28827 1.3126C7.2435 1.3126 8.81315 2.88226 8.81315 4.78826C8.81315 5.63599 8.50688 6.47551 7.94902 7.11267ZM4.87534 2.18767C3.66939 2.18767 2.68767 3.16939 2.68767 4.37534C2.68767 4.61719 2.88336 4.81288 3.12521 4.81288C3.36705 4.81288 3.56274 4.61599 3.56274 4.37534C3.56274 3.6515 4.1515 3.06274 4.87534 3.06274C5.11719 3.06274 5.31288 2.86727 5.31288 2.62548C5.31288 2.38369 5.11599 2.18767 4.87534 2.18767Z"></path></svg></div><div class="text-sm prose dark:prose-invert min-w-0 w-full [&amp;_kbd]:bg-background-light dark:[&amp;_kbd]:bg-background-dark [&amp;_code]:!text-current [&amp;_kbd]:!text-current [&amp;_a]:!text-current [&amp;_a]:border-current text-emerald-900 dark:text-emerald-200" data-component-part="callout-content"><span data-as="p">For a complete working example that demonstrates the full supervisor pattern with human-in-the-loop review and advanced information flow control, check out <a href="https://github.com/langchain-ai/langchainjs/blob/main/examples/src/createAgent/supervisor_complete.ts" target="_blank" rel="noreferrer" class="link"><code>supervisor_complete.ts</code></a> in the LangChain.js examples.</span></div></div>
<h2 class="flex whitespace-pre-wrap group font-semibold" id="8-key-takeaways"><div class="absolute" tabindex="-1"><a href="#8-key-takeaways" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100 focus:opacity-100 focus:outline-0 group/link" aria-label="Navigate to header">â€‹<div class="w-6 h-6 rounded-md flex items-center justify-center shadow-sm text-gray-400 dark:text-white/50 dark:bg-background-dark dark:brightness-[1.35] dark:ring-1 dark:hover:brightness-150 bg-white ring-1 ring-gray-400/30 dark:ring-gray-700/25 hover:ring-gray-400/60 dark:hover:ring-white/20 group-focus/link:border-2 group-focus/link:border-primary dark:group-focus/link:border-primary-light"><svg xmlns="http://www.w3.org/2000/svg" fill="gray" height="12px" viewBox="0 0 576 512"><path d="M0 256C0 167.6 71.6 96 160 96h72c13.3 0 24 10.7 24 24s-10.7 24-24 24H160C98.1 144 48 194.1 48 256s50.1 112 112 112h72c13.3 0 24 10.7 24 24s-10.7 24-24 24H160C71.6 416 0 344.4 0 256zm576 0c0 88.4-71.6 160-160 160H344c-13.3 0-24-10.7-24-24s10.7-24 24-24h72c61.9 0 112-50.1 112-112s-50.1-112-112-112H344c-13.3 0-24-10.7-24-24s10.7-24 24-24h72c88.4 0 160 71.6 160 160zM184 232H392c13.3 0 24 10.7 24 24s-10.7 24-24 24H184c-13.3 0-24-10.7-24-24s10.7-24 24-24z"></path></svg></div></a></div><span class="cursor-pointer">8. Key takeaways</span></h2>
<span data-as="p">The supervisor pattern creates layers of abstraction where each layer has a clear responsibility. When designing a supervisor system, start with clear domain boundaries and give each sub-agent focused tools and prompts. Write clear tool descriptions for the supervisor, test each layer independently before integration, and control information flow based on your specific needs.</span>
<div class="callout my-4 px-5 py-4 overflow-hidden rounded-2xl flex gap-3 border border-emerald-500/20 bg-emerald-50/50 dark:border-emerald-500/30 dark:bg-emerald-500/10 [&amp;_[data-component-part='callout-icon']]:mt-px" data-callout-type="tip"><div class="mt-0.5 w-4" data-component-part="callout-icon"><svg width="11" height="14" viewBox="0 0 11 14" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="text-emerald-600 dark:text-emerald-400/80 w-3.5 h-auto" aria-label="Tip"><path d="M3.12794 12.4232C3.12794 12.5954 3.1776 12.7634 3.27244 12.907L3.74114 13.6095C3.88471 13.8248 4.21067 14 4.46964 14H6.15606C6.41415 14 6.74017 13.825 6.88373 13.6095L7.3508 12.9073C7.43114 12.7859 7.49705 12.569 7.49705 12.4232L7.50055 11.3513H3.12521L3.12794 12.4232ZM5.31288 0C2.52414 0.00875889 0.5 2.26889 0.5 4.78826C0.5 6.00188 0.949566 7.10829 1.69119 7.95492C2.14321 8.47011 2.84901 9.54727 3.11919 10.4557C3.12005 10.4625 3.12175 10.4698 3.12261 10.4771H7.50342C7.50427 10.4698 7.50598 10.463 7.50684 10.4557C7.77688 9.54727 8.48281 8.47011 8.93484 7.95492C9.67728 7.13181 10.1258 6.02703 10.1258 4.78826C10.1258 2.15486 7.9709 0.000106649 5.31288 0ZM7.94902 7.11267C7.52078 7.60079 6.99082 8.37878 6.6077 9.18794H4.02051C3.63739 8.37878 3.10743 7.60079 2.67947 7.11294C2.11997 6.47551 1.8126 5.63599 1.8126 4.78826C1.8126 3.09829 3.12794 1.31944 5.28827 1.3126C7.2435 1.3126 8.81315 2.88226 8.81315 4.78826C8.81315 5.63599 8.50688 6.47551 7.94902 7.11267ZM4.87534 2.18767C3.66939 2.18767 2.68767 3.16939 2.68767 4.37534C2.68767 4.61719 2.88336 4.81288 3.12521 4.81288C3.36705 4.81288 3.56274 4.61599 3.56274 4.37534C3.56274 3.6515 4.1515 3.06274 4.87534 3.06274C5.11719 3.06274 5.31288 2.86727 5.31288 2.62548C5.31288 2.38369 5.11599 2.18767 4.87534 2.18767Z"></path></svg></div><div class="text-sm prose dark:prose-invert min-w-0 w-full [&amp;_kbd]:bg-background-light dark:[&amp;_kbd]:bg-background-dark [&amp;_code]:!text-current [&amp;_kbd]:!text-current [&amp;_a]:!text-current [&amp;_a]:border-current text-emerald-900 dark:text-emerald-200" data-component-part="callout-content"><span data-as="p"><strong>When to use the supervisor pattern</strong></span><span data-as="p">Use the supervisor pattern when you have multiple distinct domains (calendar, email, CRM, database), each domain has multiple tools or complex logic, you want centralized workflow control, and sub-agents donâ€™t need to converse directly with users.</span><span data-as="p">For simpler cases with just a few tools, use a single agent. When agents need to have conversations with users, use <a class="link" href="/oss/javascript/langchain/multi-agent#handoffs">handoffs</a> instead. For peer-to-peer collaboration between agents, consider other multi-agent patterns.</span></div></div>
<h2 class="flex whitespace-pre-wrap group font-semibold" id="next-steps"><div class="absolute" tabindex="-1"><a href="#next-steps" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100 focus:opacity-100 focus:outline-0 group/link" aria-label="Navigate to header">â€‹<div class="w-6 h-6 rounded-md flex items-center justify-center shadow-sm text-gray-400 dark:text-white/50 dark:bg-background-dark dark:brightness-[1.35] dark:ring-1 dark:hover:brightness-150 bg-white ring-1 ring-gray-400/30 dark:ring-gray-700/25 hover:ring-gray-400/60 dark:hover:ring-white/20 group-focus/link:border-2 group-focus/link:border-primary dark:group-focus/link:border-primary-light"><svg xmlns="http://www.w3.org/2000/svg" fill="gray" height="12px" viewBox="0 0 576 512"><path d="M0 256C0 167.6 71.6 96 160 96h72c13.3 0 24 10.7 24 24s-10.7 24-24 24H160C98.1 144 48 194.1 48 256s50.1 112 112 112h72c13.3 0 24 10.7 24 24s-10.7 24-24 24H160C71.6 416 0 344.4 0 256zm576 0c0 88.4-71.6 160-160 160H344c-13.3 0-24-10.7-24-24s10.7-24 24-24h72c61.9 0 112-50.1 112-112s-50.1-112-112-112H344c-13.3 0-24-10.7-24-24s10.7-24 24-24h72c88.4 0 160 71.6 160 160zM184 232H392c13.3 0 24 10.7 24 24s-10.7 24-24 24H184c-13.3 0-24-10.7-24-24s10.7-24 24-24z"></path></svg></div></a></div><span class="cursor-pointer">Next steps</span></h2>
<span data-as="p">Learn about <a class="link" href="/oss/javascript/langchain/multi-agent#handoffs">handoffs</a> for agent-to-agent conversations, explore <a class="link" href="/oss/javascript/langchain/context-engineering">context engineering</a> to fine-tune information flow, read the <a class="link" href="/oss/javascript/langchain/multi-agent">multi-agent overview</a> to compare different patterns, and use <a href="https://smith.langchain.com" target="_blank" rel="noreferrer" class="link">LangSmith</a> to debug and monitor your multi-agent system.</span>
<hr>
<div class="callout my-4 px-5 py-4 overflow-hidden rounded-2xl flex gap-3 border border-zinc-500/20 bg-zinc-50/50 dark:border-zinc-500/30 dark:bg-zinc-500/10" data-callout-type="callout"><div class="mt-0.5 w-4" data-component-part="callout-icon"><svg class="h-4 w-4 !m-0 shrink-0 bg-gray-800 dark:bg-gray-100" style="mask-image: url(&quot;https://d3gk2c5xim1je2.cloudfront.net/v7.1.0/regular/pen-to-square.svg&quot;); mask-repeat: no-repeat; -webkit-mask-position-x: center; -webkit-mask-position-y: center;"></svg></div><div class="text-sm prose dark:prose-invert min-w-0 w-full [&amp;_kbd]:bg-background-light dark:[&amp;_kbd]:bg-background-dark [&amp;_code]:!text-current [&amp;_kbd]:!text-current [&amp;_a]:!text-current [&amp;_a]:border-current text-zinc-900 dark:text-zinc-200" data-component-part="callout-content"><span data-as="p"><a href="https://github.com/langchain-ai/docs/edit/main/src/oss/langchain/supervisor.mdx" target="_blank" rel="noreferrer" class="link">Edit the source of this page on GitHub.</a></span></div></div>
<div class="callout my-4 px-5 py-4 overflow-hidden rounded-2xl flex gap-3 border border-emerald-500/20 bg-emerald-50/50 dark:border-emerald-500/30 dark:bg-emerald-500/10 [&amp;_[data-component-part='callout-icon']]:mt-px" data-callout-type="tip"><div class="mt-0.5 w-4" data-component-part="callout-icon"><svg width="11" height="14" viewBox="0 0 11 14" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="text-emerald-600 dark:text-emerald-400/80 w-3.5 h-auto" aria-label="Tip"><path d="M3.12794 12.4232C3.12794 12.5954 3.1776 12.7634 3.27244 12.907L3.74114 13.6095C3.88471 13.8248 4.21067 14 4.46964 14H6.15606C6.41415 14 6.74017 13.825 6.88373 13.6095L7.3508 12.9073C7.43114 12.7859 7.49705 12.569 7.49705 12.4232L7.50055 11.3513H3.12521L3.12794 12.4232ZM5.31288 0C2.52414 0.00875889 0.5 2.26889 0.5 4.78826C0.5 6.00188 0.949566 7.10829 1.69119 7.95492C2.14321 8.47011 2.84901 9.54727 3.11919 10.4557C3.12005 10.4625 3.12175 10.4698 3.12261 10.4771H7.50342C7.50427 10.4698 7.50598 10.463 7.50684 10.4557C7.77688 9.54727 8.48281 8.47011 8.93484 7.95492C9.67728 7.13181 10.1258 6.02703 10.1258 4.78826C10.1258 2.15486 7.9709 0.000106649 5.31288 0ZM7.94902 7.11267C7.52078 7.60079 6.99082 8.37878 6.6077 9.18794H4.02051C3.63739 8.37878 3.10743 7.60079 2.67947 7.11294C2.11997 6.47551 1.8126 5.63599 1.8126 4.78826C1.8126 3.09829 3.12794 1.31944 5.28827 1.3126C7.2435 1.3126 8.81315 2.88226 8.81315 4.78826C8.81315 5.63599 8.50688 6.47551 7.94902 7.11267ZM4.87534 2.18767C3.66939 2.18767 2.68767 3.16939 2.68767 4.37534C2.68767 4.61719 2.88336 4.81288 3.12521 4.81288C3.36705 4.81288 3.56274 4.61599 3.56274 4.37534C3.56274 3.6515 4.1515 3.06274 4.87534 3.06274C5.11719 3.06274 5.31288 2.86727 5.31288 2.62548C5.31288 2.38369 5.11599 2.18767 4.87534 2.18767Z"></path></svg></div><div class="text-sm prose dark:prose-invert min-w-0 w-full [&amp;_kbd]:bg-background-light dark:[&amp;_kbd]:bg-background-dark [&amp;_code]:!text-current [&amp;_kbd]:!text-current [&amp;_a]:!text-current [&amp;_a]:border-current text-emerald-900 dark:text-emerald-200" data-component-part="callout-content"><span data-as="p"><a class="link" href="/use-these-docs">Connect these docs programmatically</a> to Claude, VSCode, and more via MCP for real-time answers.</span></div></div></div><div class="feedback-toolbar pb-16 w-full flex flex-col gap-y-8"><div class="flex flex-col gap-4 xl:flex-col xl:gap-6 min-[1400px]:flex-row min-[1400px]:items-center md:flex-row md:justify-end"><div class="w-full flex flex-col gap-y-6"><div class="flex flex-row gap-5 items-center grow justify-between md:justify-start xl:justify-between min-[1400px]:justify-start"><p class="text-sm text-gray-600 dark:text-gray-400">Was this page helpful?</p><div class="flex flex-row gap-3 items-center"><button class="px-3.5 py-2 flex flex-row gap-3 items-center border-standard rounded-xl text-gray-600 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 bg-white/50 dark:bg-codeblock/50 hover:border-gray-500 hover:dark:border-gray-500"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" class="fill-current"><path d="M10.1187 1.08741C8.925 0.746789 7.67813 1.43741 7.3375 2.63116L7.15938 3.25616C7.04375 3.66241 6.83438 4.03741 6.55 4.34991L4.94688 6.11241C4.66875 6.41866 4.69062 6.89366 4.99687 7.17179C5.30312 7.44991 5.77813 7.42804 6.05625 7.12179L7.65938 5.35929C8.1 4.87491 8.42188 4.29679 8.6 3.66866L8.77812 3.04366C8.89062 2.64679 9.30625 2.41554 9.70625 2.52804C10.1063 2.64054 10.3344 3.05616 10.2219 3.45616L10.0437 4.08116C9.86562 4.70304 9.58437 5.29054 9.2125 5.81554C9.05 6.04366 9.03125 6.34366 9.15938 6.59366C9.2875 6.84366 9.54375 6.99991 9.825 6.99991H14C14.275 6.99991 14.5 7.22491 14.5 7.49991C14.5 7.71241 14.3656 7.89679 14.175 7.96866C13.9438 8.05616 13.7688 8.24992 13.7094 8.49054C13.65 8.73117 13.7125 8.98429 13.875 9.16866C13.9531 9.25616 14 9.37179 14 9.49991C14 9.74366 13.825 9.94679 13.5938 9.99054C13.3375 10.0405 13.1219 10.2187 13.0312 10.4624C12.9406 10.7062 12.9813 10.9843 13.1438 11.1905C13.2094 11.2749 13.25 11.3812 13.25 11.4999C13.25 11.7093 13.1187 11.8937 12.9312 11.9655C12.5719 12.1062 12.3781 12.4937 12.4812 12.8655C12.4937 12.9062 12.5 12.953 12.5 12.9999C12.5 13.2749 12.275 13.4999 12 13.4999H8.95312C8.55937 13.4999 8.17188 13.3843 7.84375 13.1655L5.91563 11.8812C5.57188 11.6499 5.10625 11.7437 4.875 12.0905C4.64375 12.4374 4.7375 12.8999 5.08437 13.1312L7.0125 14.4155C7.5875 14.7999 8.2625 15.003 8.95312 15.003H12C13.0844 15.003 13.9656 14.1405 14 13.0655C14.4563 12.6999 14.75 12.1374 14.75 11.503C14.75 11.3624 14.7344 11.228 14.7094 11.0968C15.1906 10.7312 15.5 10.153 15.5 9.50304C15.5 9.29991 15.4688 9.10304 15.4125 8.91866C15.775 8.55304 16 8.05304 16 7.49991C16 6.39679 15.1063 5.49991 14 5.49991H11.1156C11.2625 5.17491 11.3875 4.83741 11.4844 4.49366L11.6625 3.86866C12.0031 2.67491 11.3125 1.42804 10.1187 1.08741ZM1 5.99991C0.446875 5.99991 0 6.44679 0 6.99991V13.9999C0 14.553 0.446875 14.9999 1 14.9999H3C3.55313 14.9999 4 14.553 4 13.9999V6.99991C4 6.44679 3.55313 5.99991 3 5.99991H1Z"></path></svg><small class="text-sm font-normal leading-4">Yes</small></button><button class="px-3.5 py-2 flex flex-row gap-3 items-center border-standard rounded-xl text-gray-600 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 bg-white/50 dark:bg-codeblock/50 hover:border-gray-500 hover:dark:border-gray-500"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" class="fill-current"><path d="M10.1187 14.9124C8.925 15.253 7.67813 14.5624 7.3375 13.3687L7.15938 12.7437C7.04375 12.3374 6.83438 11.9624 6.55 11.6499L4.94688 9.8874C4.66875 9.58115 4.69062 9.10615 4.99687 8.82803C5.30312 8.5499 5.77813 8.57178 6.05625 8.87803L7.65938 10.6405C8.1 11.1249 8.42188 11.703 8.6 12.3312L8.77812 12.9562C8.89062 13.353 9.30625 13.5843 9.70625 13.4718C10.1063 13.3593 10.3344 12.9437 10.2219 12.5437L10.0437 11.9187C9.86562 11.2968 9.58437 10.7093 9.2125 10.1843C9.05 9.95615 9.03125 9.65615 9.15938 9.40615C9.2875 9.15615 9.54375 8.9999 9.825 8.9999H14C14.275 8.9999 14.5 8.7749 14.5 8.4999C14.5 8.2874 14.3656 8.10303 14.175 8.03115C13.9438 7.94365 13.7688 7.7499 13.7094 7.50928C13.65 7.26865 13.7125 7.01553 13.875 6.83115C13.9531 6.74365 14 6.62803 14 6.4999C14 6.25615 13.825 6.05303 13.5938 6.00928C13.3375 5.95928 13.1219 5.78115 13.0312 5.53428C12.9406 5.2874 12.9813 5.0124 13.1438 4.80615C13.2094 4.72178 13.25 4.61553 13.25 4.49678C13.25 4.2874 13.1187 4.10303 12.9312 4.03115C12.5719 3.89053 12.3781 3.50303 12.4812 3.13115C12.4937 3.09053 12.5 3.04365 12.5 2.99678C12.5 2.72178 12.275 2.49678 12 2.49678H8.95312C8.55937 2.49678 8.17188 2.6124 7.84375 2.83115L5.91563 4.11553C5.57188 4.34678 5.10625 4.25303 4.875 3.90615C4.64375 3.55928 4.7375 3.09678 5.08437 2.86553L7.0125 1.58115C7.5875 1.19678 8.2625 0.993652 8.95312 0.993652H12C13.0844 0.993652 13.9656 1.85615 14 2.93115C14.4563 3.29678 14.75 3.85928 14.75 4.49365C14.75 4.63428 14.7344 4.76865 14.7094 4.8999C15.1906 5.26553 15.5 5.84365 15.5 6.49365C15.5 6.69678 15.4688 6.89365 15.4125 7.07803C15.775 7.44678 16 7.94678 16 8.4999C16 9.60303 15.1063 10.4999 14 10.4999H11.1156C11.2625 10.8249 11.3875 11.1624 11.4844 11.5062L11.6625 12.1312C12.0031 13.3249 11.3125 14.5718 10.1187 14.9124ZM1 11.9999C0.446875 11.9999 0 11.553 0 10.9999V3.9999C0 3.44678 0.446875 2.9999 1 2.9999H3C3.55313 2.9999 4 3.44678 4 3.9999V10.9999C4 11.553 3.55313 11.9999 3 11.9999H1Z"></path></svg><small class="text-sm font-normal leading-4">No</small></button></div></div></div><div class="flex flex-row gap-3 justify-end"></div></div></div><div id="pagination" class="grid lg:grid-cols-2 gap-4"><a class="border border-gray-200/70 dark:border-gray-800/70 group flex items-center rounded-xl py-3 px-4 hover:border-gray-300 dark:hover:border-gray-700 justify-start" href="/oss/javascript/langchain/sql-agent"><div class="space-y-1"><div class="font-medium text-gray-900 dark:text-gray-200">Build a SQL agent</div><div class="flex items-center text-sm text-gray-500 dark:text-gray-500 group-hover:text-gray-600 dark:group-hover:text-gray-400 gap-x-1"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-left size-3.5 text-gray-400 dark:text-gray-600 group-hover:text-gray-500 dark:group-hover:text-gray-500"><path d="m15 18-6-6 6-6"></path></svg><span class="font-medium">Previous</span></div></div></a><a class="border border-gray-200/70 dark:border-gray-800/70 group flex items-center rounded-xl py-3 px-4 hover:border-gray-300 dark:hover:border-gray-700 justify-end" href="/oss/javascript/langgraph/agentic-rag"><div class="space-y-1"><div class="font-medium text-gray-900 dark:text-gray-200 text-right">Build a custom RAG agent with LangGraph</div><div class="flex items-center text-sm text-gray-500 dark:text-gray-500 group-hover:text-gray-600 dark:group-hover:text-gray-400 gap-x-1 flex-row-reverse"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right size-3.5 text-gray-400 dark:text-gray-600 group-hover:text-gray-500 dark:group-hover:text-gray-500"><path d="m9 18 6-6-6-6"></path></svg><span class="font-medium">Next</span></div></div></a></div><div class="left-0 right-0 sticky sm:px-4 pb-4 sm:pb-6 bottom-0 pt-1 flex flex-col items-center w-full overflow-hidden z-20"><div class="chat-assistant-floating-input z-10 w-full sm:w-80 focus-within:w-full sm:focus-within:w-[26rem] hover:scale-100 sm:hover:scale-105 focus-within:hover:scale-100 [transition:width_400ms,left_200ms,transform_500ms,opacity_200ms]"><div class="transition-all duration-300 translate-y-[100px] opacity-0"><div class="pl-5 pr-3 border border-gray-950/20 dark:border-white/20 rounded-2xl bg-background-light/90 dark:bg-background-dark/90 backdrop-blur-xl shadow-2xl shadow-gray-900/5 flex items-center justify-between focus-within:border-primary dark:focus-within:border-primary-light transition-colors duration-400"><input placeholder="Ask a question..." aria-label="Ask a question..." class="py-3 flex-1 bg-transparent text-gray-800 dark:text-gray-200 placeholder-gray-600 dark:placeholder-gray-400 outline-none outline-0 text-base sm:text-sm" type="text" value=""><span class="text-xs font-semibold select-none pointer-events-none hidden lg:inline mx-2">âŒ˜I</span><button class="chat-assistant-send-button flex justify-center items-center p-1 size-7 rounded-full bg-primary/30 dark:bg-primary-dark/30" aria-label="Send message" disabled=""><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-up size-5 text-white dark:text-white"><path d="m5 12 7-7 7 7"></path><path d="M12 19V5"></path></svg></button></div></div></div></div></div>