# Agent Architecture - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω —Å createAgent

## ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞

**–ë—ã–ª–æ:** –ê–≥–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –∂–µ—Å—Ç–∫—É—é –ª–æ–≥–∏–∫—É, –Ω–µ –º–æ–≥–ª–∏ "–¥—É–º–∞—Ç—å —Å–∞–º–∏"
**–°—Ç–∞–ª–æ:** –ê–≥–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `createAgent` —Å LangChain tools –∏ –∞–≤—Ç–æ–Ω–æ–º–Ω–æ –ø—Ä–∏–Ω–∏–º–∞—é—Ç —Ä–µ—à–µ–Ω–∏—è

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∞–≥–µ–Ω—Ç–æ–≤

### –î–≤–∞ —Ç–∏–ø–∞ –∞–≥–µ–Ω—Ç–æ–≤:

#### 1. **SimpleAgent** - –ü—Ä–æ—Å—Ç—ã–µ –∞–≥–µ–Ω—Ç—ã –ë–ï–ó AI

–î–ª—è –∞–≥–µ–Ω—Ç–æ–≤ —Å –∂–µ—Å—Ç–∫–æ–π –ª–æ–≥–∏–∫–æ–π, –Ω–µ —Ç—Ä–µ–±—É—é—â–∏—Ö –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π:

```typescript
import { SimpleAgent } from './simpleAgent.js';

export class MyAgent extends SimpleAgent {
  constructor() {
    super('MyAgentName');
  }

  async doSomething() {
    return this.execute(async () => {
      // –ü—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞ –±–µ–∑ AI
      return result;
    });
  }
}
```

**–ò—Å–ø–æ–ª—å–∑—É—é—Ç:**
- `DataCollectorAgent` - –ø—Ä–æ—Å—Ç–æ —Å–æ–±–∏—Ä–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- `IndustryClassifierAgent` - –ø—Ä–æ—Å—Ç–æ –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç withStructuredOutput)
- `AnalyzerAgent` - –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø–æ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å—Ö–µ–º–µ
- `EventTrackerAgent` - —Ç—Ä–µ–∫–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è
- `AlerterAgent` - –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∞–ª–µ—Ä—Ç—ã
- `ReportGeneratorAgent` - –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç—á–µ—Ç—ã

#### 2. **ThinkingAgent** (BaseAgent) - "–î—É–º–∞—é—â–∏–µ" –∞–≥–µ–Ω—Ç—ã —Å AI

–î–ª—è –∞–≥–µ–Ω—Ç–æ–≤ –∫–æ—Ç–æ—Ä—ã–µ –°–ê–ú–ò –ø—Ä–∏–Ω–∏–º–∞—é—Ç —Ä–µ—à–µ–Ω–∏—è:

```typescript
import { ThinkingAgent } from './baseAgent.js';
import { tool1, tool2 } from '../tools/index.js';

export class MySmartAgent extends ThinkingAgent {
  constructor() {
    super(
      'MySmartAgent',
      [tool1, tool2],  // –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –∞–≥–µ–Ω—Ç–∞
      `–¢—ã - —É–º–Ω—ã–π –∞–≥–µ–Ω—Ç. –¢–≤–æ—è –∑–∞–¥–∞—á–∞...
       –ò—Å–ø–æ–ª—å–∑—É–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã...`
    );
  }

  async think(input: string) {
    return this.execute(async () => {
      // –ê–≥–µ–Ω—Ç –°–ê–ú —Ä–µ—à–∞–µ—Ç –∫–∞–∫–∏–µ tools –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å!
      const response = await this.invokeAgent(input);
      return this.parseResponse(response);
    });
  }
}
```

**–ò—Å–ø–æ–ª—å–∑—É—é—Ç:**
- `MarketResearcherAgent` - –°–ê–ú —Ä–µ—à–∞–µ—Ç –∫–∞–∫–∏–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –ø—Ä–æ–≤–µ—Å—Ç–∏
- `OrchestratorAgent` (–±—É–¥—É—â–µ–µ) - –°–ê–ú –∫–æ–æ—Ä–¥–∏–Ω–∏—Ä—É–µ—Ç –¥—Ä—É–≥–∏—Ö –∞–≥–µ–Ω—Ç–æ–≤

## üìä –°—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã ThinkingAgent

```
User Request
    ‚Üì
Agent.invokeAgent("–ò—Å—Å–ª–µ–¥—É–π —Ä—ã–Ω–æ–∫ –¥–ª—è X")
    ‚Üì
LangChain createAgent
    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  AI Reasoning Loop              ‚îÇ
‚îÇ                                 ‚îÇ
‚îÇ  1. –ß–∏—Ç–∞–µ—Ç –∑–∞–ø—Ä–æ—Å              ‚îÇ
‚îÇ  2. –†–µ—à–∞–µ—Ç: –Ω—É–∂–Ω—ã –ª–∏ tools?    ‚îÇ
‚îÇ  3. –í—ã–±–∏—Ä–∞–µ—Ç tool              ‚îÇ
‚îÇ  4. –í—ã–∑—ã–≤–∞–µ—Ç tool              ‚îÇ
‚îÇ  5. –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç      ‚îÇ
‚îÇ  6. –†–µ—à–∞–µ—Ç: –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ?        ‚îÇ
‚îÇ  7. –ü–æ–≤—Ç–æ—Ä—è–µ—Ç 2-6 –∏–ª–∏ –æ—Ç–≤–µ—á–∞–µ—Ç ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    ‚Üì
Response
```

## üéØ –ü—Ä–∏–º–µ—Ä: MarketResearcherAgent

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:

```typescript
constructor() {
  super(
    'MarketResearcher',
    [
      researchMarketTool,      // –†—ã–Ω–æ—á–Ω—ã–µ —Ç—Ä–µ–Ω–¥—ã
      getTopTechnologiesTool,  // –¢–æ–ø —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
      getTechDemandTool,       // –°–ø—Ä–æ—Å –Ω–∞ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—é
    ],
    `–¢—ã - Market Researcher Agent...
     
     –î–æ—Å—Ç—É–ø–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:
     1. research_market - –æ–±—â–∏–µ —Ç—Ä–µ–Ω–¥—ã
     2. get_top_technologies - —Ç–æ–ø —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
     3. get_tech_demand - —Å–ø—Ä–æ—Å –Ω–∞ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—é
     
     –°—Ç—Ä–∞—Ç–µ–≥–∏—è:
     1. –ù–∞—á–Ω–∏ —Å research_market
     2. –ò—Å–ø–æ–ª—å–∑—É–π get_top_technologies
     3. –ü—Ä–æ–≤–µ—Ä—å —Å–ø—Ä–æ—Å —á–µ—Ä–µ–∑ get_tech_demand
     4. –î–∞–π —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑`
  );
}
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

```typescript
const result = await marketResearcherAgent.research('–ò–Ω–Ω–æ–ø–æ–ª–∏—Å', collectedData);

// –í–Ω—É—Ç—Ä–∏ –∞–≥–µ–Ω—Ç:
// 1. –ü–æ–ª—É—á–∏–ª –∑–∞–ø—Ä–æ—Å "–ò—Å—Å–ª–µ–¥—É–π —Ä—ã–Ω–æ–∫ –¥–ª—è –ò–Ω–Ω–æ–ø–æ–ª–∏—Å"
// 2. –†–µ—à–∏–ª: "–ù—É–∂–µ–Ω research_market" ‚Üí –≤—ã–∑–≤–∞–ª tool
// 3. –ü–æ–ª—É—á–∏–ª —Ä–µ–∑—É–ª—å—Ç–∞—Ç, —Ä–µ—à–∏–ª: "–ù—É–∂–Ω—ã —Ç–æ–ø —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏" ‚Üí –≤—ã–∑–≤–∞–ª tool
// 4. –†–µ—à–∏–ª: "–ü—Ä–æ–≤–µ—Ä—é —Å–ø—Ä–æ—Å –Ω–∞ Python" ‚Üí –≤—ã–∑–≤–∞–ª tool
// 5. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª –≤—Å–µ –¥–∞–Ω–Ω—ã–µ
// 6. –í–µ—Ä–Ω—É–ª —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
backend/src/core/langchain/agents/
‚îú‚îÄ‚îÄ simpleAgent.ts         # ‚Üê –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤
‚îú‚îÄ‚îÄ baseAgent.ts           # ‚Üê –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –¥—É–º–∞—é—â–∏—Ö –∞–≥–µ–Ω—Ç–æ–≤ (ThinkingAgent)
‚îú‚îÄ‚îÄ legacy-mainAgent.ts    # ‚Üê –ü—Ä–∏–º–µ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø–∞—Ç—Ç–µ—Ä–Ω–∞
‚îÇ
‚îú‚îÄ‚îÄ dataCollectorAgent.ts      # SimpleAgent (–±–µ–∑ AI)
‚îú‚îÄ‚îÄ industryClassifierAgent.ts # SimpleAgent (withStructuredOutput)
‚îú‚îÄ‚îÄ analyzerAgent.ts           # SimpleAgent (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑)
‚îú‚îÄ‚îÄ eventTrackerAgent.ts       # SimpleAgent
‚îú‚îÄ‚îÄ alerterAgent.ts            # SimpleAgent
‚îú‚îÄ‚îÄ reportGeneratorAgent.ts    # SimpleAgent
‚îÇ
‚îú‚îÄ‚îÄ marketResearcherAgent.ts   # ThinkingAgent ‚úÖ (–¥—É–º–∞–µ—Ç!)
‚îî‚îÄ‚îÄ orchestratorAgent.ts       # ThinkingAgent (–±—É–¥—É—â–µ–µ)
```

## üéì –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —á—Ç–æ?

### –ò—Å–ø–æ–ª—å–∑—É–π **SimpleAgent** –µ—Å–ª–∏:
- ‚úÖ –õ–æ–≥–∏–∫–∞ –∂–µ—Å—Ç–∫–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞
- ‚úÖ –ù–µ –Ω—É–∂–Ω–æ –≤—ã–±–∏—Ä–∞—Ç—å –º–µ–∂–¥—É –¥–µ–π—Å—Ç–≤–∏—è–º–∏
- ‚úÖ –ü—Ä–æ—Å—Ç–æ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –≤—ã–∑–æ–≤ API
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è withStructuredOutput –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏

### –ò—Å–ø–æ–ª—å–∑—É–π **ThinkingAgent** –µ—Å–ª–∏:
- ‚úÖ –ê–≥–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –°–ê–ú –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Ä–µ—à–µ–Ω–∏—è
- ‚úÖ –ï—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ tools –Ω–∞ –≤—ã–±–æ—Ä
- ‚úÖ –ù—É–∂–µ–Ω reasoning loop (–¥—É–º–∞—Ç—å ‚Üí –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å ‚Üí –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å)
- ‚úÖ –ó–∞–¥–∞—á–∞ —Ç—Ä–µ–±—É–µ—Ç –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç–∏

## üî• –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **–ê–≤—Ç–æ–Ω–æ–º–Ω–æ—Å—Ç—å:** –ê–≥–µ–Ω—Ç—ã —Å–∞–º–∏ —Ä–µ—à–∞—é—Ç –∫–∞–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
2. **–ì–∏–±–∫–æ—Å—Ç—å:** –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ tools –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞ –∞–≥–µ–Ω—Ç–∞
3. **Reasoning:** –ê–≥–µ–Ω—Ç—ã –º–æ–≥—É—Ç –¥–µ–ª–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —à–∞–≥–æ–≤, –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
4. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:** –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã—Ö –¥—É–º–∞—é—â–∏—Ö –∞–≥–µ–Ω—Ç–æ–≤

## üìù Roadmap

- [x] –°–æ–∑–¥–∞—Ç—å SimpleAgent –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤
- [x] –°–æ–∑–¥–∞—Ç—å ThinkingAgent (BaseAgent) –¥–ª—è –¥—É–º–∞—é—â–∏—Ö –∞–≥–µ–Ω—Ç–æ–≤
- [x] –ü–µ—Ä–µ–¥–µ–ª–∞—Ç—å MarketResearcherAgent –∫–∞–∫ –¥—É–º–∞—é—â–∏–π
- [x] –û–±–Ω–æ–≤–∏—Ç—å –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∞–≥–µ–Ω—Ç—ã –Ω–∞ SimpleAgent
- [ ] –ü–µ—Ä–µ–¥–µ–ª–∞—Ç—å OrchestratorAgent –∫–∞–∫ –¥—É–º–∞—é—â–∏–π (—Å tools –¥–ª—è –≤—ã–∑–æ–≤–∞ –¥—Ä—É–≥–∏—Ö –∞–≥–µ–Ω—Ç–æ–≤)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ tools –¥–ª—è –∞–≥–µ–Ω—Ç–æ–≤
- [ ] –£–ª—É—á—à–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –æ—Ç LangChain agent

## üéâ –ò—Ç–æ–≥

–¢–µ–ø–µ—Ä—å –∞–≥–µ–Ω—Ç—ã –ø–æ—Å—Ç—Ä–æ–µ–Ω—ã –ø–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É –ø–∞—Ç—Ç–µ—Ä–Ω—É –∏–∑ `legacy-mainAgent.ts`:
- **ThinkingAgent** –∏—Å–ø–æ–ª—å–∑—É—é—Ç `createAgent` —Å tools
- –ê–≥–µ–Ω—Ç—ã **–°–ê–ú–ò –¥—É–º–∞—é—Ç** –∏ –ø—Ä–∏–Ω–∏–º–∞—é—Ç —Ä–µ—à–µ–Ω–∏—è
- **–õ–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è–µ—Ç—Å—è** –Ω–æ–≤—ã–º–∏ tools –∏ –∞–≥–µ–Ω—Ç–∞–º–∏

