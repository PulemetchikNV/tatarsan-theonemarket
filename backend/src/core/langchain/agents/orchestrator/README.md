# Orchestrator Agent - ะะปะฐะฒะฝัะน ะบะพะพัะดะธะฝะฐัะพั

## ๐ฏ ะะฐะทะฝะฐัะตะฝะธะต

**OrchestratorAgent** - ััะพ "ะดัะผะฐััะธะน" ะฐะณะตะฝั ะบะพัะพััะน ะฐะฒัะพะฝะพะผะฝะพ ัะฟัะฐะฒะปัะตั ะฟัะพัะตััะพะผ ะฐะฝะฐะปะธะทะฐ ะบะพะผะฟะฐะฝะธะน.

ะ ะพัะปะธัะธะต ะพั ััะฐัะพะน ะฒะตััะธะธ (legacy-orchestratorAgent.ts) ะบะพัะพัะฐั ะธะผะตะปะฐ ะถะตััะบัั ะปะพะณะธะบั, ะฝะพะฒัะน ะพัะบะตัััะฐัะพั:
- โ ะกะะ ัะตัะฐะตั ะบะพะณะดะฐ ะฒัะทัะฒะฐัั ะบะฐะบะธะต ะธะฝััััะผะตะฝัั
- โ ะกะะ ะพะฑัะฐะฑะฐััะฒะฐะตั ะพัะธะฑะบะธ ะธ ะฒัะฑะธัะฐะตั ัััะฐัะตะณะธั
- โ ะกะะ ะพะฟัะตะดะตะปัะตั ะบะพะณะดะฐ ะฟะตัะตัะพะดะธัั ะบ ัะปะตะดัััะตะน ัะฐะทะต
- โ ะัะฟะพะปัะทัะตั LangChain `createAgent` ั tools

## ๐๏ธ ะััะธัะตะบัััะฐ

### ะกัััะบัััะฐ ะฟะฐะฟะบะธ

```
orchestrator/
โโโ index.ts              # ะะปะฐะฒะฝัะน OrchestratorAgent
โโโ types.ts              # ะะตะปะตะทะฝัะต ะบะพะฝััะฐะบัั ะดะปั tools
โโโ tools/                # Tools ะดะปั ะฒัะทะพะฒะฐ ะดััะณะธั ะฐะณะตะฝัะพะฒ
โ   โโโ collectDataTool.ts      # ะคะะะ 1
โ   โโโ analyzeDataTool.ts      # ะคะะะ 2.1
โ   โโโ classifyIndustryTool.ts # ะคะะะ 2.2
โ   โโโ researchMarketTool.ts   # ะคะะะ 2.3
โ   โโโ generateReportTool.ts   # ะคะะะ 3
โ   โโโ index.ts                # ะญะบัะฟะพััั tools
โโโ README.md            # ะญัะฐ ะดะพะบัะผะตะฝัะฐัะธั
```

### ะกัะตะผะฐ ะฒัะฟะพะปะฝะตะฝะธั

```
User Request: "ะัะพะฐะฝะฐะปะธะทะธััะน ะบะพะผะฟะฐะฝะธั X"
    โ
OrchestratorAgent.analyzeCompany("X")
    โ
LangChain Agent (ะดัะผะฐะตั ะธ ะฒัะฑะธัะฐะตั tools)
    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ะคะะะ 1: ะกะะะ ะะะะะซะฅ                     โ
โ   โโ collect_data                       โ
โ      โโ HH.ru ะฒะฐะบะฐะฝัะธะธ                  โ
โ      โโ GitHub ัะตะฟะพะทะธัะพัะธะธ              โ
โ      โโ Habr ััะฐััะธ                     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
    โ collectedData (JSON)
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ะคะะะ 2: ะะะะะะ (ะฟะฐัะฐะปะปะตะปัะฝะพ)            โ
โ   โโ analyze_data                       โ
โ   โ  โโ Sentiment, strengths, weaknessesโ
โ   โโ classify_industry                  โ
โ   โ  โโ Tech-ะธะฝะดััััะธั, ััะฐะดะธั ัะฐะทะฒะธัะธั โ
โ   โโ research_market                    โ
โ      โโ ะขัะตะฝะดั, ัะฟัะพั, ะบะพะฝะบััะตะฝัั       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
    โ analysisResult (JSON)
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ะคะะะ 3: ะะะะะะะฆะะฏ ะะขะงะะขะ                โ
โ   โโ generate_report                    โ
โ      โโ JSON/HTML ะดะปั ััะพะฝัะตะฝะดะฐ         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
    โ
CompanyAnalysisResult
```

## ๐ Tools ะธ ะถะตะปะตะทะฝัะต ะบะพะฝััะฐะบัั

### ะคะะะ 1: ะกะฑะพั ะดะฐะฝะฝัั

#### `collect_data`
```typescript
Input: { companyName: string }
Output: DataCollectionOutput {
  success: boolean
  data?: DataCollectorResult
  error?: string
  executionTime: number
}
```

**ะงัะพ ะดะตะปะฐะตั:**
- ะัะทัะฒะฐะตั DataCollectorAgent
- ะกะพะฑะธัะฐะตั ะดะฐะฝะฝัะต ะธะท HH.ru, GitHub, Habr
- ะะพะทะฒัะฐัะฐะตั ััััะบัััะธัะพะฒะฐะฝะฝัะต ะดะฐะฝะฝัะต

**ะะพะณะดะฐ ะธัะฟะพะปัะทะพะฒะฐัั:**
- ะญะขะ ะะะะะซะ ะจะะ! ะัะตะณะดะฐ ะฝะฐัะธะฝะฐะน ั ะฝะตะณะพ
- ะะตะท ััะธั ะดะฐะฝะฝัั ะฝะตะฒะพะทะผะพะถะฝะฐ ะคะะะ 2

---

### ะคะะะ 2: ะะฝะฐะปะธะท (ะฟะฐัะฐะปะปะตะปัะฝะพ)

#### `analyze_data`
```typescript
Input: { 
  companyName: string
  collectedDataJson: string  // JSON.stringify(DataCollectorResult)
}
Output: AnalysisOutput {
  success: boolean
  data?: AnalyzerResult
  error?: string
  executionTime: number
}
```

#### `classify_industry`
```typescript
Input: {
  companyName: string
  techStack: string  // "TypeScript, React, Node.js"
  collectedDataJson: string
}
Output: ClassificationOutput {
  success: boolean
  data?: IndustryClassifierResult
  error?: string
  executionTime: number
}
```

#### `research_market`
```typescript
Input: {
  companyName: string
  collectedDataJson: string
}
Output: MarketResearchOutput {
  success: boolean
  data?: MarketResearcherResult
  error?: string
  executionTime: number
}
```

**ะะฐะถะฝะพ:**
- ะะกะ ะขะะ tools ะดะพะปะถะฝั ะฑััั ะฒัะทะฒะฐะฝั
- ะะพะถะฝะพ ะฟะฐัะฐะปะปะตะปัะฝะพ
- ะัะต ะฟะพะปััะฐัั collectedDataJson ะธะท ะคะะะซ 1

---

### ะคะะะ 3: ะะตะฝะตัะฐัะธั ัะตะทัะปััะฐัะพะฒ

#### `generate_report`
```typescript
Input: {
  analysisResultJson: string  // JSON.stringify(CompanyAnalysisResult)
  format: 'json' | 'html'
}
Output: ReportGenerationOutput {
  success: boolean
  reportData?: string
  format: 'json' | 'html'
  error?: string
  executionTime: number
}
```

**ะงัะพ ะดะตะปะฐะตั:**
- ะัะทัะฒะฐะตั ReportGeneratorAgent
- ะกะพะทะดะฐะตั ะธัะพะณะพะฒัะน ะพััะตั ะดะปั ััะพะฝัะตะฝะดะฐ
- ะญะขะ ะคะะะะะฌะะซะ ะจะะ!

---

## ๐ System Prompt

ะัะบะตัััะฐัะพั ะธะผะตะตั ัะตัะบะธะน system prompt ั ะธะฝััััะบัะธัะผะธ:

```
ะขั - Orchestrator Agent, ะะะะะะซะ ะะะะะะะะะขะะ ะฐะฝะฐะปะธะทะฐ IT-ะบะพะผะฟะฐะฝะธะน.

๐ ะกะขะะะะะ ะะะะฏะะะ ะะซะะะะะะะะฏ:

๐น ะคะะะ 1: ะกะะะ ะะะะะซะฅ (ะฟะพัะปะตะดะพะฒะฐัะตะปัะฝะพ)
1. collect_data - ัะพะฑะตัะธ ะะกะ ะดะฐะฝะฝัะต ะพ ะบะพะผะฟะฐะฝะธะธ

๐น ะคะะะ 2: ะะะะะะ (ะฟะฐัะฐะปะปะตะปัะฝะพ, ะฒัะต ััะธ!)
2. analyze_data - ะฟัะพะฐะฝะฐะปะธะทะธััะน sentiment ะธ ะบะฐัะตััะฒะพ
3. classify_industry - ะพะฟัะตะดะตะปะธ ะธะฝะดััััะธั ะบะพะผะฟะฐะฝะธะธ
4. research_market - ะธััะปะตะดัะน ััะฝะพะบ ะธ ััะตะฝะดั

๐น ะคะะะ 3: ะะะะะะะฆะะฏ ะะขะงะะขะ (ะฟะพัะปะตะดะพะฒะฐัะตะปัะฝะพ)
5. generate_report - ัะพะทะดะฐะน ะธัะพะณะพะฒัะน ะพััะตั ะดะปั ััะพะฝัะตะฝะดะฐ

๐ฏ ะะะะะะะ:
- ะะกะะะะ ะฒัะฟะพะปะฝัะน ะธะฝััััะผะตะฝัั ะฒ ัะบะฐะทะฐะฝะฝะพะผ ะฟะพััะดะบะต
- ะะะะะะะ ะฝะต ะฟัะพะฟััะบะฐะน ัะฐะทั
- ะัะปะธ collect_data ะฟัะพะฒะฐะปะธะปะฐัั - ะฟัะตัะฒะธ ะฐะฝะฐะปะธะท
- ะัะปะธ ะคะะะ 2 ะฟัะพะฒะฐะปะธะปะฐัั ัะฐััะธัะฝะพ - ะฟัะพะดะพะปะถะฐะน ั ะดะพัััะฟะฝัะผะธ ะดะฐะฝะฝัะผะธ
```

## ๐ก ะัะธะผะตัั ะธัะฟะพะปัะทะพะฒะฐะฝะธั

### ะัะพััะพะน ะฒัะทะพะฒ

```typescript
import { orchestratorAgent } from './agents/orchestrator';

const result = await orchestratorAgent.analyzeCompany('ะะฝะฝะพะฟะพะปะธั');

console.log('Health Score:', result.healthScore);
console.log('Recommendation:', result.recommendation);
```

### ะงัะพ ะฟัะพะธััะพะดะธั ะฒะฝัััะธ

```
1. ะะณะตะฝั ัะธัะฐะตั: "ะัะพะฐะฝะฐะปะธะทะธััะน ะะฝะฝะพะฟะพะปะธั"
2. ะะณะตะฝั ะดัะผะฐะตั: "ะัะถะฝะพ ะฝะฐัะฐัั ั collect_data"
3. ะะณะตะฝั ะฒัะทัะฒะฐะตั: collect_data("ะะฝะฝะพะฟะพะปะธั")
4. ะะพะปััะฐะตั ัะตะทัะปััะฐั: { success: true, data: {...} }
5. ะะณะตะฝั ะดัะผะฐะตั: "ะขะตะฟะตัั ะคะะะ 2, ะฒัะทะพะฒั ะฒัะต ััะธ tools"
6. ะะณะตะฝั ะฒัะทัะฒะฐะตั: analyze_data, classify_industry, research_market
7. ะะพะปััะฐะตั ัะตะทัะปััะฐัั ะฒัะตั ััะตั
8. ะะณะตะฝั ะดัะผะฐะตั: "ะขะตะฟะตัั generate_report"
9. ะะณะตะฝั ะฒัะทัะฒะฐะตั: generate_report(analysisResult)
10. ะะพะทะฒัะฐัะฐะตั ะธัะพะณะพะฒัะน ัะตะทัะปััะฐั
```

## ๐ฅ ะะปััะตะฒัะต ะฟัะตะธะผััะตััะฒะฐ

### ะกัะฐัะฐั ะฒะตััะธั (legacy) โ
```typescript
// ะะตััะบะฐั ะปะพะณะธะบะฐ
const collectedData = await dataCollectorAgent.collect(companyName);
const [analyzer, classifier, researcher] = await Promise.all([...]);
const report = await reportGenerator.generate(...);
```

**ะัะพะฑะปะตะผั:**
- ะะตั ะณะธะฑะบะพััะธ
- ะะต ะผะพะถะตั ะฐะดะฐะฟัะธัะพะฒะฐัััั ะบ ะพัะธะฑะบะฐะผ
- ะะตะปัะทั ะธะทะผะตะฝะธัั ะฟะพััะดะพะบ ะฑะตะท ะธะทะผะตะฝะตะฝะธั ะบะพะดะฐ

### ะะพะฒะฐั ะฒะตััะธั (thinking) โ
```typescript
// ะะณะตะฝั ะกะะ ัะตัะฐะตั
const result = await orchestratorAgent.analyzeCompany(companyName);
```

**ะัะตะธะผััะตััะฒะฐ:**
- โ ะะฒัะพะฝะพะผะฝะพะต ะฟัะธะฝััะธะต ัะตัะตะฝะธะน
- โ ะะดะฐะฟัะธะฒะฝะพััั ะบ ะพัะธะฑะบะฐะผ
- โ ะะพะถะฝะพ ะธะทะผะตะฝะธัั ะปะพะณะธะบั ัะตัะตะท system prompt
- โ ะะตะณะบะพ ะดะพะฑะฐะฒะปััั ะฝะพะฒัะต tools
- โ Reasoning ะธ ัะฐะผะพะฐะฝะฐะปะธะท

## ๐ ะะตะปะตะทะฝัะต ะบะพะฝััะฐะบัั (types.ts)

ะัะต tools ัะปะตะดััั ะตะดะธะฝะพะผั ัะพัะผะฐัั:

```typescript
interface ToolOutput {
  success: boolean      // ะฃัะฟะตั/ะฟัะพะฒะฐะป
  data?: ResultType     // ะะฐะฝะฝัะต ะฟัะธ ััะฟะตัะต
  error?: string        // ะัะธะฑะบะฐ ะฟัะธ ะฟัะพะฒะฐะปะต
  executionTime: number // ะัะตะผั ะฒัะฟะพะปะฝะตะฝะธั ะฒ ms
}
```

ะญัะพ ะณะฐัะฐะฝัะธััะตั:
- โ ะัะตะดัะบะฐะทัะตะผะพััั ะดะปั ะฐะณะตะฝัะฐ
- โ ะะดะธะฝะพะพะฑัะฐะทะธะต ะพะฑัะฐะฑะพัะบะธ ะพัะธะฑะพะบ
- โ ะะพะฝะธัะพัะธะฝะณ ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ
- โ ะะตะณะบะพััั ะพัะปะฐะดะบะธ

## ๐ Roadmap

- [x] ะกะพะทะดะฐัั ััััะบัััั orchestrator/
- [x] ะกะพะทะดะฐัั tools ะดะปั ะฒัะตั ัะฐะท
- [x] ะกะพะทะดะฐัั ะถะตะปะตะทะฝัะต ะบะพะฝััะฐะบัั (types.ts)
- [x] ะะตัะตะดะตะปะฐัั OrchestratorAgent ะบะฐะบ ThinkingAgent
- [x] ะะฐะฟะธัะฐัั ะดะพะบัะผะตะฝัะฐัะธั
- [ ] ะฃะปัััะธัั ะฟะฐััะธะฝะณ ัะตะทัะปััะฐัะพะฒ LangChain agent
- [ ] ะะพะฑะฐะฒะธัั ะธะฝััััะผะตะฝั ะดะปั ัะธะฝะฐะปัะฝะพะณะพ ัะตัะตะฝะธั (healthScore, recommendation)
- [ ] ะะพะฑะฐะฒะธัั ะธะฝััััะผะตะฝัั ะดะปั ะฐะปะตััะพะฒ ะธ ัะพะฑััะธะน
- [ ] ะะพะฑะฐะฒะธัั retry ะปะพะณะธะบั ะฒ tools
- [ ] ะะพะฑะฐะฒะธัั ะผะตััะธะบะธ ะธ ะผะพะฝะธัะพัะธะฝะณ

## ๐ ะัะพะณ

**OrchestratorAgent** ัะตะฟะตัั - ััะพ ะฟะพะปะฝะพัะตะฝะฝัะน "ะดัะผะฐััะธะน" ะฐะณะตะฝั ะบะพัะพััะน:
- ะกะะ ัะฟัะฐะฒะปัะตั ะฟัะพัะตััะพะผ ะฐะฝะฐะปะธะทะฐ
- ะัะฟะพะปัะทัะตั tools ะดะปั ะฒัะทะพะฒะฐ ะดััะณะธั ะฐะณะตะฝัะพะฒ
- ะกะปะตะดัะตั ัะตัะบะพะผั ะฟะพััะดะบั ะฒัะฟะพะปะฝะตะฝะธั (ะคะะะ 1 โ 2 โ 3)
- ะะผะตะตั ะถะตะปะตะทะฝัะต ะบะพะฝััะฐะบัั ะดะปั ะฒะทะฐะธะผะพะดะตะนััะฒะธั
- ะะตะณะบะพ ัะฐััะธััะตััั ะฝะพะฒัะผะธ tools

ะญัะพ ะพัะฝะพะฒะฐ ะดะปั ะผะฐัััะฐะฑะธััะตะผะพะน AI-ัะธััะตะผั ะฐะฝะฐะปะธะทะฐ ะบะพะผะฟะฐะฝะธะน! ๐

